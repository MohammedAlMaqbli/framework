{
	"version": "11f4892304465d65e022681312abc87bd57b6b4f",
	"signature": "824914e338fead430803f2fdd9ed7cb450bebe2b",
	"classes": {
		"Model": {
			"name": {
				"name": "Model"
			},
			"static": [],
			"bound": [],
			"classvars": {
				"_name": true,
				"_inherit": true
			}
		}
	},
	"baselib": {},
	"nonlocalvars": [],
	"imported_module_ids": [
		"orm.fields",
		"orm.tools",
		"orm.pouchdb"
	],
	"exports": [
		{
			"name": "env"
		},
		{
			"name": "schemas"
		},
		{
			"name": "raw_models"
		},
		{
			"name": "queryInverse"
		},
		{
			"name": "Model"
		}
	],
	"outputs": {
		"beautify:true keep_docstrings:true js_version:5": "        var env, schemas, raw_models;\n        var fields = ρσ_modules[\"orm.fields\"];\n\n        var exist = ρσ_modules[\"orm.tools\"].exist;\n        var keys = ρσ_modules[\"orm.tools\"].keys;\n        var merge = ρσ_modules[\"orm.tools\"].merge;\n        var copy = ρσ_modules[\"orm.tools\"].copy;\n        var dict = ρσ_modules[\"orm.tools\"].dict;\n        var checkBase64 = ρσ_modules[\"orm.tools\"].checkBase64;\n        var configuration = ρσ_modules[\"orm.tools\"].configuration;\n        var ajax = ρσ_modules[\"orm.tools\"].ajax;\n        var array = ρσ_modules[\"orm.tools\"].array;\n        var exception = ρσ_modules[\"orm.tools\"].exception;\n        var warning = ρσ_modules[\"orm.tools\"].warning;\n\n        var db = ρσ_modules[\"orm.pouchdb\"].db;\n\n        env = {};\n        schemas = {};\n        raw_models = {};\n        function queryInverse(field_type, records, fields, _fields) {\n            var result, field, record;\n            var ρσ_Iter0 = ρσ_Iterable(records[(typeof field_type === \"number\" && field_type < 0) ? records.length + field_type : field_type]);\n            for (var ρσ_Index0 = 0; ρσ_Index0 < ρσ_Iter0.length; ρσ_Index0++) {\n                record = ρσ_Iter0[ρσ_Index0];\n                var ρσ_Iter1 = ρσ_Iterable(fields);\n                for (var ρσ_Index1 = 0; ρσ_Index1 < ρσ_Iter1.length; ρσ_Index1++) {\n                    field = ρσ_Iter1[ρσ_Index1];\n                    record[(typeof field === \"number\" && field < 0) ? record.length + field : field] = ρσ_list_decorate([]);\n                    var ρσ_Iter2 = ρσ_Iterable(records[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].relation, records)]);\n                    for (var ρσ_Index2 = 0; ρσ_Index2 < ρσ_Iter2.length; ρσ_Index2++) {\n                        result = ρσ_Iter2[ρσ_Index2];\n                        if ((result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === record.id || typeof result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === \"object\" && ρσ_equals(result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)], record.id))) {\n                            record[(typeof field === \"number\" && field < 0) ? record.length + field : field].push(result.id);\n                        }\n                    }\n                }\n            }\n            return records;\n        };\n        if (!queryInverse.__argnames__) Object.defineProperties(queryInverse, {\n            __argnames__ : {value: [\"field_type\", \"records\", \"fields\", \"_fields\"]}\n        });\n\n        function Model() {\n            if (this.ρσ_object_id === undefined) Object.defineProperty(this, \"ρσ_object_id\", {\"value\":++ρσ_object_counter});\n            Model.prototype.__init__.apply(this, arguments);\n        }\n        Model.prototype.__init__ = function __init__(_is_env, _is_singleton) {\n            var self = this;\n            var newmodel, oldconstructor, models, key, raw_model, schema, reserved, valid_fields, relation;\n            self._fields = {};\n            self._values = {};\n            self._related = {};\n            self._one2many_fields = ρσ_list_decorate([]);\n            self._is_env = ((_is_env !== undefined && (typeof _is_env !== \"object\" || ρσ_not_equals(_is_env, undefined)))) ? _is_env : false;\n            self._is_singleton = ((_is_singleton !== undefined && (typeof _is_singleton !== \"object\" || ρσ_not_equals(_is_singleton, undefined)))) ? _is_singleton : false;\n            self._inherited_keys = ρσ_list_decorate([]);\n            if (exist(self._inherit) && exist(raw_models[ρσ_bound_index(self._inherit, raw_models)]) && (env[ρσ_bound_index(self._inherit, env)] !== true && (typeof env[ρσ_bound_index(self._inherit, env)] !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._inherit, env)], true)))) {\n                if (!exist(self._name)) {\n                    self._name = self._inherit;\n                }\n                newmodel = self;\n                oldconstructor = self.constructor;\n                models = raw_models[ρσ_bound_index(newmodel._inherit, raw_models)];\n                if (!(ρσ_in(oldconstructor, models))) {\n                    models.push(oldconstructor);\n                }\n                var ρσ_Iter3 = ρσ_Iterable(models);\n                for (var ρσ_Index3 = 0; ρσ_Index3 < ρσ_Iter3.length; ρσ_Index3++) {\n                    raw_model = ρσ_Iter3[ρσ_Index3];\n                    var ρσ_Iter4 = ρσ_Iterable(Object.getOwnPropertyNames(raw_model.prototype));\n                    for (var ρσ_Index4 = 0; ρσ_Index4 < ρσ_Iter4.length; ρσ_Index4++) {\n                        key = ρσ_Iter4[ρσ_Index4];\n                        if (ρσ_not_equals(key.slice(0, 2), \"__\") && !(ρσ_in(key, ρσ_list_decorate([ \"_inherit\", \"inherited_constructor\", \"values\" ])))) {\n                            self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = raw_model.prototype)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                            self._inherited_keys.push(key);\n                        }\n                    }\n                }\n                self._name = newmodel._name;\n                self._is_env = false;\n                if (exist(env[ρσ_bound_index(self._name, env)]) && (env[ρσ_bound_index(self._name, env)].constructor !== self.constructor && (typeof env[ρσ_bound_index(self._name, env)].constructor !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._name, env)].constructor, self.constructor)))) {\n                    ρσ_delitem(env, self._name);\n                }\n            }\n            if (!(ρσ_in(\"Model\", env))) {\n                env[\"Model\"] = Model;\n            }\n            if (!(ρσ_in(\"context\", env))) {\n                env[\"context\"] = {};\n            }\n            if (!exist(env[ρσ_bound_index(self._name, env)])) {\n                env[ρσ_bound_index(self._name, env)] = true;\n                env[self._name] = new self.constructor(_is_env=true);\n                env[ρσ_bound_index(self._name, env)]._is_env = true;\n            }\n            self.env = env;\n            if (self._is_env) {\n                return;\n            }\n            schema = (function(){\n                var ρσ_d = {};\n                ρσ_d[\"singular\"] = self._name;\n                ρσ_d[\"plural\"] = self._name;\n                return ρσ_d;\n            }).call(this);\n            schemas[ρσ_bound_index(self._name, schemas)] = schema;\n            reserved = ρσ_list_decorate([ \"id\", \"_id\", \"rev\", \"_rev\", \"ids\" ]);\n            if (self._is_singleton) {\n                self.id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID\", related: \"_id\", store: true})]);\n                self._id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID (Raw)\"})]);\n            }\n            self._fields.ids = ρσ_interpolate_kwargs.call(fields, fields.Data, [ρσ_desugar_kwargs({string: \"IDs\"})]);\n            self.rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\", related: \"_rev\", store: true})]);\n            self._rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\"})]);\n            valid_fields = (function() {\n                var ρσ_Iter = ρσ_Iterable(Object.getOwnPropertyNames(self.constructor.prototype)), ρσ_Result = [], key;\n                for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                    key = ρσ_Iter[ρσ_Index];\n                    if ((key[0] !== \"_\" && (typeof key[0] !== \"object\" || ρσ_not_equals(key[0], \"_\"))) && !(ρσ_in(key, ρσ_list_decorate([ \"constructor\", \"env\", \"values\" ])))) {\n                        ρσ_Result.push(key);\n                    }\n                }\n                ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                return ρσ_Result;\n            })().concat(reserved).concat(self._inherited_keys);\n            var ρσ_Iter5 = ρσ_Iterable(valid_fields);\n            for (var ρσ_Index5 = 0; ρσ_Index5 < ρσ_Iter5.length; ρσ_Index5++) {\n                key = ρσ_Iter5[ρσ_Index5];\n                if (!exist(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]) || ρσ_not_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) || ρσ_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) && !(ρσ_in(\"compute\", self[(typeof key === \"number\" && key < 0) ? self.length + key : key]))) {\n                    continue;\n                }\n                if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2many\", \"many2many\", \"one2one\" ]))) {\n                    if (!schema.relations) {\n                        schema.relations = {};\n                    }\n                    relation = \"belongsTo\";\n                    if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"one2many\", \"many2many\" ]))) {\n                        relation = \"hasMany\";\n                    }\n                    if ((self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"one2many\" && (typeof self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"object\" || ρσ_not_equals(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, \"one2many\")))) {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                    } else {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    ρσ_d[\"queryInverse\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].inverse;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                        self._one2many_fields.push(key);\n                    }\n                    if ((type === \"belongsTo\" || typeof type === \"object\" && ρσ_equals(type, \"belongsTo\"))) {\n                        db.createIndex((function(){\n                            var ρσ_d = {};\n                            ρσ_d[\"index\"] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"fields\"] = ρσ_list_decorate([ \"data.\" + key, \"_id\" ]);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this));\n                    }\n                }\n                (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                if (self._is_singleton) {\n                    if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                        if (!exist((ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)])) {\n                            (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = ρσ_list_decorate([]);\n                        }\n                        (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)].push(key);\n                    }\n                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].default;\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                    \"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\";\n                }\n            }\n            if (exist(self._fields)) {\n                (ρσ_expr_temp = self.env)[ρσ_bound_index(self._name, ρσ_expr_temp)]._fields = self._fields;\n            }\n            try {\n                db.setSchema((function() {\n                    var ρσ_Iter = ρσ_Iterable(schemas), ρσ_Result = [], key;\n                    for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                        key = ρσ_Iter[ρσ_Index];\n                        ρσ_Result.push(schemas[(typeof key === \"number\" && key < 0) ? schemas.length + key : key]);\n                    }\n                    ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                    return ρσ_Result;\n                })());\n            } catch (ρσ_Exception) {\n                ρσ_last_exception = ρσ_Exception;\n                {\n                } \n            }\n            if (exist(self._name)) {\n                if (!exist(raw_models[ρσ_bound_index(self._name, raw_models)])) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)] = ρσ_list_decorate([]);\n                }\n                if (!(ρσ_in(self.constructor, raw_models[ρσ_bound_index(self._name, raw_models)]))) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)].push(self.constructor);\n                }\n            }\n            if (ρσ_in(\"values\", Object.getOwnPropertyNames(self))) {\n                return;\n            }\n            Object.defineProperty(self, \"ids\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_singleton) {\n                        return ρσ_list_decorate([ self.id ]);\n                    } else {\n                        return (function() {\n                            var ρσ_Iter = ρσ_Iterable(self.values), ρσ_Result = [], object;\n                            for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                                object = ρσ_Iter[ρσ_Index];\n                                ρσ_Result.push(object.id);\n                            }\n                            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                            return ρσ_Result;\n                        })();\n                    }\n                };\n                ρσ_d[\"set\"] = function () {\n                    return;\n                };\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"values\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    return self._values;\n                };\n                ρσ_d[\"set\"] = (function() {\n                    var ρσ_anonfunc = function (newvalue) {\n                        var key;\n                        if (!exist(newvalue)) {\n                            return;\n                        }\n                        if (self._is_singleton) {\n                            self._values = merge(self._values, newvalue);\n                            var ρσ_Iter6 = ρσ_Iterable(self._fields);\n                            for (var ρσ_Index6 = 0; ρσ_Index6 < ρσ_Iter6.length; ρσ_Index6++) {\n                                key = ρσ_Iter6[ρσ_Index6];\n                                if (ρσ_in(key, newvalue)) {\n                                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = self.adapt(key, newvalue[(typeof key === \"number\" && key < 0) ? newvalue.length + key : key]);\n                                }\n                            }\n                        } else {\n                            self._values = newvalue;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"newvalue\"]}\n                    });\n                    return ρσ_anonfunc;\n                })();\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"length\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_env) {\n                        return 0;\n                    } else if (self._is_singleton) {\n                        if (!exist(self.id) || !exist(self.values)) {\n                            return 0;\n                        }\n                        return 1;\n                    } else {\n                        return self._values.length;\n                    }\n                };\n                return ρσ_d;\n            }).call(this));\n        };\n        if (!Model.prototype.__init__.__argnames__) Object.defineProperties(Model.prototype.__init__, {\n            __argnames__ : {value: [\"_is_env\", \"_is_singleton\"]}\n        });\n        Model.__argnames__ = Model.prototype.__init__.__argnames__;\n        Model.__handles_kwarg_interpolation__ = Model.prototype.__init__.__handles_kwarg_interpolation__;\n        Model.prototype.__iter__ = function __iter__() {\n            var self = this;\n            var lists, result, value;\n            if (self._is_env || self.length < 1) {\n                return ρσ_list_decorate([]);\n            } else if (self._is_singleton) {\n                return ρσ_list_decorate([ self ]);\n            }\n            lists = ρσ_list_decorate([]);\n            var ρσ_Iter7 = ρσ_Iterable(self.values);\n            for (var ρσ_Index7 = 0; ρσ_Index7 < ρσ_Iter7.length; ρσ_Index7++) {\n                value = ρσ_Iter7[ρσ_Index7];\n                result = self.browse();\n                result.values = value;\n                lists.push(result);\n            }\n            return lists;\n        };\n        if (!Model.prototype.__iter__.__argnames__) Object.defineProperties(Model.prototype.__iter__, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype[ρσ_iterator_symbol] = Model.prototype.__iter__;\n        Model.prototype.__view__ = function __view__(view, view_type) {\n            var self = this;\n            return view;\n        };\n        if (!Model.prototype.__view__.__argnames__) Object.defineProperties(Model.prototype.__view__, {\n            __argnames__ : {value: [\"view\", \"view_type\"]}\n        });\n        Model.prototype.browse = function browse() {\n            var self = this;\n            var ids = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.ids : arguments[0];\n            var is_singleton = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_singleton : arguments[1];\n            var is_client = (arguments[2] === undefined || ( 2 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_client : arguments[2];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"ids\")){\n                ids = ρσ_kwargs_obj.ids;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_singleton\")){\n                is_singleton = ρσ_kwargs_obj.is_singleton;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var result;\n            if (!exist(ids)) {\n                return new self.constructor(false, is_singleton);\n            } else if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/browse\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = ids;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        console.log(result);\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        if (exist(record)) {\n                            ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({ids: ids, is_client: false})]).then((function() {\n                                var ρσ_anonfunc = function (records) {\n                                    if (exist(records)) {\n                                        ρσ_interpolate_kwargs.call(records, records.write, [result.values].concat([ρσ_desugar_kwargs({is_client: false})]));\n                                    } else {\n                                        delete result.values.rev;\n                                        delete result.values._rev;\n                                        delete result.values._id;\n                                        db.rel.save(record._name, result.values);\n                                    }\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"records\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })()).catch((function() {\n                                var ρσ_anonfunc = function (error) {\n                                    console.log(error);\n                                    delete result.values.rev;\n                                    delete result.values._rev;\n                                    delete result.values._id;\n                                    db.rel.save(record._name, result.values);\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"error\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })());\n                        }\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.browse, [ids].concat([ρσ_desugar_kwargs({is_client: false})]));\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else if (ρσ_in(type(ids), ρσ_list_decorate([ ρσ_list_constructor, Array ]))) {\n                if (ids.length > 1) {\n                    var result = new self.constructor(false, false);\n                    return db.rel.find(result._name, ids).then((function() {\n                        var ρσ_anonfunc = function (record) {\n                            record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                            result.values = record[ρσ_bound_index(result._name, record)];\n                            return result;\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"record\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    ids = ids[0];\n                }\n            }\n            if (ρσ_equals(type(ids), String)) {\n                result = self.browse();\n                return db.rel.find(result._name, ids).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                        result.values = record[ρσ_bound_index(result._name, record)][0];\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.browse.__defaults__) Object.defineProperties(Model.prototype.browse, {\n            __defaults__ : {value: {ids:false, is_singleton:true, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"ids\", \"is_singleton\", \"is_client\"]}\n        });\n        Model.prototype.search = function search() {\n            var self = this;\n            var args, options, result;\n            args = Array.prototype.slice.call(arguments);\n            options = copy(self.env.context);\n            if ((options.is_client === undefined || typeof options.is_client === \"object\" && ρσ_equals(options.is_client, undefined))) {\n                options.is_client = configuration.client;\n            }\n            if (exist(self.env.context.active_limit)) {\n                options.limit = self.env.context.active_limit;\n            }\n            if (exist(self.env.context.active_index)) {\n                options.index = self.env.context.active_index;\n            }\n            if (exist(options.is_client)) {\n                delete options.is_client;\n                return ajax(\"post\", \"json\", configuration.url + \"/api/search\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"args\"] = args;\n                    ρσ_d[\"options\"] = options;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        self.browse(record.ids);\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.with_context, [ρσ_desugar_kwargs({is_client: false})]).search(args);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            function query(record) {\n                var results, arg;\n                results = ρσ_list_decorate([]);\n                var ρσ_Iter8 = ρσ_Iterable(args);\n                for (var ρσ_Index8 = 0; ρσ_Index8 < ρσ_Iter8.length; ρσ_Index8++) {\n                    arg = ρσ_Iter8[ρσ_Index8];\n                    if (!arg || ρσ_in(str(arg), ρσ_list_decorate([ \"|\", \"[]\" ]))) {\n                        continue;\n                    }\n                    if ((arg[1] === \"=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"=\"))) {\n                        results.push((record[ρσ_bound_index(arg[0], record)] === arg[2] || typeof record[ρσ_bound_index(arg[0], record)] === \"object\" && ρσ_equals(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \">\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] > arg[2]);\n                    } else if ((arg[1] === \">=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] >= arg[2]);\n                    } else if ((arg[1] === \"<\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] < arg[2]);\n                    } else if ((arg[1] === \"<=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] <= arg[2]);\n                    } else if ((arg[1] === \"in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"in\"))) {\n                        results.push(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2]));\n                    } else if ((arg[1] === \"not in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"not in\"))) {\n                        results.push(!(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \"like\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"like\"))) {\n                        results.push(ρσ_in(arg[2], record[ρσ_bound_index(arg[0], record)]));\n                    } else if ((arg[1] === \"ilike\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"ilike\"))) {\n                        results.push(ρσ_in(str(arg[2]).toLowerCase(), str(record[ρσ_bound_index(arg[0], record)]).toLowerCase()));\n                    }\n                }\n                if (!exist(args) || !exist(args[0])) {\n                    return true;\n                } else if ((args[0] === \"|\" || typeof args[0] === \"object\" && ρσ_equals(args[0], \"|\"))) {\n                    return results.some((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    return results.every((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n            };\n            if (!query.__argnames__) Object.defineProperties(query, {\n                __argnames__ : {value: [\"record\"]}\n            });\n\n            result = self.browse();\n            if ((options.limit === 1 || typeof options.limit === \"object\" && ρσ_equals(options.limit, 1))) {\n                if (options.index > 0) {\n                    return new Promise((function() {\n                        var ρσ_anonfunc = function (resolve, reject) {\n                            resolve(result);\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"resolve\", \"reject\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var record;\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        record = records[ρσ_bound_index(result._name, records)].find(query);\n                        result.values = record;\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var values, start, result, record;\n                        var result = new self.constructor(false, false);\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        if (records[ρσ_bound_index(result._name, records)].length > 1) {\n                            values = records[ρσ_bound_index(result._name, records)].filter(query);\n                            if (exist(options.limit) && ρσ_equals(type(options.limit), Number)) {\n                                start = 0;\n                                if (exist(options.index) && ρσ_equals(type(options.index), Number)) {\n                                    start = options.index * options.limit;\n                                    options.limit = (options.index + 1) * options.limit;\n                                }\n                                result.values = values.slice(start, options.limit);\n                            } else {\n                                result.values = values;\n                            }\n                            return result;\n                        } else {\n                            result = self.browse();\n                            if (options.index > 0) {\n                                return result;\n                            }\n                            record = records[ρσ_bound_index(result._name, records)].find(query);\n                            result.values = record;\n                            return result;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.search.__argnames__) Object.defineProperties(Model.prototype.search, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.read = function read() {\n            var self = this;\n            if (self._is_env) {\n                return {};\n            }\n            return self._values;\n        };\n        if (!Model.prototype.read.__argnames__) Object.defineProperties(Model.prototype.read, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.adapt = function adapt(key, value) {\n            var self = this;\n            var field;\n            if (self._is_env) {\n                return;\n            }\n            if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"char\", \"text\" ]))) {\n                if (!exist(value)) {\n                    value = \"\";\n                } else {\n                    value = String(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"integer\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"integer\"))) {\n                value = parseInt(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"float\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"float\"))) {\n                value = parseFloat(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"boolean\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"boolean\"))) {\n                if (ρσ_in(value, ρσ_list_decorate([ \"true\", \"True\" ]))) {\n                    value = true;\n                } else if (ρσ_in(value, ρσ_list_decorate([ \"false\", \"False\", null, undefined ]))) {\n                    value = false;\n                } else if (ρσ_equals(type(value), String)) {\n                    return new Exception(\"Not a valid Boolean\");\n                } else {\n                    value = Boolean(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"binary\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"binary\"))) {\n                if (!checkBase64(value)) {\n                    return new Exception(\"Not a valid base64\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"selection\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"selection\"))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_in(!value, dict((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].selection))) {\n                    return new Exception(\"Incorrect value\");\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"date\", \"datetime\" ]))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_equals(type(value), Date)) {\n                    value = value.toISOString();\n                } else if (ρσ_equals(type(value), String)) {\n                    try {\n                        value = new Date(value).toISOString();\n                    } catch (ρσ_Exception) {\n                        ρσ_last_exception = ρσ_Exception;\n                        {\n                            return new Exception(\"Can't parse Date\");\n                        } \n                    }\n                } else {\n                    return new Exception(\"Can't parse Date\");\n                }\n                if (exist(value) && ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"date\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"date\"))) {\n                    value = value.split(\"T\")[0] + \"T00:00:00.000Z\";\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2one\" ]))) {\n                if (!exist(value)) {\n                    return null;\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.id;\n                } else if (ρσ_in(type(value), ρσ_list_decorate([ ρσ_list_constructor, Array ])) && value.length > 0) {\n                    value = value[0];\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2many\", \"one2many\" ]))) {\n                if (!exist(value)) {\n                    value = ρσ_list_decorate([]);\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.ids;\n                }\n            }\n            if ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].store) {\n                if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                    self[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, self)] = value;\n                    (ρσ_expr_temp = self._values)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = value;\n                }\n                if (exist((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key])) {\n                    var ρσ_Iter9 = ρσ_Iterable((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key]);\n                    for (var ρσ_Index9 = 0; ρσ_Index9 < ρσ_Iter9.length; ρσ_Index9++) {\n                        field = ρσ_Iter9[ρσ_Index9];\n                        self[(typeof field === \"number\" && field < 0) ? self.length + field : field] = value;\n                        (ρσ_expr_temp = self._values)[(typeof field === \"number\" && field < 0) ? ρσ_expr_temp.length + field : field] = value;\n                    }\n                }\n            }\n            return value;\n        };\n        if (!Model.prototype.adapt.__argnames__) Object.defineProperties(Model.prototype.adapt, {\n            __argnames__ : {value: [\"key\", \"value\"]}\n        });\n        Model.prototype.update = function update() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? update.__defaults__.values : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            var key, value, object;\n            if (self._is_env) {\n                return;\n            }\n            if (!exist(values)) {\n                if (self._is_singleton) {\n                    values = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self._fields), ρσ_Result = {}, key;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            key = ρσ_Iter[ρσ_Index];\n                            ρσ_Result[key] = (self[(typeof key === \"number\" && key < 0) ? self.length + key : key]);\n                        }\n                        return ρσ_Result;\n                    })();\n                } else {\n                    values = {};\n                }\n            }\n            var ρσ_Iter10 = ρσ_Iterable(values);\n            for (var ρσ_Index10 = 0; ρσ_Index10 < ρσ_Iter10.length; ρσ_Index10++) {\n                key = ρσ_Iter10[ρσ_Index10];\n                value = self.adapt(key, values[(typeof key === \"number\" && key < 0) ? values.length + key : key]);\n                if (self._is_singleton) {\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = value;\n                } else {\n                    var ρσ_Iter11 = ρσ_Iterable(self._values);\n                    for (var ρσ_Index11 = 0; ρσ_Index11 < ρσ_Iter11.length; ρσ_Index11++) {\n                        object = ρσ_Iter11[ρσ_Index11];\n                        object[(typeof key === \"number\" && key < 0) ? object.length + key : key] = value;\n                    }\n                }\n            }\n        };\n        if (!Model.prototype.update.__defaults__) Object.defineProperties(Model.prototype.update, {\n            __defaults__ : {value: {values:false}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\"]}\n        });\n        Model.prototype.queue = function queue(method) {\n            var self = this;\n            var records;\n            if (self._is_env || !exist(self)) {\n                return;\n            }\n            records = self.__iter__();\n            var index = 0;\n            function next() {\n                index += 1;\n                if (index < records.length && exist(records[(typeof index === \"number\" && index < 0) ? records.length + index : index])) {\n                    return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n                }\n                return self;\n            };\n\n            return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n        };\n        if (!Model.prototype.queue.__argnames__) Object.defineProperties(Model.prototype.queue, {\n            __argnames__ : {value: [\"method\"]}\n        });\n        Model.prototype.create = function create() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            self.update();\n            if (!exist(values)) {\n                values = self.read();\n            } else {\n                merge(self.read(), values);\n            }\n            if (self._is_env) {\n                self = self.browse();\n                self.update(values);\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/create\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There is some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            ρσ_delitem(values, \"id\");\n            ρσ_delitem(values, \"rev\");\n            ρσ_delitem(values, \"_id\");\n            ρσ_delitem(values, \"_rev\");\n            return db.rel.save(self._name, values).then((function() {\n                var ρσ_anonfunc = function (record) {\n                    self.values = record[ρσ_bound_index(self._name, record)][0];\n                    return self;\n                };\n                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                    __argnames__ : {value: [\"record\"]}\n                });\n                return ρσ_anonfunc;\n            })());\n        };\n        if (!Model.prototype.create.__defaults__) Object.defineProperties(Model.prototype.create, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.write = function write() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            self.update();\n            if (!exist(values)) {\n                if (!self._is_singleton) {\n                    return;\n                }\n                values = self.read();\n            } else {\n                self.update(values);\n                values = self.read();\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/write\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self.__iter__()), ρσ_Result = [], record;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            record = ρσ_Iter[ρσ_Index];\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There are some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                return db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        delete values._id;\n                        delete values._rev;\n                        delete values.rev;\n                        values.rev = record._rev;\n                        return db.rel.save(self._name, values).then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                self.values = values;\n                                return self;\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return self.queue((function() {\n                    var ρσ_anonfunc = function (record, next) {\n                        return record.write().then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                return next();\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\", \"next\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return self;\n        };\n        if (!Model.prototype.write.__defaults__) Object.defineProperties(Model.prototype.write, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.unlink = function unlink() {\n            var self = this;\n            var is_client = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? unlink.__defaults__.is_client : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var value;\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/unlink\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self.__iter__()), ρσ_Result = [], record;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            record = ρσ_Iter[ρσ_Index];\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        return true;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return false;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        db.remove(record);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                var ρσ_Iter12 = ρσ_Iterable(self._values);\n                for (var ρσ_Index12 = 0; ρσ_Index12 < ρσ_Iter12.length; ρσ_Index12++) {\n                    value = ρσ_Iter12[ρσ_Index12];\n                    value[\"_deleted\"] = true;\n                }\n                db.bulkDocs(self._values);\n            }\n            return true;\n        };\n        if (!Model.prototype.unlink.__defaults__) Object.defineProperties(Model.prototype.unlink, {\n            __defaults__ : {value: {is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"is_client\"]}\n        });\n        Model.prototype.with_context = function with_context() {\n            var self = this;\n            var kwargs = arguments[arguments.length-1];\n            if (kwargs === null || typeof kwargs !== \"object\" || kwargs [ρσ_kwargs_symbol] !== true) kwargs = {};\n            var key;\n            var ρσ_Iter13 = ρσ_Iterable(kwargs);\n            for (var ρσ_Index13 = 0; ρσ_Index13 < ρσ_Iter13.length; ρσ_Index13++) {\n                key = ρσ_Iter13[ρσ_Index13];\n                (ρσ_expr_temp = self.env.context)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = kwargs[(typeof key === \"number\" && key < 0) ? kwargs.length + key : key];\n            }\n            return self;\n        };\n        if (!Model.prototype.with_context.__handles_kwarg_interpolation__) Object.defineProperties(Model.prototype.with_context, {\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: []}\n        });\n        Model.prototype.__repr__ = function __repr__ () {\n                        return \"<\" + __name__ + \".\" + this.constructor.name + \" #\" + this.ρσ_object_id + \">\";\n        };\n        Model.prototype.__str__ = function __str__ () {\n            return this.__repr__();\n        };\n        Object.defineProperty(Model.prototype, \"__bases__\", {value: []});\n        Object.defineProperty(Model.prototype, \"__doc__\", {value: \"def __super__(self):\\ninherited = v'new self.inherited_constructor(self._is_env, self._is_singleton)'\\ninherited.values = self.values\\nreturn inherited\"});\n        Model.prototype._name = undefined;\n        Model.prototype._inherit = false;\n\n        ρσ_modules[\"orm.models\"].env = env;\n        ρσ_modules[\"orm.models\"].schemas = schemas;\n        ρσ_modules[\"orm.models\"].raw_models = raw_models;\n        ρσ_modules[\"orm.models\"].queryInverse = queryInverse;\n        ρσ_modules[\"orm.models\"].Model = Model;\n",
		"beautify:true keep_docstrings:true js_version:6": "        var env, schemas, raw_models;\n        var fields = ρσ_modules[\"orm.fields\"];\n\n        var exist = ρσ_modules[\"orm.tools\"].exist;\n        var keys = ρσ_modules[\"orm.tools\"].keys;\n        var merge = ρσ_modules[\"orm.tools\"].merge;\n        var copy = ρσ_modules[\"orm.tools\"].copy;\n        var dict = ρσ_modules[\"orm.tools\"].dict;\n        var checkBase64 = ρσ_modules[\"orm.tools\"].checkBase64;\n        var configuration = ρσ_modules[\"orm.tools\"].configuration;\n        var ajax = ρσ_modules[\"orm.tools\"].ajax;\n        var array = ρσ_modules[\"orm.tools\"].array;\n        var exception = ρσ_modules[\"orm.tools\"].exception;\n        var warning = ρσ_modules[\"orm.tools\"].warning;\n\n        var db = ρσ_modules[\"orm.pouchdb\"].db;\n\n        env = {};\n        schemas = {};\n        raw_models = {};\n        function queryInverse(field_type, records, fields, _fields) {\n            var result, field, record;\n            var ρσ_Iter0 = records[(typeof field_type === \"number\" && field_type < 0) ? records.length + field_type : field_type];\n            ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === \"function\") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));\n            for (var ρσ_Index0 of ρσ_Iter0) {\n                record = ρσ_Index0;\n                var ρσ_Iter1 = fields;\n                ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === \"function\") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));\n                for (var ρσ_Index1 of ρσ_Iter1) {\n                    field = ρσ_Index1;\n                    record[(typeof field === \"number\" && field < 0) ? record.length + field : field] = ρσ_list_decorate([]);\n                    var ρσ_Iter2 = records[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].relation, records)];\n                    ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === \"function\") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));\n                    for (var ρσ_Index2 of ρσ_Iter2) {\n                        result = ρσ_Index2;\n                        if ((result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === record.id || typeof result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === \"object\" && ρσ_equals(result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)], record.id))) {\n                            record[(typeof field === \"number\" && field < 0) ? record.length + field : field].push(result.id);\n                        }\n                    }\n                }\n            }\n            return records;\n        };\n        if (!queryInverse.__argnames__) Object.defineProperties(queryInverse, {\n            __argnames__ : {value: [\"field_type\", \"records\", \"fields\", \"_fields\"]}\n        });\n\n        function Model() {\n            if (this.ρσ_object_id === undefined) Object.defineProperty(this, \"ρσ_object_id\", {\"value\":++ρσ_object_counter});\n            Model.prototype.__init__.apply(this, arguments);\n        }\n        Model.prototype.__init__ = function __init__(_is_env, _is_singleton) {\n            var self = this;\n            var newmodel, oldconstructor, models, key, raw_model, schema, reserved, valid_fields, relation;\n            self._fields = {};\n            self._values = {};\n            self._related = {};\n            self._one2many_fields = ρσ_list_decorate([]);\n            self._is_env = ((_is_env !== undefined && (typeof _is_env !== \"object\" || ρσ_not_equals(_is_env, undefined)))) ? _is_env : false;\n            self._is_singleton = ((_is_singleton !== undefined && (typeof _is_singleton !== \"object\" || ρσ_not_equals(_is_singleton, undefined)))) ? _is_singleton : false;\n            self._inherited_keys = ρσ_list_decorate([]);\n            if (exist(self._inherit) && exist(raw_models[ρσ_bound_index(self._inherit, raw_models)]) && (env[ρσ_bound_index(self._inherit, env)] !== true && (typeof env[ρσ_bound_index(self._inherit, env)] !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._inherit, env)], true)))) {\n                if (!exist(self._name)) {\n                    self._name = self._inherit;\n                }\n                newmodel = self;\n                oldconstructor = self.constructor;\n                models = raw_models[ρσ_bound_index(newmodel._inherit, raw_models)];\n                if (!(ρσ_in(oldconstructor, models))) {\n                    models.push(oldconstructor);\n                }\n                var ρσ_Iter3 = models;\n                ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === \"function\") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));\n                for (var ρσ_Index3 of ρσ_Iter3) {\n                    raw_model = ρσ_Index3;\n                    var ρσ_Iter4 = Object.getOwnPropertyNames(raw_model.prototype);\n                    ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === \"function\") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));\n                    for (var ρσ_Index4 of ρσ_Iter4) {\n                        key = ρσ_Index4;\n                        if (ρσ_not_equals(key.slice(0, 2), \"__\") && !(ρσ_in(key, ρσ_list_decorate([ \"_inherit\", \"inherited_constructor\", \"values\" ])))) {\n                            self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = raw_model.prototype)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                            self._inherited_keys.push(key);\n                        }\n                    }\n                }\n                self._name = newmodel._name;\n                self._is_env = false;\n                if (exist(env[ρσ_bound_index(self._name, env)]) && (env[ρσ_bound_index(self._name, env)].constructor !== self.constructor && (typeof env[ρσ_bound_index(self._name, env)].constructor !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._name, env)].constructor, self.constructor)))) {\n                    ρσ_delitem(env, self._name);\n                }\n            }\n            if (!(ρσ_in(\"Model\", env))) {\n                env[\"Model\"] = Model;\n            }\n            if (!(ρσ_in(\"context\", env))) {\n                env[\"context\"] = {};\n            }\n            if (!exist(env[ρσ_bound_index(self._name, env)])) {\n                env[ρσ_bound_index(self._name, env)] = true;\n                env[self._name] = new self.constructor(_is_env=true);\n                env[ρσ_bound_index(self._name, env)]._is_env = true;\n            }\n            self.env = env;\n            if (self._is_env) {\n                return;\n            }\n            schema = (function(){\n                var ρσ_d = {};\n                ρσ_d[\"singular\"] = self._name;\n                ρσ_d[\"plural\"] = self._name;\n                return ρσ_d;\n            }).call(this);\n            schemas[ρσ_bound_index(self._name, schemas)] = schema;\n            reserved = ρσ_list_decorate([ \"id\", \"_id\", \"rev\", \"_rev\", \"ids\" ]);\n            if (self._is_singleton) {\n                self.id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID\", related: \"_id\", store: true})]);\n                self._id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID (Raw)\"})]);\n            }\n            self._fields.ids = ρσ_interpolate_kwargs.call(fields, fields.Data, [ρσ_desugar_kwargs({string: \"IDs\"})]);\n            self.rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\", related: \"_rev\", store: true})]);\n            self._rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\"})]);\n            valid_fields = (function() {\n                var ρσ_Iter = Object.getOwnPropertyNames(self.constructor.prototype), ρσ_Result = [], key;\n                ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                for (var ρσ_Index of ρσ_Iter) {\n                    key = ρσ_Index;\n                    if ((key[0] !== \"_\" && (typeof key[0] !== \"object\" || ρσ_not_equals(key[0], \"_\"))) && !(ρσ_in(key, ρσ_list_decorate([ \"constructor\", \"env\", \"values\" ])))) {\n                        ρσ_Result.push(key);\n                    }\n                }\n                ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                return ρσ_Result;\n            })().concat(reserved).concat(self._inherited_keys);\n            var ρσ_Iter5 = valid_fields;\n            ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === \"function\") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));\n            for (var ρσ_Index5 of ρσ_Iter5) {\n                key = ρσ_Index5;\n                if (!exist(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]) || ρσ_not_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) || ρσ_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) && !(ρσ_in(\"compute\", self[(typeof key === \"number\" && key < 0) ? self.length + key : key]))) {\n                    continue;\n                }\n                if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2many\", \"many2many\", \"one2one\" ]))) {\n                    if (!schema.relations) {\n                        schema.relations = {};\n                    }\n                    relation = \"belongsTo\";\n                    if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"one2many\", \"many2many\" ]))) {\n                        relation = \"hasMany\";\n                    }\n                    if ((self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"one2many\" && (typeof self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"object\" || ρσ_not_equals(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, \"one2many\")))) {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                    } else {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    ρσ_d[\"queryInverse\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].inverse;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                        self._one2many_fields.push(key);\n                    }\n                    if ((type === \"belongsTo\" || typeof type === \"object\" && ρσ_equals(type, \"belongsTo\"))) {\n                        db.createIndex((function(){\n                            var ρσ_d = {};\n                            ρσ_d[\"index\"] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"fields\"] = ρσ_list_decorate([ \"data.\" + key, \"_id\" ]);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this));\n                    }\n                }\n                (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                if (self._is_singleton) {\n                    if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                        if (!exist((ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)])) {\n                            (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = ρσ_list_decorate([]);\n                        }\n                        (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)].push(key);\n                    }\n                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].default;\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                    \"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\";\n                }\n            }\n            if (exist(self._fields)) {\n                (ρσ_expr_temp = self.env)[ρσ_bound_index(self._name, ρσ_expr_temp)]._fields = self._fields;\n            }\n            try {\n                db.setSchema((function() {\n                    var ρσ_Iter = schemas, ρσ_Result = [], key;\n                    ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                    for (var ρσ_Index of ρσ_Iter) {\n                        key = ρσ_Index;\n                        ρσ_Result.push(schemas[(typeof key === \"number\" && key < 0) ? schemas.length + key : key]);\n                    }\n                    ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                    return ρσ_Result;\n                })());\n            } catch (ρσ_Exception) {\n                ρσ_last_exception = ρσ_Exception;\n                {\n                } \n            }\n            if (exist(self._name)) {\n                if (!exist(raw_models[ρσ_bound_index(self._name, raw_models)])) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)] = ρσ_list_decorate([]);\n                }\n                if (!(ρσ_in(self.constructor, raw_models[ρσ_bound_index(self._name, raw_models)]))) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)].push(self.constructor);\n                }\n            }\n            if (ρσ_in(\"values\", Object.getOwnPropertyNames(self))) {\n                return;\n            }\n            Object.defineProperty(self, \"ids\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_singleton) {\n                        return ρσ_list_decorate([ self.id ]);\n                    } else {\n                        return (function() {\n                            var ρσ_Iter = self.values, ρσ_Result = [], object;\n                            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                            for (var ρσ_Index of ρσ_Iter) {\n                                object = ρσ_Index;\n                                ρσ_Result.push(object.id);\n                            }\n                            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                            return ρσ_Result;\n                        })();\n                    }\n                };\n                ρσ_d[\"set\"] = function () {\n                    return;\n                };\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"values\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    return self._values;\n                };\n                ρσ_d[\"set\"] = (function() {\n                    var ρσ_anonfunc = function (newvalue) {\n                        var key;\n                        if (!exist(newvalue)) {\n                            return;\n                        }\n                        if (self._is_singleton) {\n                            self._values = merge(self._values, newvalue);\n                            var ρσ_Iter6 = self._fields;\n                            ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === \"function\") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));\n                            for (var ρσ_Index6 of ρσ_Iter6) {\n                                key = ρσ_Index6;\n                                if (ρσ_in(key, newvalue)) {\n                                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = self.adapt(key, newvalue[(typeof key === \"number\" && key < 0) ? newvalue.length + key : key]);\n                                }\n                            }\n                        } else {\n                            self._values = newvalue;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"newvalue\"]}\n                    });\n                    return ρσ_anonfunc;\n                })();\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"length\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_env) {\n                        return 0;\n                    } else if (self._is_singleton) {\n                        if (!exist(self.id) || !exist(self.values)) {\n                            return 0;\n                        }\n                        return 1;\n                    } else {\n                        return self._values.length;\n                    }\n                };\n                return ρσ_d;\n            }).call(this));\n        };\n        if (!Model.prototype.__init__.__argnames__) Object.defineProperties(Model.prototype.__init__, {\n            __argnames__ : {value: [\"_is_env\", \"_is_singleton\"]}\n        });\n        Model.__argnames__ = Model.prototype.__init__.__argnames__;\n        Model.__handles_kwarg_interpolation__ = Model.prototype.__init__.__handles_kwarg_interpolation__;\n        Model.prototype.__iter__ = function __iter__() {\n            var self = this;\n            var lists, result, value;\n            if (self._is_env || self.length < 1) {\n                return ρσ_list_decorate([]);\n            } else if (self._is_singleton) {\n                return ρσ_list_decorate([ self ]);\n            }\n            lists = ρσ_list_decorate([]);\n            var ρσ_Iter7 = self.values;\n            ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === \"function\") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));\n            for (var ρσ_Index7 of ρσ_Iter7) {\n                value = ρσ_Index7;\n                result = self.browse();\n                result.values = value;\n                lists.push(result);\n            }\n            return lists;\n        };\n        if (!Model.prototype.__iter__.__argnames__) Object.defineProperties(Model.prototype.__iter__, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype[ρσ_iterator_symbol] = Model.prototype.__iter__;\n        Model.prototype.__view__ = function __view__(view, view_type) {\n            var self = this;\n            return view;\n        };\n        if (!Model.prototype.__view__.__argnames__) Object.defineProperties(Model.prototype.__view__, {\n            __argnames__ : {value: [\"view\", \"view_type\"]}\n        });\n        Model.prototype.browse = function browse() {\n            var self = this;\n            var ids = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.ids : arguments[0];\n            var is_singleton = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_singleton : arguments[1];\n            var is_client = (arguments[2] === undefined || ( 2 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_client : arguments[2];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"ids\")){\n                ids = ρσ_kwargs_obj.ids;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_singleton\")){\n                is_singleton = ρσ_kwargs_obj.is_singleton;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var result;\n            if (!exist(ids)) {\n                return new self.constructor(false, is_singleton);\n            } else if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/browse\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = ids;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        console.log(result);\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        if (exist(record)) {\n                            ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({ids: ids, is_client: false})]).then((function() {\n                                var ρσ_anonfunc = function (records) {\n                                    if (exist(records)) {\n                                        ρσ_interpolate_kwargs.call(records, records.write, [result.values].concat([ρσ_desugar_kwargs({is_client: false})]));\n                                    } else {\n                                        delete result.values.rev;\n                                        delete result.values._rev;\n                                        delete result.values._id;\n                                        db.rel.save(record._name, result.values);\n                                    }\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"records\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })()).catch((function() {\n                                var ρσ_anonfunc = function (error) {\n                                    console.log(error);\n                                    delete result.values.rev;\n                                    delete result.values._rev;\n                                    delete result.values._id;\n                                    db.rel.save(record._name, result.values);\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"error\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })());\n                        }\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.browse, [ids].concat([ρσ_desugar_kwargs({is_client: false})]));\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else if (ρσ_in(type(ids), ρσ_list_decorate([ ρσ_list_constructor, Array ]))) {\n                if (ids.length > 1) {\n                    var result = new self.constructor(false, false);\n                    return db.rel.find(result._name, ids).then((function() {\n                        var ρσ_anonfunc = function (record) {\n                            record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                            result.values = record[ρσ_bound_index(result._name, record)];\n                            return result;\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"record\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    ids = ids[0];\n                }\n            }\n            if (ρσ_equals(type(ids), String)) {\n                result = self.browse();\n                return db.rel.find(result._name, ids).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                        result.values = record[ρσ_bound_index(result._name, record)][0];\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.browse.__defaults__) Object.defineProperties(Model.prototype.browse, {\n            __defaults__ : {value: {ids:false, is_singleton:true, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"ids\", \"is_singleton\", \"is_client\"]}\n        });\n        Model.prototype.search = function search() {\n            var self = this;\n            var args, options, result;\n            args = Array.prototype.slice.call(arguments);\n            options = copy(self.env.context);\n            if ((options.is_client === undefined || typeof options.is_client === \"object\" && ρσ_equals(options.is_client, undefined))) {\n                options.is_client = configuration.client;\n            }\n            if (exist(self.env.context.active_limit)) {\n                options.limit = self.env.context.active_limit;\n            }\n            if (exist(self.env.context.active_index)) {\n                options.index = self.env.context.active_index;\n            }\n            if (exist(options.is_client)) {\n                delete options.is_client;\n                return ajax(\"post\", \"json\", configuration.url + \"/api/search\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"args\"] = args;\n                    ρσ_d[\"options\"] = options;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        self.browse(record.ids);\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.with_context, [ρσ_desugar_kwargs({is_client: false})]).search(args);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            function query(record) {\n                var results, arg;\n                results = ρσ_list_decorate([]);\n                var ρσ_Iter8 = args;\n                ρσ_Iter8 = ((typeof ρσ_Iter8[Symbol.iterator] === \"function\") ? (ρσ_Iter8 instanceof Map ? ρσ_Iter8.keys() : ρσ_Iter8) : Object.keys(ρσ_Iter8));\n                for (var ρσ_Index8 of ρσ_Iter8) {\n                    arg = ρσ_Index8;\n                    if (!arg || ρσ_in(str(arg), ρσ_list_decorate([ \"|\", \"[]\" ]))) {\n                        continue;\n                    }\n                    if ((arg[1] === \"=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"=\"))) {\n                        results.push((record[ρσ_bound_index(arg[0], record)] === arg[2] || typeof record[ρσ_bound_index(arg[0], record)] === \"object\" && ρσ_equals(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \">\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] > arg[2]);\n                    } else if ((arg[1] === \">=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] >= arg[2]);\n                    } else if ((arg[1] === \"<\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] < arg[2]);\n                    } else if ((arg[1] === \"<=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] <= arg[2]);\n                    } else if ((arg[1] === \"in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"in\"))) {\n                        results.push(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2]));\n                    } else if ((arg[1] === \"not in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"not in\"))) {\n                        results.push(!(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \"like\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"like\"))) {\n                        results.push(ρσ_in(arg[2], record[ρσ_bound_index(arg[0], record)]));\n                    } else if ((arg[1] === \"ilike\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"ilike\"))) {\n                        results.push(ρσ_in(str(arg[2]).toLowerCase(), str(record[ρσ_bound_index(arg[0], record)]).toLowerCase()));\n                    }\n                }\n                if (!exist(args) || !exist(args[0])) {\n                    return true;\n                } else if ((args[0] === \"|\" || typeof args[0] === \"object\" && ρσ_equals(args[0], \"|\"))) {\n                    return results.some((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    return results.every((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n            };\n            if (!query.__argnames__) Object.defineProperties(query, {\n                __argnames__ : {value: [\"record\"]}\n            });\n\n            result = self.browse();\n            if ((options.limit === 1 || typeof options.limit === \"object\" && ρσ_equals(options.limit, 1))) {\n                if (options.index > 0) {\n                    return new Promise((function() {\n                        var ρσ_anonfunc = function (resolve, reject) {\n                            resolve(result);\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"resolve\", \"reject\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var record;\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        record = records[ρσ_bound_index(result._name, records)].find(query);\n                        result.values = record;\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var values, start, result, record;\n                        var result = new self.constructor(false, false);\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        if (records[ρσ_bound_index(result._name, records)].length > 1) {\n                            values = records[ρσ_bound_index(result._name, records)].filter(query);\n                            if (exist(options.limit) && ρσ_equals(type(options.limit), Number)) {\n                                start = 0;\n                                if (exist(options.index) && ρσ_equals(type(options.index), Number)) {\n                                    start = options.index * options.limit;\n                                    options.limit = (options.index + 1) * options.limit;\n                                }\n                                result.values = values.slice(start, options.limit);\n                            } else {\n                                result.values = values;\n                            }\n                            return result;\n                        } else {\n                            result = self.browse();\n                            if (options.index > 0) {\n                                return result;\n                            }\n                            record = records[ρσ_bound_index(result._name, records)].find(query);\n                            result.values = record;\n                            return result;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.search.__argnames__) Object.defineProperties(Model.prototype.search, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.read = function read() {\n            var self = this;\n            if (self._is_env) {\n                return {};\n            }\n            return self._values;\n        };\n        if (!Model.prototype.read.__argnames__) Object.defineProperties(Model.prototype.read, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.adapt = function adapt(key, value) {\n            var self = this;\n            var field;\n            if (self._is_env) {\n                return;\n            }\n            if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"char\", \"text\" ]))) {\n                if (!exist(value)) {\n                    value = \"\";\n                } else {\n                    value = String(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"integer\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"integer\"))) {\n                value = parseInt(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"float\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"float\"))) {\n                value = parseFloat(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"boolean\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"boolean\"))) {\n                if (ρσ_in(value, ρσ_list_decorate([ \"true\", \"True\" ]))) {\n                    value = true;\n                } else if (ρσ_in(value, ρσ_list_decorate([ \"false\", \"False\", null, undefined ]))) {\n                    value = false;\n                } else if (ρσ_equals(type(value), String)) {\n                    return new Exception(\"Not a valid Boolean\");\n                } else {\n                    value = Boolean(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"binary\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"binary\"))) {\n                if (!checkBase64(value)) {\n                    return new Exception(\"Not a valid base64\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"selection\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"selection\"))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_in(!value, dict((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].selection))) {\n                    return new Exception(\"Incorrect value\");\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"date\", \"datetime\" ]))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_equals(type(value), Date)) {\n                    value = value.toISOString();\n                } else if (ρσ_equals(type(value), String)) {\n                    try {\n                        value = new Date(value).toISOString();\n                    } catch (ρσ_Exception) {\n                        ρσ_last_exception = ρσ_Exception;\n                        {\n                            return new Exception(\"Can't parse Date\");\n                        } \n                    }\n                } else {\n                    return new Exception(\"Can't parse Date\");\n                }\n                if (exist(value) && ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"date\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"date\"))) {\n                    value = value.split(\"T\")[0] + \"T00:00:00.000Z\";\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2one\" ]))) {\n                if (!exist(value)) {\n                    return null;\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.id;\n                } else if (ρσ_in(type(value), ρσ_list_decorate([ ρσ_list_constructor, Array ])) && value.length > 0) {\n                    value = value[0];\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2many\", \"one2many\" ]))) {\n                if (!exist(value)) {\n                    value = ρσ_list_decorate([]);\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.ids;\n                }\n            }\n            if ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].store) {\n                if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                    self[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, self)] = value;\n                    (ρσ_expr_temp = self._values)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = value;\n                }\n                if (exist((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key])) {\n                    var ρσ_Iter9 = (ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                    ρσ_Iter9 = ((typeof ρσ_Iter9[Symbol.iterator] === \"function\") ? (ρσ_Iter9 instanceof Map ? ρσ_Iter9.keys() : ρσ_Iter9) : Object.keys(ρσ_Iter9));\n                    for (var ρσ_Index9 of ρσ_Iter9) {\n                        field = ρσ_Index9;\n                        self[(typeof field === \"number\" && field < 0) ? self.length + field : field] = value;\n                        (ρσ_expr_temp = self._values)[(typeof field === \"number\" && field < 0) ? ρσ_expr_temp.length + field : field] = value;\n                    }\n                }\n            }\n            return value;\n        };\n        if (!Model.prototype.adapt.__argnames__) Object.defineProperties(Model.prototype.adapt, {\n            __argnames__ : {value: [\"key\", \"value\"]}\n        });\n        Model.prototype.update = function update() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? update.__defaults__.values : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            var key, value, object;\n            if (self._is_env) {\n                return;\n            }\n            if (!exist(values)) {\n                if (self._is_singleton) {\n                    values = (function() {\n                        var ρσ_Iter = self._fields, ρσ_Result = {}, key;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            key = ρσ_Index;\n                            ρσ_Result[key] = (self[(typeof key === \"number\" && key < 0) ? self.length + key : key]);\n                        }\n                        return ρσ_Result;\n                    })();\n                } else {\n                    values = {};\n                }\n            }\n            var ρσ_Iter10 = values;\n            ρσ_Iter10 = ((typeof ρσ_Iter10[Symbol.iterator] === \"function\") ? (ρσ_Iter10 instanceof Map ? ρσ_Iter10.keys() : ρσ_Iter10) : Object.keys(ρσ_Iter10));\n            for (var ρσ_Index10 of ρσ_Iter10) {\n                key = ρσ_Index10;\n                value = self.adapt(key, values[(typeof key === \"number\" && key < 0) ? values.length + key : key]);\n                if (self._is_singleton) {\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = value;\n                } else {\n                    var ρσ_Iter11 = self._values;\n                    ρσ_Iter11 = ((typeof ρσ_Iter11[Symbol.iterator] === \"function\") ? (ρσ_Iter11 instanceof Map ? ρσ_Iter11.keys() : ρσ_Iter11) : Object.keys(ρσ_Iter11));\n                    for (var ρσ_Index11 of ρσ_Iter11) {\n                        object = ρσ_Index11;\n                        object[(typeof key === \"number\" && key < 0) ? object.length + key : key] = value;\n                    }\n                }\n            }\n        };\n        if (!Model.prototype.update.__defaults__) Object.defineProperties(Model.prototype.update, {\n            __defaults__ : {value: {values:false}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\"]}\n        });\n        Model.prototype.queue = function queue(method) {\n            var self = this;\n            var records;\n            if (self._is_env || !exist(self)) {\n                return;\n            }\n            records = self.__iter__();\n            var index = 0;\n            function next() {\n                index += 1;\n                if (index < records.length && exist(records[(typeof index === \"number\" && index < 0) ? records.length + index : index])) {\n                    return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n                }\n                return self;\n            };\n\n            return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n        };\n        if (!Model.prototype.queue.__argnames__) Object.defineProperties(Model.prototype.queue, {\n            __argnames__ : {value: [\"method\"]}\n        });\n        Model.prototype.create = function create() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            self.update();\n            if (!exist(values)) {\n                values = self.read();\n            } else {\n                merge(self.read(), values);\n            }\n            if (self._is_env) {\n                self = self.browse();\n                self.update(values);\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/create\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There is some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            ρσ_delitem(values, \"id\");\n            ρσ_delitem(values, \"rev\");\n            ρσ_delitem(values, \"_id\");\n            ρσ_delitem(values, \"_rev\");\n            return db.rel.save(self._name, values).then((function() {\n                var ρσ_anonfunc = function (record) {\n                    self.values = record[ρσ_bound_index(self._name, record)][0];\n                    return self;\n                };\n                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                    __argnames__ : {value: [\"record\"]}\n                });\n                return ρσ_anonfunc;\n            })());\n        };\n        if (!Model.prototype.create.__defaults__) Object.defineProperties(Model.prototype.create, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.write = function write() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            self.update();\n            if (!exist(values)) {\n                if (!self._is_singleton) {\n                    return;\n                }\n                values = self.read();\n            } else {\n                self.update(values);\n                values = self.read();\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/write\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = self.__iter__(), ρσ_Result = [], record;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            record = ρσ_Index;\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There are some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                return db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        delete values._id;\n                        delete values._rev;\n                        delete values.rev;\n                        values.rev = record._rev;\n                        return db.rel.save(self._name, values).then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                self.values = values;\n                                return self;\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return self.queue((function() {\n                    var ρσ_anonfunc = function (record, next) {\n                        return record.write().then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                return next();\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\", \"next\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return self;\n        };\n        if (!Model.prototype.write.__defaults__) Object.defineProperties(Model.prototype.write, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.unlink = function unlink() {\n            var self = this;\n            var is_client = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? unlink.__defaults__.is_client : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var value;\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/unlink\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = self.__iter__(), ρσ_Result = [], record;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            record = ρσ_Index;\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        return true;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return false;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        db.remove(record);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                var ρσ_Iter12 = self._values;\n                ρσ_Iter12 = ((typeof ρσ_Iter12[Symbol.iterator] === \"function\") ? (ρσ_Iter12 instanceof Map ? ρσ_Iter12.keys() : ρσ_Iter12) : Object.keys(ρσ_Iter12));\n                for (var ρσ_Index12 of ρσ_Iter12) {\n                    value = ρσ_Index12;\n                    value[\"_deleted\"] = true;\n                }\n                db.bulkDocs(self._values);\n            }\n            return true;\n        };\n        if (!Model.prototype.unlink.__defaults__) Object.defineProperties(Model.prototype.unlink, {\n            __defaults__ : {value: {is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"is_client\"]}\n        });\n        Model.prototype.with_context = function with_context() {\n            var self = this;\n            var kwargs = arguments[arguments.length-1];\n            if (kwargs === null || typeof kwargs !== \"object\" || kwargs [ρσ_kwargs_symbol] !== true) kwargs = {};\n            var key;\n            var ρσ_Iter13 = kwargs;\n            ρσ_Iter13 = ((typeof ρσ_Iter13[Symbol.iterator] === \"function\") ? (ρσ_Iter13 instanceof Map ? ρσ_Iter13.keys() : ρσ_Iter13) : Object.keys(ρσ_Iter13));\n            for (var ρσ_Index13 of ρσ_Iter13) {\n                key = ρσ_Index13;\n                (ρσ_expr_temp = self.env.context)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = kwargs[(typeof key === \"number\" && key < 0) ? kwargs.length + key : key];\n            }\n            return self;\n        };\n        if (!Model.prototype.with_context.__handles_kwarg_interpolation__) Object.defineProperties(Model.prototype.with_context, {\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: []}\n        });\n        Model.prototype.__repr__ = function __repr__ () {\n                        return \"<\" + __name__ + \".\" + this.constructor.name + \" #\" + this.ρσ_object_id + \">\";\n        };\n        Model.prototype.__str__ = function __str__ () {\n            return this.__repr__();\n        };\n        Object.defineProperty(Model.prototype, \"__bases__\", {value: []});\n        Object.defineProperty(Model.prototype, \"__doc__\", {value: \"def __super__(self):\\ninherited = v'new self.inherited_constructor(self._is_env, self._is_singleton)'\\ninherited.values = self.values\\nreturn inherited\"});\n        Model.prototype._name = undefined;\n        Model.prototype._inherit = false;\n\n        ρσ_modules[\"orm.models\"].env = env;\n        ρσ_modules[\"orm.models\"].schemas = schemas;\n        ρσ_modules[\"orm.models\"].raw_models = raw_models;\n        ρσ_modules[\"orm.models\"].queryInverse = queryInverse;\n        ρσ_modules[\"orm.models\"].Model = Model;\n",
		"beautify:true keep_docstrings:false js_version:5": "        var env, schemas, raw_models;\n        var fields = ρσ_modules[\"orm.fields\"];\n\n        var exist = ρσ_modules[\"orm.tools\"].exist;\n        var keys = ρσ_modules[\"orm.tools\"].keys;\n        var merge = ρσ_modules[\"orm.tools\"].merge;\n        var copy = ρσ_modules[\"orm.tools\"].copy;\n        var dict = ρσ_modules[\"orm.tools\"].dict;\n        var checkBase64 = ρσ_modules[\"orm.tools\"].checkBase64;\n        var configuration = ρσ_modules[\"orm.tools\"].configuration;\n        var ajax = ρσ_modules[\"orm.tools\"].ajax;\n        var array = ρσ_modules[\"orm.tools\"].array;\n        var exception = ρσ_modules[\"orm.tools\"].exception;\n        var warning = ρσ_modules[\"orm.tools\"].warning;\n\n        var db = ρσ_modules[\"orm.pouchdb\"].db;\n\n        env = {};\n        schemas = {};\n        raw_models = {};\n        function queryInverse(field_type, records, fields, _fields) {\n            var result, field, record;\n            var ρσ_Iter0 = ρσ_Iterable(records[(typeof field_type === \"number\" && field_type < 0) ? records.length + field_type : field_type]);\n            for (var ρσ_Index0 = 0; ρσ_Index0 < ρσ_Iter0.length; ρσ_Index0++) {\n                record = ρσ_Iter0[ρσ_Index0];\n                var ρσ_Iter1 = ρσ_Iterable(fields);\n                for (var ρσ_Index1 = 0; ρσ_Index1 < ρσ_Iter1.length; ρσ_Index1++) {\n                    field = ρσ_Iter1[ρσ_Index1];\n                    record[(typeof field === \"number\" && field < 0) ? record.length + field : field] = ρσ_list_decorate([]);\n                    var ρσ_Iter2 = ρσ_Iterable(records[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].relation, records)]);\n                    for (var ρσ_Index2 = 0; ρσ_Index2 < ρσ_Iter2.length; ρσ_Index2++) {\n                        result = ρσ_Iter2[ρσ_Index2];\n                        if ((result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === record.id || typeof result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === \"object\" && ρσ_equals(result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)], record.id))) {\n                            record[(typeof field === \"number\" && field < 0) ? record.length + field : field].push(result.id);\n                        }\n                    }\n                }\n            }\n            return records;\n        };\n        if (!queryInverse.__argnames__) Object.defineProperties(queryInverse, {\n            __argnames__ : {value: [\"field_type\", \"records\", \"fields\", \"_fields\"]}\n        });\n\n        function Model() {\n            if (this.ρσ_object_id === undefined) Object.defineProperty(this, \"ρσ_object_id\", {\"value\":++ρσ_object_counter});\n            Model.prototype.__init__.apply(this, arguments);\n        }\n        Model.prototype.__init__ = function __init__(_is_env, _is_singleton) {\n            var self = this;\n            var newmodel, oldconstructor, models, key, raw_model, schema, reserved, valid_fields, relation;\n            self._fields = {};\n            self._values = {};\n            self._related = {};\n            self._one2many_fields = ρσ_list_decorate([]);\n            self._is_env = ((_is_env !== undefined && (typeof _is_env !== \"object\" || ρσ_not_equals(_is_env, undefined)))) ? _is_env : false;\n            self._is_singleton = ((_is_singleton !== undefined && (typeof _is_singleton !== \"object\" || ρσ_not_equals(_is_singleton, undefined)))) ? _is_singleton : false;\n            self._inherited_keys = ρσ_list_decorate([]);\n            if (exist(self._inherit) && exist(raw_models[ρσ_bound_index(self._inherit, raw_models)]) && (env[ρσ_bound_index(self._inherit, env)] !== true && (typeof env[ρσ_bound_index(self._inherit, env)] !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._inherit, env)], true)))) {\n                if (!exist(self._name)) {\n                    self._name = self._inherit;\n                }\n                newmodel = self;\n                oldconstructor = self.constructor;\n                models = raw_models[ρσ_bound_index(newmodel._inherit, raw_models)];\n                if (!(ρσ_in(oldconstructor, models))) {\n                    models.push(oldconstructor);\n                }\n                var ρσ_Iter3 = ρσ_Iterable(models);\n                for (var ρσ_Index3 = 0; ρσ_Index3 < ρσ_Iter3.length; ρσ_Index3++) {\n                    raw_model = ρσ_Iter3[ρσ_Index3];\n                    var ρσ_Iter4 = ρσ_Iterable(Object.getOwnPropertyNames(raw_model.prototype));\n                    for (var ρσ_Index4 = 0; ρσ_Index4 < ρσ_Iter4.length; ρσ_Index4++) {\n                        key = ρσ_Iter4[ρσ_Index4];\n                        if (ρσ_not_equals(key.slice(0, 2), \"__\") && !(ρσ_in(key, ρσ_list_decorate([ \"_inherit\", \"inherited_constructor\", \"values\" ])))) {\n                            self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = raw_model.prototype)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                            self._inherited_keys.push(key);\n                        }\n                    }\n                }\n                self._name = newmodel._name;\n                self._is_env = false;\n                if (exist(env[ρσ_bound_index(self._name, env)]) && (env[ρσ_bound_index(self._name, env)].constructor !== self.constructor && (typeof env[ρσ_bound_index(self._name, env)].constructor !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._name, env)].constructor, self.constructor)))) {\n                    ρσ_delitem(env, self._name);\n                }\n            }\n            if (!(ρσ_in(\"Model\", env))) {\n                env[\"Model\"] = Model;\n            }\n            if (!(ρσ_in(\"context\", env))) {\n                env[\"context\"] = {};\n            }\n            if (!exist(env[ρσ_bound_index(self._name, env)])) {\n                env[ρσ_bound_index(self._name, env)] = true;\n                env[self._name] = new self.constructor(_is_env=true);\n                env[ρσ_bound_index(self._name, env)]._is_env = true;\n            }\n            self.env = env;\n            if (self._is_env) {\n                return;\n            }\n            schema = (function(){\n                var ρσ_d = {};\n                ρσ_d[\"singular\"] = self._name;\n                ρσ_d[\"plural\"] = self._name;\n                return ρσ_d;\n            }).call(this);\n            schemas[ρσ_bound_index(self._name, schemas)] = schema;\n            reserved = ρσ_list_decorate([ \"id\", \"_id\", \"rev\", \"_rev\", \"ids\" ]);\n            if (self._is_singleton) {\n                self.id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID\", related: \"_id\", store: true})]);\n                self._id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID (Raw)\"})]);\n            }\n            self._fields.ids = ρσ_interpolate_kwargs.call(fields, fields.Data, [ρσ_desugar_kwargs({string: \"IDs\"})]);\n            self.rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\", related: \"_rev\", store: true})]);\n            self._rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\"})]);\n            valid_fields = (function() {\n                var ρσ_Iter = ρσ_Iterable(Object.getOwnPropertyNames(self.constructor.prototype)), ρσ_Result = [], key;\n                for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                    key = ρσ_Iter[ρσ_Index];\n                    if ((key[0] !== \"_\" && (typeof key[0] !== \"object\" || ρσ_not_equals(key[0], \"_\"))) && !(ρσ_in(key, ρσ_list_decorate([ \"constructor\", \"env\", \"values\" ])))) {\n                        ρσ_Result.push(key);\n                    }\n                }\n                ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                return ρσ_Result;\n            })().concat(reserved).concat(self._inherited_keys);\n            var ρσ_Iter5 = ρσ_Iterable(valid_fields);\n            for (var ρσ_Index5 = 0; ρσ_Index5 < ρσ_Iter5.length; ρσ_Index5++) {\n                key = ρσ_Iter5[ρσ_Index5];\n                if (!exist(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]) || ρσ_not_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) || ρσ_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) && !(ρσ_in(\"compute\", self[(typeof key === \"number\" && key < 0) ? self.length + key : key]))) {\n                    continue;\n                }\n                if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2many\", \"many2many\", \"one2one\" ]))) {\n                    if (!schema.relations) {\n                        schema.relations = {};\n                    }\n                    relation = \"belongsTo\";\n                    if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"one2many\", \"many2many\" ]))) {\n                        relation = \"hasMany\";\n                    }\n                    if ((self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"one2many\" && (typeof self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"object\" || ρσ_not_equals(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, \"one2many\")))) {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                    } else {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    ρσ_d[\"queryInverse\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].inverse;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                        self._one2many_fields.push(key);\n                    }\n                    if ((type === \"belongsTo\" || typeof type === \"object\" && ρσ_equals(type, \"belongsTo\"))) {\n                        db.createIndex((function(){\n                            var ρσ_d = {};\n                            ρσ_d[\"index\"] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"fields\"] = ρσ_list_decorate([ \"data.\" + key, \"_id\" ]);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this));\n                    }\n                }\n                (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                if (self._is_singleton) {\n                    if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                        if (!exist((ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)])) {\n                            (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = ρσ_list_decorate([]);\n                        }\n                        (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)].push(key);\n                    }\n                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].default;\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                    \"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\";\n                }\n            }\n            if (exist(self._fields)) {\n                (ρσ_expr_temp = self.env)[ρσ_bound_index(self._name, ρσ_expr_temp)]._fields = self._fields;\n            }\n            try {\n                db.setSchema((function() {\n                    var ρσ_Iter = ρσ_Iterable(schemas), ρσ_Result = [], key;\n                    for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                        key = ρσ_Iter[ρσ_Index];\n                        ρσ_Result.push(schemas[(typeof key === \"number\" && key < 0) ? schemas.length + key : key]);\n                    }\n                    ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                    return ρσ_Result;\n                })());\n            } catch (ρσ_Exception) {\n                ρσ_last_exception = ρσ_Exception;\n                {\n                } \n            }\n            if (exist(self._name)) {\n                if (!exist(raw_models[ρσ_bound_index(self._name, raw_models)])) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)] = ρσ_list_decorate([]);\n                }\n                if (!(ρσ_in(self.constructor, raw_models[ρσ_bound_index(self._name, raw_models)]))) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)].push(self.constructor);\n                }\n            }\n            if (ρσ_in(\"values\", Object.getOwnPropertyNames(self))) {\n                return;\n            }\n            Object.defineProperty(self, \"ids\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_singleton) {\n                        return ρσ_list_decorate([ self.id ]);\n                    } else {\n                        return (function() {\n                            var ρσ_Iter = ρσ_Iterable(self.values), ρσ_Result = [], object;\n                            for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                                object = ρσ_Iter[ρσ_Index];\n                                ρσ_Result.push(object.id);\n                            }\n                            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                            return ρσ_Result;\n                        })();\n                    }\n                };\n                ρσ_d[\"set\"] = function () {\n                    return;\n                };\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"values\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    return self._values;\n                };\n                ρσ_d[\"set\"] = (function() {\n                    var ρσ_anonfunc = function (newvalue) {\n                        var key;\n                        if (!exist(newvalue)) {\n                            return;\n                        }\n                        if (self._is_singleton) {\n                            self._values = merge(self._values, newvalue);\n                            var ρσ_Iter6 = ρσ_Iterable(self._fields);\n                            for (var ρσ_Index6 = 0; ρσ_Index6 < ρσ_Iter6.length; ρσ_Index6++) {\n                                key = ρσ_Iter6[ρσ_Index6];\n                                if (ρσ_in(key, newvalue)) {\n                                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = self.adapt(key, newvalue[(typeof key === \"number\" && key < 0) ? newvalue.length + key : key]);\n                                }\n                            }\n                        } else {\n                            self._values = newvalue;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"newvalue\"]}\n                    });\n                    return ρσ_anonfunc;\n                })();\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"length\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_env) {\n                        return 0;\n                    } else if (self._is_singleton) {\n                        if (!exist(self.id) || !exist(self.values)) {\n                            return 0;\n                        }\n                        return 1;\n                    } else {\n                        return self._values.length;\n                    }\n                };\n                return ρσ_d;\n            }).call(this));\n        };\n        if (!Model.prototype.__init__.__argnames__) Object.defineProperties(Model.prototype.__init__, {\n            __argnames__ : {value: [\"_is_env\", \"_is_singleton\"]}\n        });\n        Model.__argnames__ = Model.prototype.__init__.__argnames__;\n        Model.__handles_kwarg_interpolation__ = Model.prototype.__init__.__handles_kwarg_interpolation__;\n        Model.prototype.__iter__ = function __iter__() {\n            var self = this;\n            var lists, result, value;\n            if (self._is_env || self.length < 1) {\n                return ρσ_list_decorate([]);\n            } else if (self._is_singleton) {\n                return ρσ_list_decorate([ self ]);\n            }\n            lists = ρσ_list_decorate([]);\n            var ρσ_Iter7 = ρσ_Iterable(self.values);\n            for (var ρσ_Index7 = 0; ρσ_Index7 < ρσ_Iter7.length; ρσ_Index7++) {\n                value = ρσ_Iter7[ρσ_Index7];\n                result = self.browse();\n                result.values = value;\n                lists.push(result);\n            }\n            return lists;\n        };\n        if (!Model.prototype.__iter__.__argnames__) Object.defineProperties(Model.prototype.__iter__, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype[ρσ_iterator_symbol] = Model.prototype.__iter__;\n        Model.prototype.__view__ = function __view__(view, view_type) {\n            var self = this;\n            return view;\n        };\n        if (!Model.prototype.__view__.__argnames__) Object.defineProperties(Model.prototype.__view__, {\n            __argnames__ : {value: [\"view\", \"view_type\"]}\n        });\n        Model.prototype.browse = function browse() {\n            var self = this;\n            var ids = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.ids : arguments[0];\n            var is_singleton = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_singleton : arguments[1];\n            var is_client = (arguments[2] === undefined || ( 2 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_client : arguments[2];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"ids\")){\n                ids = ρσ_kwargs_obj.ids;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_singleton\")){\n                is_singleton = ρσ_kwargs_obj.is_singleton;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var result;\n            if (!exist(ids)) {\n                return new self.constructor(false, is_singleton);\n            } else if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/browse\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = ids;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        console.log(result);\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        if (exist(record)) {\n                            ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({ids: ids, is_client: false})]).then((function() {\n                                var ρσ_anonfunc = function (records) {\n                                    if (exist(records)) {\n                                        ρσ_interpolate_kwargs.call(records, records.write, [result.values].concat([ρσ_desugar_kwargs({is_client: false})]));\n                                    } else {\n                                        delete result.values.rev;\n                                        delete result.values._rev;\n                                        delete result.values._id;\n                                        db.rel.save(record._name, result.values);\n                                    }\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"records\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })()).catch((function() {\n                                var ρσ_anonfunc = function (error) {\n                                    console.log(error);\n                                    delete result.values.rev;\n                                    delete result.values._rev;\n                                    delete result.values._id;\n                                    db.rel.save(record._name, result.values);\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"error\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })());\n                        }\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.browse, [ids].concat([ρσ_desugar_kwargs({is_client: false})]));\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else if (ρσ_in(type(ids), ρσ_list_decorate([ ρσ_list_constructor, Array ]))) {\n                if (ids.length > 1) {\n                    var result = new self.constructor(false, false);\n                    return db.rel.find(result._name, ids).then((function() {\n                        var ρσ_anonfunc = function (record) {\n                            record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                            result.values = record[ρσ_bound_index(result._name, record)];\n                            return result;\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"record\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    ids = ids[0];\n                }\n            }\n            if (ρσ_equals(type(ids), String)) {\n                result = self.browse();\n                return db.rel.find(result._name, ids).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                        result.values = record[ρσ_bound_index(result._name, record)][0];\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.browse.__defaults__) Object.defineProperties(Model.prototype.browse, {\n            __defaults__ : {value: {ids:false, is_singleton:true, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"ids\", \"is_singleton\", \"is_client\"]}\n        });\n        Model.prototype.search = function search() {\n            var self = this;\n            var args, options, result;\n            args = Array.prototype.slice.call(arguments);\n            options = copy(self.env.context);\n            if ((options.is_client === undefined || typeof options.is_client === \"object\" && ρσ_equals(options.is_client, undefined))) {\n                options.is_client = configuration.client;\n            }\n            if (exist(self.env.context.active_limit)) {\n                options.limit = self.env.context.active_limit;\n            }\n            if (exist(self.env.context.active_index)) {\n                options.index = self.env.context.active_index;\n            }\n            if (exist(options.is_client)) {\n                delete options.is_client;\n                return ajax(\"post\", \"json\", configuration.url + \"/api/search\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"args\"] = args;\n                    ρσ_d[\"options\"] = options;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        self.browse(record.ids);\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.with_context, [ρσ_desugar_kwargs({is_client: false})]).search(args);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            function query(record) {\n                var results, arg;\n                results = ρσ_list_decorate([]);\n                var ρσ_Iter8 = ρσ_Iterable(args);\n                for (var ρσ_Index8 = 0; ρσ_Index8 < ρσ_Iter8.length; ρσ_Index8++) {\n                    arg = ρσ_Iter8[ρσ_Index8];\n                    if (!arg || ρσ_in(str(arg), ρσ_list_decorate([ \"|\", \"[]\" ]))) {\n                        continue;\n                    }\n                    if ((arg[1] === \"=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"=\"))) {\n                        results.push((record[ρσ_bound_index(arg[0], record)] === arg[2] || typeof record[ρσ_bound_index(arg[0], record)] === \"object\" && ρσ_equals(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \">\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] > arg[2]);\n                    } else if ((arg[1] === \">=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] >= arg[2]);\n                    } else if ((arg[1] === \"<\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] < arg[2]);\n                    } else if ((arg[1] === \"<=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] <= arg[2]);\n                    } else if ((arg[1] === \"in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"in\"))) {\n                        results.push(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2]));\n                    } else if ((arg[1] === \"not in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"not in\"))) {\n                        results.push(!(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \"like\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"like\"))) {\n                        results.push(ρσ_in(arg[2], record[ρσ_bound_index(arg[0], record)]));\n                    } else if ((arg[1] === \"ilike\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"ilike\"))) {\n                        results.push(ρσ_in(str(arg[2]).toLowerCase(), str(record[ρσ_bound_index(arg[0], record)]).toLowerCase()));\n                    }\n                }\n                if (!exist(args) || !exist(args[0])) {\n                    return true;\n                } else if ((args[0] === \"|\" || typeof args[0] === \"object\" && ρσ_equals(args[0], \"|\"))) {\n                    return results.some((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    return results.every((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n            };\n            if (!query.__argnames__) Object.defineProperties(query, {\n                __argnames__ : {value: [\"record\"]}\n            });\n\n            result = self.browse();\n            if ((options.limit === 1 || typeof options.limit === \"object\" && ρσ_equals(options.limit, 1))) {\n                if (options.index > 0) {\n                    return new Promise((function() {\n                        var ρσ_anonfunc = function (resolve, reject) {\n                            resolve(result);\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"resolve\", \"reject\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var record;\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        record = records[ρσ_bound_index(result._name, records)].find(query);\n                        result.values = record;\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var values, start, result, record;\n                        var result = new self.constructor(false, false);\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        if (records[ρσ_bound_index(result._name, records)].length > 1) {\n                            values = records[ρσ_bound_index(result._name, records)].filter(query);\n                            if (exist(options.limit) && ρσ_equals(type(options.limit), Number)) {\n                                start = 0;\n                                if (exist(options.index) && ρσ_equals(type(options.index), Number)) {\n                                    start = options.index * options.limit;\n                                    options.limit = (options.index + 1) * options.limit;\n                                }\n                                result.values = values.slice(start, options.limit);\n                            } else {\n                                result.values = values;\n                            }\n                            return result;\n                        } else {\n                            result = self.browse();\n                            if (options.index > 0) {\n                                return result;\n                            }\n                            record = records[ρσ_bound_index(result._name, records)].find(query);\n                            result.values = record;\n                            return result;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.search.__argnames__) Object.defineProperties(Model.prototype.search, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.read = function read() {\n            var self = this;\n            if (self._is_env) {\n                return {};\n            }\n            return self._values;\n        };\n        if (!Model.prototype.read.__argnames__) Object.defineProperties(Model.prototype.read, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.adapt = function adapt(key, value) {\n            var self = this;\n            var field;\n            if (self._is_env) {\n                return;\n            }\n            if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"char\", \"text\" ]))) {\n                if (!exist(value)) {\n                    value = \"\";\n                } else {\n                    value = String(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"integer\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"integer\"))) {\n                value = parseInt(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"float\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"float\"))) {\n                value = parseFloat(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"boolean\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"boolean\"))) {\n                if (ρσ_in(value, ρσ_list_decorate([ \"true\", \"True\" ]))) {\n                    value = true;\n                } else if (ρσ_in(value, ρσ_list_decorate([ \"false\", \"False\", null, undefined ]))) {\n                    value = false;\n                } else if (ρσ_equals(type(value), String)) {\n                    return new Exception(\"Not a valid Boolean\");\n                } else {\n                    value = Boolean(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"binary\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"binary\"))) {\n                if (!checkBase64(value)) {\n                    return new Exception(\"Not a valid base64\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"selection\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"selection\"))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_in(!value, dict((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].selection))) {\n                    return new Exception(\"Incorrect value\");\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"date\", \"datetime\" ]))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_equals(type(value), Date)) {\n                    value = value.toISOString();\n                } else if (ρσ_equals(type(value), String)) {\n                    try {\n                        value = new Date(value).toISOString();\n                    } catch (ρσ_Exception) {\n                        ρσ_last_exception = ρσ_Exception;\n                        {\n                            return new Exception(\"Can't parse Date\");\n                        } \n                    }\n                } else {\n                    return new Exception(\"Can't parse Date\");\n                }\n                if (exist(value) && ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"date\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"date\"))) {\n                    value = value.split(\"T\")[0] + \"T00:00:00.000Z\";\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2one\" ]))) {\n                if (!exist(value)) {\n                    return null;\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.id;\n                } else if (ρσ_in(type(value), ρσ_list_decorate([ ρσ_list_constructor, Array ])) && value.length > 0) {\n                    value = value[0];\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2many\", \"one2many\" ]))) {\n                if (!exist(value)) {\n                    value = ρσ_list_decorate([]);\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.ids;\n                }\n            }\n            if ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].store) {\n                if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                    self[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, self)] = value;\n                    (ρσ_expr_temp = self._values)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = value;\n                }\n                if (exist((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key])) {\n                    var ρσ_Iter9 = ρσ_Iterable((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key]);\n                    for (var ρσ_Index9 = 0; ρσ_Index9 < ρσ_Iter9.length; ρσ_Index9++) {\n                        field = ρσ_Iter9[ρσ_Index9];\n                        self[(typeof field === \"number\" && field < 0) ? self.length + field : field] = value;\n                        (ρσ_expr_temp = self._values)[(typeof field === \"number\" && field < 0) ? ρσ_expr_temp.length + field : field] = value;\n                    }\n                }\n            }\n            return value;\n        };\n        if (!Model.prototype.adapt.__argnames__) Object.defineProperties(Model.prototype.adapt, {\n            __argnames__ : {value: [\"key\", \"value\"]}\n        });\n        Model.prototype.update = function update() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? update.__defaults__.values : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            var key, value, object;\n            if (self._is_env) {\n                return;\n            }\n            if (!exist(values)) {\n                if (self._is_singleton) {\n                    values = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self._fields), ρσ_Result = {}, key;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            key = ρσ_Iter[ρσ_Index];\n                            ρσ_Result[key] = (self[(typeof key === \"number\" && key < 0) ? self.length + key : key]);\n                        }\n                        return ρσ_Result;\n                    })();\n                } else {\n                    values = {};\n                }\n            }\n            var ρσ_Iter10 = ρσ_Iterable(values);\n            for (var ρσ_Index10 = 0; ρσ_Index10 < ρσ_Iter10.length; ρσ_Index10++) {\n                key = ρσ_Iter10[ρσ_Index10];\n                value = self.adapt(key, values[(typeof key === \"number\" && key < 0) ? values.length + key : key]);\n                if (self._is_singleton) {\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = value;\n                } else {\n                    var ρσ_Iter11 = ρσ_Iterable(self._values);\n                    for (var ρσ_Index11 = 0; ρσ_Index11 < ρσ_Iter11.length; ρσ_Index11++) {\n                        object = ρσ_Iter11[ρσ_Index11];\n                        object[(typeof key === \"number\" && key < 0) ? object.length + key : key] = value;\n                    }\n                }\n            }\n        };\n        if (!Model.prototype.update.__defaults__) Object.defineProperties(Model.prototype.update, {\n            __defaults__ : {value: {values:false}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\"]}\n        });\n        Model.prototype.queue = function queue(method) {\n            var self = this;\n            var records;\n            if (self._is_env || !exist(self)) {\n                return;\n            }\n            records = self.__iter__();\n            var index = 0;\n            function next() {\n                index += 1;\n                if (index < records.length && exist(records[(typeof index === \"number\" && index < 0) ? records.length + index : index])) {\n                    return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n                }\n                return self;\n            };\n\n            return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n        };\n        if (!Model.prototype.queue.__argnames__) Object.defineProperties(Model.prototype.queue, {\n            __argnames__ : {value: [\"method\"]}\n        });\n        Model.prototype.create = function create() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            self.update();\n            if (!exist(values)) {\n                values = self.read();\n            } else {\n                merge(self.read(), values);\n            }\n            if (self._is_env) {\n                self = self.browse();\n                self.update(values);\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/create\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There is some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            ρσ_delitem(values, \"id\");\n            ρσ_delitem(values, \"rev\");\n            ρσ_delitem(values, \"_id\");\n            ρσ_delitem(values, \"_rev\");\n            return db.rel.save(self._name, values).then((function() {\n                var ρσ_anonfunc = function (record) {\n                    self.values = record[ρσ_bound_index(self._name, record)][0];\n                    return self;\n                };\n                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                    __argnames__ : {value: [\"record\"]}\n                });\n                return ρσ_anonfunc;\n            })());\n        };\n        if (!Model.prototype.create.__defaults__) Object.defineProperties(Model.prototype.create, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.write = function write() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            self.update();\n            if (!exist(values)) {\n                if (!self._is_singleton) {\n                    return;\n                }\n                values = self.read();\n            } else {\n                self.update(values);\n                values = self.read();\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/write\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self.__iter__()), ρσ_Result = [], record;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            record = ρσ_Iter[ρσ_Index];\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There are some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                return db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        delete values._id;\n                        delete values._rev;\n                        delete values.rev;\n                        values.rev = record._rev;\n                        return db.rel.save(self._name, values).then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                self.values = values;\n                                return self;\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return self.queue((function() {\n                    var ρσ_anonfunc = function (record, next) {\n                        return record.write().then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                return next();\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\", \"next\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return self;\n        };\n        if (!Model.prototype.write.__defaults__) Object.defineProperties(Model.prototype.write, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.unlink = function unlink() {\n            var self = this;\n            var is_client = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? unlink.__defaults__.is_client : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var value;\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/unlink\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = ρσ_Iterable(self.__iter__()), ρσ_Result = [], record;\n                        for (var ρσ_Index = 0; ρσ_Index < ρσ_Iter.length; ρσ_Index++) {\n                            record = ρσ_Iter[ρσ_Index];\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        return true;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return false;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        db.remove(record);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                var ρσ_Iter12 = ρσ_Iterable(self._values);\n                for (var ρσ_Index12 = 0; ρσ_Index12 < ρσ_Iter12.length; ρσ_Index12++) {\n                    value = ρσ_Iter12[ρσ_Index12];\n                    value[\"_deleted\"] = true;\n                }\n                db.bulkDocs(self._values);\n            }\n            return true;\n        };\n        if (!Model.prototype.unlink.__defaults__) Object.defineProperties(Model.prototype.unlink, {\n            __defaults__ : {value: {is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"is_client\"]}\n        });\n        Model.prototype.with_context = function with_context() {\n            var self = this;\n            var kwargs = arguments[arguments.length-1];\n            if (kwargs === null || typeof kwargs !== \"object\" || kwargs [ρσ_kwargs_symbol] !== true) kwargs = {};\n            var key;\n            var ρσ_Iter13 = ρσ_Iterable(kwargs);\n            for (var ρσ_Index13 = 0; ρσ_Index13 < ρσ_Iter13.length; ρσ_Index13++) {\n                key = ρσ_Iter13[ρσ_Index13];\n                (ρσ_expr_temp = self.env.context)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = kwargs[(typeof key === \"number\" && key < 0) ? kwargs.length + key : key];\n            }\n            return self;\n        };\n        if (!Model.prototype.with_context.__handles_kwarg_interpolation__) Object.defineProperties(Model.prototype.with_context, {\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: []}\n        });\n        Model.prototype.__repr__ = function __repr__ () {\n                        return \"<\" + __name__ + \".\" + this.constructor.name + \" #\" + this.ρσ_object_id + \">\";\n        };\n        Model.prototype.__str__ = function __str__ () {\n            return this.__repr__();\n        };\n        Object.defineProperty(Model.prototype, \"__bases__\", {value: []});\n        Model.prototype._name = undefined;\n        Model.prototype._inherit = false;\n\n        ρσ_modules[\"orm.models\"].env = env;\n        ρσ_modules[\"orm.models\"].schemas = schemas;\n        ρσ_modules[\"orm.models\"].raw_models = raw_models;\n        ρσ_modules[\"orm.models\"].queryInverse = queryInverse;\n        ρσ_modules[\"orm.models\"].Model = Model;\n",
		"beautify:true keep_docstrings:false js_version:6": "        var env, schemas, raw_models;\n        var fields = ρσ_modules[\"orm.fields\"];\n\n        var exist = ρσ_modules[\"orm.tools\"].exist;\n        var keys = ρσ_modules[\"orm.tools\"].keys;\n        var merge = ρσ_modules[\"orm.tools\"].merge;\n        var copy = ρσ_modules[\"orm.tools\"].copy;\n        var dict = ρσ_modules[\"orm.tools\"].dict;\n        var checkBase64 = ρσ_modules[\"orm.tools\"].checkBase64;\n        var configuration = ρσ_modules[\"orm.tools\"].configuration;\n        var ajax = ρσ_modules[\"orm.tools\"].ajax;\n        var array = ρσ_modules[\"orm.tools\"].array;\n        var exception = ρσ_modules[\"orm.tools\"].exception;\n        var warning = ρσ_modules[\"orm.tools\"].warning;\n\n        var db = ρσ_modules[\"orm.pouchdb\"].db;\n\n        env = {};\n        schemas = {};\n        raw_models = {};\n        function queryInverse(field_type, records, fields, _fields) {\n            var result, field, record;\n            var ρσ_Iter0 = records[(typeof field_type === \"number\" && field_type < 0) ? records.length + field_type : field_type];\n            ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === \"function\") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));\n            for (var ρσ_Index0 of ρσ_Iter0) {\n                record = ρσ_Index0;\n                var ρσ_Iter1 = fields;\n                ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === \"function\") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));\n                for (var ρσ_Index1 of ρσ_Iter1) {\n                    field = ρσ_Index1;\n                    record[(typeof field === \"number\" && field < 0) ? record.length + field : field] = ρσ_list_decorate([]);\n                    var ρσ_Iter2 = records[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].relation, records)];\n                    ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === \"function\") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));\n                    for (var ρσ_Index2 of ρσ_Iter2) {\n                        result = ρσ_Index2;\n                        if ((result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === record.id || typeof result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)] === \"object\" && ρσ_equals(result[ρσ_bound_index(_fields[(typeof field === \"number\" && field < 0) ? _fields.length + field : field].inverse, result)], record.id))) {\n                            record[(typeof field === \"number\" && field < 0) ? record.length + field : field].push(result.id);\n                        }\n                    }\n                }\n            }\n            return records;\n        };\n        if (!queryInverse.__argnames__) Object.defineProperties(queryInverse, {\n            __argnames__ : {value: [\"field_type\", \"records\", \"fields\", \"_fields\"]}\n        });\n\n        function Model() {\n            if (this.ρσ_object_id === undefined) Object.defineProperty(this, \"ρσ_object_id\", {\"value\":++ρσ_object_counter});\n            Model.prototype.__init__.apply(this, arguments);\n        }\n        Model.prototype.__init__ = function __init__(_is_env, _is_singleton) {\n            var self = this;\n            var newmodel, oldconstructor, models, key, raw_model, schema, reserved, valid_fields, relation;\n            self._fields = {};\n            self._values = {};\n            self._related = {};\n            self._one2many_fields = ρσ_list_decorate([]);\n            self._is_env = ((_is_env !== undefined && (typeof _is_env !== \"object\" || ρσ_not_equals(_is_env, undefined)))) ? _is_env : false;\n            self._is_singleton = ((_is_singleton !== undefined && (typeof _is_singleton !== \"object\" || ρσ_not_equals(_is_singleton, undefined)))) ? _is_singleton : false;\n            self._inherited_keys = ρσ_list_decorate([]);\n            if (exist(self._inherit) && exist(raw_models[ρσ_bound_index(self._inherit, raw_models)]) && (env[ρσ_bound_index(self._inherit, env)] !== true && (typeof env[ρσ_bound_index(self._inherit, env)] !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._inherit, env)], true)))) {\n                if (!exist(self._name)) {\n                    self._name = self._inherit;\n                }\n                newmodel = self;\n                oldconstructor = self.constructor;\n                models = raw_models[ρσ_bound_index(newmodel._inherit, raw_models)];\n                if (!(ρσ_in(oldconstructor, models))) {\n                    models.push(oldconstructor);\n                }\n                var ρσ_Iter3 = models;\n                ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === \"function\") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));\n                for (var ρσ_Index3 of ρσ_Iter3) {\n                    raw_model = ρσ_Index3;\n                    var ρσ_Iter4 = Object.getOwnPropertyNames(raw_model.prototype);\n                    ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === \"function\") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));\n                    for (var ρσ_Index4 of ρσ_Iter4) {\n                        key = ρσ_Index4;\n                        if (ρσ_not_equals(key.slice(0, 2), \"__\") && !(ρσ_in(key, ρσ_list_decorate([ \"_inherit\", \"inherited_constructor\", \"values\" ])))) {\n                            self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = raw_model.prototype)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                            self._inherited_keys.push(key);\n                        }\n                    }\n                }\n                self._name = newmodel._name;\n                self._is_env = false;\n                if (exist(env[ρσ_bound_index(self._name, env)]) && (env[ρσ_bound_index(self._name, env)].constructor !== self.constructor && (typeof env[ρσ_bound_index(self._name, env)].constructor !== \"object\" || ρσ_not_equals(env[ρσ_bound_index(self._name, env)].constructor, self.constructor)))) {\n                    ρσ_delitem(env, self._name);\n                }\n            }\n            if (!(ρσ_in(\"Model\", env))) {\n                env[\"Model\"] = Model;\n            }\n            if (!(ρσ_in(\"context\", env))) {\n                env[\"context\"] = {};\n            }\n            if (!exist(env[ρσ_bound_index(self._name, env)])) {\n                env[ρσ_bound_index(self._name, env)] = true;\n                env[self._name] = new self.constructor(_is_env=true);\n                env[ρσ_bound_index(self._name, env)]._is_env = true;\n            }\n            self.env = env;\n            if (self._is_env) {\n                return;\n            }\n            schema = (function(){\n                var ρσ_d = {};\n                ρσ_d[\"singular\"] = self._name;\n                ρσ_d[\"plural\"] = self._name;\n                return ρσ_d;\n            }).call(this);\n            schemas[ρσ_bound_index(self._name, schemas)] = schema;\n            reserved = ρσ_list_decorate([ \"id\", \"_id\", \"rev\", \"_rev\", \"ids\" ]);\n            if (self._is_singleton) {\n                self.id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID\", related: \"_id\", store: true})]);\n                self._id = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"ID (Raw)\"})]);\n            }\n            self._fields.ids = ρσ_interpolate_kwargs.call(fields, fields.Data, [ρσ_desugar_kwargs({string: \"IDs\"})]);\n            self.rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\", related: \"_rev\", store: true})]);\n            self._rev = ρσ_interpolate_kwargs.call(fields, fields.Char, [ρσ_desugar_kwargs({string: \"DB Revision Number\"})]);\n            valid_fields = (function() {\n                var ρσ_Iter = Object.getOwnPropertyNames(self.constructor.prototype), ρσ_Result = [], key;\n                ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                for (var ρσ_Index of ρσ_Iter) {\n                    key = ρσ_Index;\n                    if ((key[0] !== \"_\" && (typeof key[0] !== \"object\" || ρσ_not_equals(key[0], \"_\"))) && !(ρσ_in(key, ρσ_list_decorate([ \"constructor\", \"env\", \"values\" ])))) {\n                        ρσ_Result.push(key);\n                    }\n                }\n                ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                return ρσ_Result;\n            })().concat(reserved).concat(self._inherited_keys);\n            var ρσ_Iter5 = valid_fields;\n            ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === \"function\") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));\n            for (var ρσ_Index5 of ρσ_Iter5) {\n                key = ρσ_Index5;\n                if (!exist(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]) || ρσ_not_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) || ρσ_equals(type(self[(typeof key === \"number\" && key < 0) ? self.length + key : key]), Object) && !(ρσ_in(\"compute\", self[(typeof key === \"number\" && key < 0) ? self.length + key : key]))) {\n                    continue;\n                }\n                if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2many\", \"many2many\", \"one2one\" ]))) {\n                    if (!schema.relations) {\n                        schema.relations = {};\n                    }\n                    relation = \"belongsTo\";\n                    if (ρσ_in(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, ρσ_list_decorate([ \"one2many\", \"many2many\" ]))) {\n                        relation = \"hasMany\";\n                    }\n                    if ((self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"one2many\" && (typeof self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type !== \"object\" || ρσ_not_equals(self[(typeof key === \"number\" && key < 0) ? self.length + key : key].type, \"one2many\")))) {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                    } else {\n                        (ρσ_expr_temp = schema.relations)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = (function(){\n                            var ρσ_d = {};\n                            ρσ_d[relation] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"type\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].relation;\n                                ρσ_d[\"options\"] = (function(){\n                                    var ρσ_d = {};\n                                    ρσ_d[\"async\"] = false;\n                                    ρσ_d[\"queryInverse\"] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key].inverse;\n                                    return ρσ_d;\n                                }).call(this);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this);\n                        self._one2many_fields.push(key);\n                    }\n                    if ((type === \"belongsTo\" || typeof type === \"object\" && ρσ_equals(type, \"belongsTo\"))) {\n                        db.createIndex((function(){\n                            var ρσ_d = {};\n                            ρσ_d[\"index\"] = (function(){\n                                var ρσ_d = {};\n                                ρσ_d[\"fields\"] = ρσ_list_decorate([ \"data.\" + key, \"_id\" ]);\n                                return ρσ_d;\n                            }).call(this);\n                            return ρσ_d;\n                        }).call(this));\n                    }\n                }\n                (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                if (self._is_singleton) {\n                    if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                        if (!exist((ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)])) {\n                            (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = ρσ_list_decorate([]);\n                        }\n                        (ρσ_expr_temp = self._related)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)].push(key);\n                    }\n                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].default;\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = self[(typeof key === \"number\" && key < 0) ? self.length + key : key];\n                    \"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\";\n                }\n            }\n            if (exist(self._fields)) {\n                (ρσ_expr_temp = self.env)[ρσ_bound_index(self._name, ρσ_expr_temp)]._fields = self._fields;\n            }\n            try {\n                db.setSchema((function() {\n                    var ρσ_Iter = schemas, ρσ_Result = [], key;\n                    ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                    for (var ρσ_Index of ρσ_Iter) {\n                        key = ρσ_Index;\n                        ρσ_Result.push(schemas[(typeof key === \"number\" && key < 0) ? schemas.length + key : key]);\n                    }\n                    ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                    return ρσ_Result;\n                })());\n            } catch (ρσ_Exception) {\n                ρσ_last_exception = ρσ_Exception;\n                {\n                } \n            }\n            if (exist(self._name)) {\n                if (!exist(raw_models[ρσ_bound_index(self._name, raw_models)])) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)] = ρσ_list_decorate([]);\n                }\n                if (!(ρσ_in(self.constructor, raw_models[ρσ_bound_index(self._name, raw_models)]))) {\n                    raw_models[ρσ_bound_index(self._name, raw_models)].push(self.constructor);\n                }\n            }\n            if (ρσ_in(\"values\", Object.getOwnPropertyNames(self))) {\n                return;\n            }\n            Object.defineProperty(self, \"ids\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_singleton) {\n                        return ρσ_list_decorate([ self.id ]);\n                    } else {\n                        return (function() {\n                            var ρσ_Iter = self.values, ρσ_Result = [], object;\n                            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                            for (var ρσ_Index of ρσ_Iter) {\n                                object = ρσ_Index;\n                                ρσ_Result.push(object.id);\n                            }\n                            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                            return ρσ_Result;\n                        })();\n                    }\n                };\n                ρσ_d[\"set\"] = function () {\n                    return;\n                };\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"values\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    return self._values;\n                };\n                ρσ_d[\"set\"] = (function() {\n                    var ρσ_anonfunc = function (newvalue) {\n                        var key;\n                        if (!exist(newvalue)) {\n                            return;\n                        }\n                        if (self._is_singleton) {\n                            self._values = merge(self._values, newvalue);\n                            var ρσ_Iter6 = self._fields;\n                            ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === \"function\") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));\n                            for (var ρσ_Index6 of ρσ_Iter6) {\n                                key = ρσ_Index6;\n                                if (ρσ_in(key, newvalue)) {\n                                    self[(typeof key === \"number\" && key < 0) ? self.length + key : key] = self.adapt(key, newvalue[(typeof key === \"number\" && key < 0) ? newvalue.length + key : key]);\n                                }\n                            }\n                        } else {\n                            self._values = newvalue;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"newvalue\"]}\n                    });\n                    return ρσ_anonfunc;\n                })();\n                return ρσ_d;\n            }).call(this));\n            Object.defineProperty(self, \"length\", (function(){\n                var ρσ_d = {};\n                ρσ_d[\"get\"] = function () {\n                    if (self._is_env) {\n                        return 0;\n                    } else if (self._is_singleton) {\n                        if (!exist(self.id) || !exist(self.values)) {\n                            return 0;\n                        }\n                        return 1;\n                    } else {\n                        return self._values.length;\n                    }\n                };\n                return ρσ_d;\n            }).call(this));\n        };\n        if (!Model.prototype.__init__.__argnames__) Object.defineProperties(Model.prototype.__init__, {\n            __argnames__ : {value: [\"_is_env\", \"_is_singleton\"]}\n        });\n        Model.__argnames__ = Model.prototype.__init__.__argnames__;\n        Model.__handles_kwarg_interpolation__ = Model.prototype.__init__.__handles_kwarg_interpolation__;\n        Model.prototype.__iter__ = function __iter__() {\n            var self = this;\n            var lists, result, value;\n            if (self._is_env || self.length < 1) {\n                return ρσ_list_decorate([]);\n            } else if (self._is_singleton) {\n                return ρσ_list_decorate([ self ]);\n            }\n            lists = ρσ_list_decorate([]);\n            var ρσ_Iter7 = self.values;\n            ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === \"function\") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));\n            for (var ρσ_Index7 of ρσ_Iter7) {\n                value = ρσ_Index7;\n                result = self.browse();\n                result.values = value;\n                lists.push(result);\n            }\n            return lists;\n        };\n        if (!Model.prototype.__iter__.__argnames__) Object.defineProperties(Model.prototype.__iter__, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype[ρσ_iterator_symbol] = Model.prototype.__iter__;\n        Model.prototype.__view__ = function __view__(view, view_type) {\n            var self = this;\n            return view;\n        };\n        if (!Model.prototype.__view__.__argnames__) Object.defineProperties(Model.prototype.__view__, {\n            __argnames__ : {value: [\"view\", \"view_type\"]}\n        });\n        Model.prototype.browse = function browse() {\n            var self = this;\n            var ids = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.ids : arguments[0];\n            var is_singleton = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_singleton : arguments[1];\n            var is_client = (arguments[2] === undefined || ( 2 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? browse.__defaults__.is_client : arguments[2];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"ids\")){\n                ids = ρσ_kwargs_obj.ids;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_singleton\")){\n                is_singleton = ρσ_kwargs_obj.is_singleton;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var result;\n            if (!exist(ids)) {\n                return new self.constructor(false, is_singleton);\n            } else if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/browse\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = ids;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        console.log(result);\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        if (exist(record)) {\n                            ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({ids: ids, is_client: false})]).then((function() {\n                                var ρσ_anonfunc = function (records) {\n                                    if (exist(records)) {\n                                        ρσ_interpolate_kwargs.call(records, records.write, [result.values].concat([ρσ_desugar_kwargs({is_client: false})]));\n                                    } else {\n                                        delete result.values.rev;\n                                        delete result.values._rev;\n                                        delete result.values._id;\n                                        db.rel.save(record._name, result.values);\n                                    }\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"records\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })()).catch((function() {\n                                var ρσ_anonfunc = function (error) {\n                                    console.log(error);\n                                    delete result.values.rev;\n                                    delete result.values._rev;\n                                    delete result.values._id;\n                                    db.rel.save(record._name, result.values);\n                                };\n                                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                    __argnames__ : {value: [\"error\"]}\n                                });\n                                return ρσ_anonfunc;\n                            })());\n                        }\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.browse, [ids].concat([ρσ_desugar_kwargs({is_client: false})]));\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else if (ρσ_in(type(ids), ρσ_list_decorate([ ρσ_list_constructor, Array ]))) {\n                if (ids.length > 1) {\n                    var result = new self.constructor(false, false);\n                    return db.rel.find(result._name, ids).then((function() {\n                        var ρσ_anonfunc = function (record) {\n                            record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                            result.values = record[ρσ_bound_index(result._name, record)];\n                            return result;\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"record\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    ids = ids[0];\n                }\n            }\n            if (ρσ_equals(type(ids), String)) {\n                result = self.browse();\n                return db.rel.find(result._name, ids).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        record = queryInverse(result._name, record, result._one2many_fields, result._fields);\n                        result.values = record[ρσ_bound_index(result._name, record)][0];\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.browse.__defaults__) Object.defineProperties(Model.prototype.browse, {\n            __defaults__ : {value: {ids:false, is_singleton:true, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"ids\", \"is_singleton\", \"is_client\"]}\n        });\n        Model.prototype.search = function search() {\n            var self = this;\n            var args, options, result;\n            args = Array.prototype.slice.call(arguments);\n            options = copy(self.env.context);\n            if ((options.is_client === undefined || typeof options.is_client === \"object\" && ρσ_equals(options.is_client, undefined))) {\n                options.is_client = configuration.client;\n            }\n            if (exist(self.env.context.active_limit)) {\n                options.limit = self.env.context.active_limit;\n            }\n            if (exist(self.env.context.active_index)) {\n                options.index = self.env.context.active_index;\n            }\n            if (exist(options.is_client)) {\n                delete options.is_client;\n                return ajax(\"post\", \"json\", configuration.url + \"/api/search\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"args\"] = args;\n                    ρσ_d[\"options\"] = options;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        var record;\n                        record = ρσ_interpolate_kwargs.call(self, self.browse, [ρσ_desugar_kwargs({is_singleton: !(ρσ_in(type(result.values), array))})]);\n                        record.values = result.values;\n                        self.browse(record.ids);\n                        return record;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return ρσ_interpolate_kwargs.call(self, self.with_context, [ρσ_desugar_kwargs({is_client: false})]).search(args);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            function query(record) {\n                var results, arg;\n                results = ρσ_list_decorate([]);\n                var ρσ_Iter8 = args;\n                ρσ_Iter8 = ((typeof ρσ_Iter8[Symbol.iterator] === \"function\") ? (ρσ_Iter8 instanceof Map ? ρσ_Iter8.keys() : ρσ_Iter8) : Object.keys(ρσ_Iter8));\n                for (var ρσ_Index8 of ρσ_Iter8) {\n                    arg = ρσ_Index8;\n                    if (!arg || ρσ_in(str(arg), ρσ_list_decorate([ \"|\", \"[]\" ]))) {\n                        continue;\n                    }\n                    if ((arg[1] === \"=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"=\"))) {\n                        results.push((record[ρσ_bound_index(arg[0], record)] === arg[2] || typeof record[ρσ_bound_index(arg[0], record)] === \"object\" && ρσ_equals(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \">\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] > arg[2]);\n                    } else if ((arg[1] === \">=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \">=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] >= arg[2]);\n                    } else if ((arg[1] === \"<\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] < arg[2]);\n                    } else if ((arg[1] === \"<=\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"<=\"))) {\n                        results.push(record[ρσ_bound_index(arg[0], record)] <= arg[2]);\n                    } else if ((arg[1] === \"in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"in\"))) {\n                        results.push(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2]));\n                    } else if ((arg[1] === \"not in\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"not in\"))) {\n                        results.push(!(ρσ_in(record[ρσ_bound_index(arg[0], record)], arg[2])));\n                    } else if ((arg[1] === \"like\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"like\"))) {\n                        results.push(ρσ_in(arg[2], record[ρσ_bound_index(arg[0], record)]));\n                    } else if ((arg[1] === \"ilike\" || typeof arg[1] === \"object\" && ρσ_equals(arg[1], \"ilike\"))) {\n                        results.push(ρσ_in(str(arg[2]).toLowerCase(), str(record[ρσ_bound_index(arg[0], record)]).toLowerCase()));\n                    }\n                }\n                if (!exist(args) || !exist(args[0])) {\n                    return true;\n                } else if ((args[0] === \"|\" || typeof args[0] === \"object\" && ρσ_equals(args[0], \"|\"))) {\n                    return results.some((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                } else {\n                    return results.every((function() {\n                        var ρσ_anonfunc = function (result) {\n                            return (result === true || typeof result === \"object\" && ρσ_equals(result, true));\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"result\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n            };\n            if (!query.__argnames__) Object.defineProperties(query, {\n                __argnames__ : {value: [\"record\"]}\n            });\n\n            result = self.browse();\n            if ((options.limit === 1 || typeof options.limit === \"object\" && ρσ_equals(options.limit, 1))) {\n                if (options.index > 0) {\n                    return new Promise((function() {\n                        var ρσ_anonfunc = function (resolve, reject) {\n                            resolve(result);\n                        };\n                        if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                            __argnames__ : {value: [\"resolve\", \"reject\"]}\n                        });\n                        return ρσ_anonfunc;\n                    })());\n                }\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var record;\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        record = records[ρσ_bound_index(result._name, records)].find(query);\n                        result.values = record;\n                        return result;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return db.rel.find(result._name).then((function() {\n                    var ρσ_anonfunc = function (records) {\n                        var values, start, result, record;\n                        var result = new self.constructor(false, false);\n                        records = queryInverse(result._name, records, result._one2many_fields, result._fields);\n                        if (records[ρσ_bound_index(result._name, records)].length > 1) {\n                            values = records[ρσ_bound_index(result._name, records)].filter(query);\n                            if (exist(options.limit) && ρσ_equals(type(options.limit), Number)) {\n                                start = 0;\n                                if (exist(options.index) && ρσ_equals(type(options.index), Number)) {\n                                    start = options.index * options.limit;\n                                    options.limit = (options.index + 1) * options.limit;\n                                }\n                                result.values = values.slice(start, options.limit);\n                            } else {\n                                result.values = values;\n                            }\n                            return result;\n                        } else {\n                            result = self.browse();\n                            if (options.index > 0) {\n                                return result;\n                            }\n                            record = records[ρσ_bound_index(result._name, records)].find(query);\n                            result.values = record;\n                            return result;\n                        }\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"records\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return result;\n        };\n        if (!Model.prototype.search.__argnames__) Object.defineProperties(Model.prototype.search, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.read = function read() {\n            var self = this;\n            if (self._is_env) {\n                return {};\n            }\n            return self._values;\n        };\n        if (!Model.prototype.read.__argnames__) Object.defineProperties(Model.prototype.read, {\n            __argnames__ : {value: []}\n        });\n        Model.prototype.adapt = function adapt(key, value) {\n            var self = this;\n            var field;\n            if (self._is_env) {\n                return;\n            }\n            if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"char\", \"text\" ]))) {\n                if (!exist(value)) {\n                    value = \"\";\n                } else {\n                    value = String(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"integer\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"integer\"))) {\n                value = parseInt(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"float\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"float\"))) {\n                value = parseFloat(value);\n                if (isNaN(value)) {\n                    return new Exception(\"Not a valid Number\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"boolean\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"boolean\"))) {\n                if (ρσ_in(value, ρσ_list_decorate([ \"true\", \"True\" ]))) {\n                    value = true;\n                } else if (ρσ_in(value, ρσ_list_decorate([ \"false\", \"False\", null, undefined ]))) {\n                    value = false;\n                } else if (ρσ_equals(type(value), String)) {\n                    return new Exception(\"Not a valid Boolean\");\n                } else {\n                    value = Boolean(value);\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"binary\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"binary\"))) {\n                if (!checkBase64(value)) {\n                    return new Exception(\"Not a valid base64\");\n                }\n            } else if (((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"selection\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"selection\"))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_in(!value, dict((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].selection))) {\n                    return new Exception(\"Incorrect value\");\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"date\", \"datetime\" ]))) {\n                if (!exist(value)) {\n                    value = null;\n                } else if (ρσ_equals(type(value), Date)) {\n                    value = value.toISOString();\n                } else if (ρσ_equals(type(value), String)) {\n                    try {\n                        value = new Date(value).toISOString();\n                    } catch (ρσ_Exception) {\n                        ρσ_last_exception = ρσ_Exception;\n                        {\n                            return new Exception(\"Can't parse Date\");\n                        } \n                    }\n                } else {\n                    return new Exception(\"Can't parse Date\");\n                }\n                if (exist(value) && ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"date\" || typeof (ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type === \"object\" && ρσ_equals((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, \"date\"))) {\n                    value = value.split(\"T\")[0] + \"T00:00:00.000Z\";\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2one\", \"one2one\" ]))) {\n                if (!exist(value)) {\n                    return null;\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.id;\n                } else if (ρσ_in(type(value), ρσ_list_decorate([ ρσ_list_constructor, Array ])) && value.length > 0) {\n                    value = value[0];\n                }\n            } else if (ρσ_in((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].type, ρσ_list_decorate([ \"many2many\", \"one2many\" ]))) {\n                if (!exist(value)) {\n                    value = ρσ_list_decorate([]);\n                } else if ((value instanceof env.Model === true || typeof value instanceof env.Model === \"object\" && ρσ_equals(value instanceof env.Model, true))) {\n                    value = value.ids;\n                }\n            }\n            if ((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].store) {\n                if (exist((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related)) {\n                    self[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, self)] = value;\n                    (ρσ_expr_temp = self._values)[ρσ_bound_index((ρσ_expr_temp = self._fields)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key].related, ρσ_expr_temp)] = value;\n                }\n                if (exist((ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key])) {\n                    var ρσ_Iter9 = (ρσ_expr_temp = self._related)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key];\n                    ρσ_Iter9 = ((typeof ρσ_Iter9[Symbol.iterator] === \"function\") ? (ρσ_Iter9 instanceof Map ? ρσ_Iter9.keys() : ρσ_Iter9) : Object.keys(ρσ_Iter9));\n                    for (var ρσ_Index9 of ρσ_Iter9) {\n                        field = ρσ_Index9;\n                        self[(typeof field === \"number\" && field < 0) ? self.length + field : field] = value;\n                        (ρσ_expr_temp = self._values)[(typeof field === \"number\" && field < 0) ? ρσ_expr_temp.length + field : field] = value;\n                    }\n                }\n            }\n            return value;\n        };\n        if (!Model.prototype.adapt.__argnames__) Object.defineProperties(Model.prototype.adapt, {\n            __argnames__ : {value: [\"key\", \"value\"]}\n        });\n        Model.prototype.update = function update() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? update.__defaults__.values : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            var key, value, object;\n            if (self._is_env) {\n                return;\n            }\n            if (!exist(values)) {\n                if (self._is_singleton) {\n                    values = (function() {\n                        var ρσ_Iter = self._fields, ρσ_Result = {}, key;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            key = ρσ_Index;\n                            ρσ_Result[key] = (self[(typeof key === \"number\" && key < 0) ? self.length + key : key]);\n                        }\n                        return ρσ_Result;\n                    })();\n                } else {\n                    values = {};\n                }\n            }\n            var ρσ_Iter10 = values;\n            ρσ_Iter10 = ((typeof ρσ_Iter10[Symbol.iterator] === \"function\") ? (ρσ_Iter10 instanceof Map ? ρσ_Iter10.keys() : ρσ_Iter10) : Object.keys(ρσ_Iter10));\n            for (var ρσ_Index10 of ρσ_Iter10) {\n                key = ρσ_Index10;\n                value = self.adapt(key, values[(typeof key === \"number\" && key < 0) ? values.length + key : key]);\n                if (self._is_singleton) {\n                    (ρσ_expr_temp = self._values)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = value;\n                } else {\n                    var ρσ_Iter11 = self._values;\n                    ρσ_Iter11 = ((typeof ρσ_Iter11[Symbol.iterator] === \"function\") ? (ρσ_Iter11 instanceof Map ? ρσ_Iter11.keys() : ρσ_Iter11) : Object.keys(ρσ_Iter11));\n                    for (var ρσ_Index11 of ρσ_Iter11) {\n                        object = ρσ_Index11;\n                        object[(typeof key === \"number\" && key < 0) ? object.length + key : key] = value;\n                    }\n                }\n            }\n        };\n        if (!Model.prototype.update.__defaults__) Object.defineProperties(Model.prototype.update, {\n            __defaults__ : {value: {values:false}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\"]}\n        });\n        Model.prototype.queue = function queue(method) {\n            var self = this;\n            var records;\n            if (self._is_env || !exist(self)) {\n                return;\n            }\n            records = self.__iter__();\n            var index = 0;\n            function next() {\n                index += 1;\n                if (index < records.length && exist(records[(typeof index === \"number\" && index < 0) ? records.length + index : index])) {\n                    return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n                }\n                return self;\n            };\n\n            return method(records[(typeof index === \"number\" && index < 0) ? records.length + index : index], next);\n        };\n        if (!Model.prototype.queue.__argnames__) Object.defineProperties(Model.prototype.queue, {\n            __argnames__ : {value: [\"method\"]}\n        });\n        Model.prototype.create = function create() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? create.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            self.update();\n            if (!exist(values)) {\n                values = self.read();\n            } else {\n                merge(self.read(), values);\n            }\n            if (self._is_env) {\n                self = self.browse();\n                self.update(values);\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/create\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There is some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            ρσ_delitem(values, \"id\");\n            ρσ_delitem(values, \"rev\");\n            ρσ_delitem(values, \"_id\");\n            ρσ_delitem(values, \"_rev\");\n            return db.rel.save(self._name, values).then((function() {\n                var ρσ_anonfunc = function (record) {\n                    self.values = record[ρσ_bound_index(self._name, record)][0];\n                    return self;\n                };\n                if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                    __argnames__ : {value: [\"record\"]}\n                });\n                return ρσ_anonfunc;\n            })());\n        };\n        if (!Model.prototype.create.__defaults__) Object.defineProperties(Model.prototype.create, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.write = function write() {\n            var self = this;\n            var values = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.values : arguments[0];\n            var is_client = (arguments[1] === undefined || ( 1 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? write.__defaults__.is_client : arguments[1];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"values\")){\n                values = ρσ_kwargs_obj.values;\n            }\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            self.update();\n            if (!exist(values)) {\n                if (!self._is_singleton) {\n                    return;\n                }\n                values = self.read();\n            } else {\n                self.update(values);\n                values = self.read();\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/write\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = self.__iter__(), ρσ_Result = [], record;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            record = ρσ_Index;\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    ρσ_d[\"values\"] = values;\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        self.values = result.values;\n                        self.browse(self.id);\n                        return self;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        exception(error);\n                        return new Exception(\"There are some error\");\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                return db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        delete values._id;\n                        delete values._rev;\n                        delete values.rev;\n                        values.rev = record._rev;\n                        return db.rel.save(self._name, values).then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                self.values = values;\n                                return self;\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                return self.queue((function() {\n                    var ρσ_anonfunc = function (record, next) {\n                        return record.write().then((function() {\n                            var ρσ_anonfunc = function (result) {\n                                return next();\n                            };\n                            if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                                __argnames__ : {value: [\"result\"]}\n                            });\n                            return ρσ_anonfunc;\n                        })());\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\", \"next\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            return self;\n        };\n        if (!Model.prototype.write.__defaults__) Object.defineProperties(Model.prototype.write, {\n            __defaults__ : {value: {values:false, is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"values\", \"is_client\"]}\n        });\n        Model.prototype.unlink = function unlink() {\n            var self = this;\n            var is_client = (arguments[0] === undefined || ( 0 === arguments.length-1 && arguments[arguments.length-1] !== null && typeof arguments[arguments.length-1] === \"object\" && arguments[arguments.length-1] [ρσ_kwargs_symbol] === true)) ? unlink.__defaults__.is_client : arguments[0];\n            var ρσ_kwargs_obj = arguments[arguments.length-1];\n            if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== \"object\" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};\n            if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, \"is_client\")){\n                is_client = ρσ_kwargs_obj.is_client;\n            }\n            var value;\n            if (!exist(self.id) && !exist(self.ids)) {\n                return;\n            }\n            if (is_client) {\n                return ajax(\"post\", \"json\", configuration.url + \"/api/unlink\", (function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"login\"] = self.env.user.login;\n                    ρσ_d[\"password\"] = self.env.user.password;\n                    ρσ_d[\"encrypted\"] = true;\n                    ρσ_d[\"model\"] = self._name;\n                    ρσ_d[\"ids\"] = (function() {\n                        var ρσ_Iter = self.__iter__(), ρσ_Result = [], record;\n                        ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n                        for (var ρσ_Index of ρσ_Iter) {\n                            record = ρσ_Index;\n                            ρσ_Result.push(record.id);\n                        }\n                        ρσ_Result = ρσ_list_constructor(ρσ_Result);\n                        return ρσ_Result;\n                    })();\n                    return ρσ_d;\n                }).call(this)).then((function() {\n                    var ρσ_anonfunc = function (result) {\n                        return true;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"result\"]}\n                    });\n                    return ρσ_anonfunc;\n                })()).catch((function() {\n                    var ρσ_anonfunc = function (error) {\n                        warning(error, true);\n                        return false;\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"error\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            }\n            if (self._is_singleton) {\n                db.get(db.rel.makeDocID((function(){\n                    var ρσ_d = {};\n                    ρσ_d[\"type\"] = self._name;\n                    ρσ_d[\"id\"] = self.id;\n                    return ρσ_d;\n                }).call(this))).then((function() {\n                    var ρσ_anonfunc = function (record) {\n                        db.remove(record);\n                    };\n                    if (!ρσ_anonfunc.__argnames__) Object.defineProperties(ρσ_anonfunc, {\n                        __argnames__ : {value: [\"record\"]}\n                    });\n                    return ρσ_anonfunc;\n                })());\n            } else {\n                var ρσ_Iter12 = self._values;\n                ρσ_Iter12 = ((typeof ρσ_Iter12[Symbol.iterator] === \"function\") ? (ρσ_Iter12 instanceof Map ? ρσ_Iter12.keys() : ρσ_Iter12) : Object.keys(ρσ_Iter12));\n                for (var ρσ_Index12 of ρσ_Iter12) {\n                    value = ρσ_Index12;\n                    value[\"_deleted\"] = true;\n                }\n                db.bulkDocs(self._values);\n            }\n            return true;\n        };\n        if (!Model.prototype.unlink.__defaults__) Object.defineProperties(Model.prototype.unlink, {\n            __defaults__ : {value: {is_client:configuration.client}},\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: [\"is_client\"]}\n        });\n        Model.prototype.with_context = function with_context() {\n            var self = this;\n            var kwargs = arguments[arguments.length-1];\n            if (kwargs === null || typeof kwargs !== \"object\" || kwargs [ρσ_kwargs_symbol] !== true) kwargs = {};\n            var key;\n            var ρσ_Iter13 = kwargs;\n            ρσ_Iter13 = ((typeof ρσ_Iter13[Symbol.iterator] === \"function\") ? (ρσ_Iter13 instanceof Map ? ρσ_Iter13.keys() : ρσ_Iter13) : Object.keys(ρσ_Iter13));\n            for (var ρσ_Index13 of ρσ_Iter13) {\n                key = ρσ_Index13;\n                (ρσ_expr_temp = self.env.context)[(typeof key === \"number\" && key < 0) ? ρσ_expr_temp.length + key : key] = kwargs[(typeof key === \"number\" && key < 0) ? kwargs.length + key : key];\n            }\n            return self;\n        };\n        if (!Model.prototype.with_context.__handles_kwarg_interpolation__) Object.defineProperties(Model.prototype.with_context, {\n            __handles_kwarg_interpolation__ : {value: true},\n            __argnames__ : {value: []}\n        });\n        Model.prototype.__repr__ = function __repr__ () {\n                        return \"<\" + __name__ + \".\" + this.constructor.name + \" #\" + this.ρσ_object_id + \">\";\n        };\n        Model.prototype.__str__ = function __str__ () {\n            return this.__repr__();\n        };\n        Object.defineProperty(Model.prototype, \"__bases__\", {value: []});\n        Model.prototype._name = undefined;\n        Model.prototype._inherit = false;\n\n        ρσ_modules[\"orm.models\"].env = env;\n        ρσ_modules[\"orm.models\"].schemas = schemas;\n        ρσ_modules[\"orm.models\"].raw_models = raw_models;\n        ρσ_modules[\"orm.models\"].queryInverse = queryInverse;\n        ρσ_modules[\"orm.models\"].Model = Model;\n",
		"beautify:false keep_docstrings:true js_version:5": "var env,schemas,raw_models;var fields=ρσ_modules[\"orm.fields\"];var exist=ρσ_modules[\"orm.tools\"].exist;var keys=ρσ_modules[\"orm.tools\"].keys;var merge=ρσ_modules[\"orm.tools\"].merge;var copy=ρσ_modules[\"orm.tools\"].copy;var dict=ρσ_modules[\"orm.tools\"].dict;var checkBase64=ρσ_modules[\"orm.tools\"].checkBase64;var configuration=ρσ_modules[\"orm.tools\"].configuration;var ajax=ρσ_modules[\"orm.tools\"].ajax;var array=ρσ_modules[\"orm.tools\"].array;var exception=ρσ_modules[\"orm.tools\"].exception;var warning=ρσ_modules[\"orm.tools\"].warning;var db=ρσ_modules[\"orm.pouchdb\"].db;env={};schemas={};raw_models={};function queryInverse(field_type,records,fields,_fields){var result,field,record;var ρσ_Iter0=ρσ_Iterable(records[(typeof field_type===\"number\"&&field_type<0)?records.length+field_type:field_type]);for(var ρσ_Index0=0;ρσ_Index0<ρσ_Iter0.length;ρσ_Index0++){record=ρσ_Iter0[ρσ_Index0];var ρσ_Iter1=ρσ_Iterable(fields);for(var ρσ_Index1=0;ρσ_Index1<ρσ_Iter1.length;ρσ_Index1++){field=ρσ_Iter1[ρσ_Index1];record[(typeof field===\"number\"&&field<0)?record.length+field:field]=ρσ_list_decorate([]);var ρσ_Iter2=ρσ_Iterable(records[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].relation,records)]);for(var ρσ_Index2=0;ρσ_Index2<ρσ_Iter2.length;ρσ_Index2++){result=ρσ_Iter2[ρσ_Index2];if((result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===record.id||typeof result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===\"object\"&&ρσ_equals(result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)],record.id))){record[(typeof field===\"number\"&&field<0)?record.length+field:field].push(result.id)}}}}return records};if(!queryInverse.__argnames__)Object.defineProperties(queryInverse,{__argnames__:{value:[\"field_type\",\"records\",\"fields\",\"_fields\"]}});function Model(){if(this.ρσ_object_id===undefined)Object.defineProperty(this,\"ρσ_object_id\",{\"value\":++ρσ_object_counter});Model.prototype.__init__.apply(this,arguments)}Model.prototype.__init__=function __init__(_is_env,_is_singleton){var self=this;var newmodel,oldconstructor,models,key,raw_model,schema,reserved,valid_fields,relation;self._fields={};self._values={};self._related={};self._one2many_fields=ρσ_list_decorate([]);self._is_env=((_is_env!==undefined&&(typeof _is_env!==\"object\"||ρσ_not_equals(_is_env,undefined))))?_is_env:false;self._is_singleton=((_is_singleton!==undefined&&(typeof _is_singleton!==\"object\"||ρσ_not_equals(_is_singleton,undefined))))?_is_singleton:false;self._inherited_keys=ρσ_list_decorate([]);if(exist(self._inherit)&&exist(raw_models[ρσ_bound_index(self._inherit,raw_models)])&&(env[ρσ_bound_index(self._inherit,env)]!==true&&(typeof env[ρσ_bound_index(self._inherit,env)]!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._inherit,env)],true)))){if(!exist(self._name)){self._name=self._inherit}newmodel=self;oldconstructor=self.constructor;models=raw_models[ρσ_bound_index(newmodel._inherit,raw_models)];if(!(ρσ_in(oldconstructor,models))){models.push(oldconstructor)}var ρσ_Iter3=ρσ_Iterable(models);for(var ρσ_Index3=0;ρσ_Index3<ρσ_Iter3.length;ρσ_Index3++){raw_model=ρσ_Iter3[ρσ_Index3];var ρσ_Iter4=ρσ_Iterable(Object.getOwnPropertyNames(raw_model.prototype));for(var ρσ_Index4=0;ρσ_Index4<ρσ_Iter4.length;ρσ_Index4++){key=ρσ_Iter4[ρσ_Index4];if(ρσ_not_equals(key.slice(0,2),\"__\")&&!(ρσ_in(key,ρσ_list_decorate([\"_inherit\",\"inherited_constructor\",\"values\"])))){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=raw_model.prototype)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];self._inherited_keys.push(key)}}}self._name=newmodel._name;self._is_env=false;if(exist(env[ρσ_bound_index(self._name,env)])&&(env[ρσ_bound_index(self._name,env)].constructor!==self.constructor&&(typeof env[ρσ_bound_index(self._name,env)].constructor!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._name,env)].constructor,self.constructor)))){ρσ_delitem(env,self._name)}}if(!(ρσ_in(\"Model\",env))){env[\"Model\"]=Model}if(!(ρσ_in(\"context\",env))){env[\"context\"]={}}if(!exist(env[ρσ_bound_index(self._name,env)])){env[ρσ_bound_index(self._name,env)]=true;env[self._name] = new self.constructor(_is_env=true);env[ρσ_bound_index(self._name,env)]._is_env=true}self.env=env;if(self._is_env){return}schema=(function(){var ρσ_d={};ρσ_d[\"singular\"]=self._name;ρσ_d[\"plural\"]=self._name;return ρσ_d}).call(this);schemas[ρσ_bound_index(self._name,schemas)]=schema;reserved=ρσ_list_decorate([\"id\",\"_id\",\"rev\",\"_rev\",\"ids\"]);if(self._is_singleton){self.id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID\",related:\"_id\",store:true})]);self._id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID (Raw)\"})])}self._fields.ids=ρσ_interpolate_kwargs.call(fields,fields.Data,[ρσ_desugar_kwargs({string:\"IDs\"})]);self.rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\",related:\"_rev\",store:true})]);self._rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\"})]);valid_fields=(function(){var ρσ_Iter=ρσ_Iterable(Object.getOwnPropertyNames(self.constructor.prototype)),ρσ_Result=[],key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];if((key[0]!==\"_\"&&(typeof key[0]!==\"object\"||ρσ_not_equals(key[0],\"_\")))&&!(ρσ_in(key,ρσ_list_decorate([\"constructor\",\"env\",\"values\"])))){ρσ_Result.push(key)}}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})().concat(reserved).concat(self._inherited_keys);var ρσ_Iter5=ρσ_Iterable(valid_fields);for(var ρσ_Index5=0;ρσ_Index5<ρσ_Iter5.length;ρσ_Index5++){key=ρσ_Iter5[ρσ_Index5];if(!exist(self[(typeof key===\"number\"&&key<0)?self.length+key:key])||ρσ_not_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)||ρσ_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)&&!(ρσ_in(\"compute\",self[(typeof key===\"number\"&&key<0)?self.length+key:key]))){continue}if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2many\",\"many2many\",\"one2one\"]))){if(!schema.relations){schema.relations={}}relation=\"belongsTo\";if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"one2many\",\"many2many\"]))){relation=\"hasMany\"}if((self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"one2many\"&&(typeof self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"object\"||ρσ_not_equals(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,\"one2many\")))){(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this)}else{(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;ρσ_d[\"queryInverse\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].inverse;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this);self._one2many_fields.push(key)}if((type===\"belongsTo\"||typeof type===\"object\"&&ρσ_equals(type,\"belongsTo\"))){db.createIndex((function(){var ρσ_d={};ρσ_d[\"index\"]=(function(){var ρσ_d={};ρσ_d[\"fields\"]=ρσ_list_decorate([\"data.\"+key,\"_id\"]);return ρσ_d}).call(this);return ρσ_d}).call(this))}}(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];if(self._is_singleton){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){if(!exist((ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)])){(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=ρσ_list_decorate([])}(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)].push(key)}self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].default;(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];\"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\"}}if(exist(self._fields)){(ρσ_expr_temp=self.env)[ρσ_bound_index(self._name,ρσ_expr_temp)]._fields=self._fields}try{db.setSchema((function(){var ρσ_Iter=ρσ_Iterable(schemas),ρσ_Result=[],key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];ρσ_Result.push(schemas[(typeof key===\"number\"&&key<0)?schemas.length+key:key])}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})())}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{}}if(exist(self._name)){if(!exist(raw_models[ρσ_bound_index(self._name,raw_models)])){raw_models[ρσ_bound_index(self._name,raw_models)]=ρσ_list_decorate([])}if(!(ρσ_in(self.constructor,raw_models[ρσ_bound_index(self._name,raw_models)]))){raw_models[ρσ_bound_index(self._name,raw_models)].push(self.constructor)}}if(ρσ_in(\"values\",Object.getOwnPropertyNames(self))){return}Object.defineProperty(self,\"ids\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_singleton){return ρσ_list_decorate([self.id])}else{return(function(){var ρσ_Iter=ρσ_Iterable(self.values),ρσ_Result=[],object;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){object=ρσ_Iter[ρσ_Index];ρσ_Result.push(object.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})()}};ρσ_d[\"set\"]=function(){return};return ρσ_d}).call(this));Object.defineProperty(self,\"values\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){return self._values};ρσ_d[\"set\"]=(function(){var ρσ_anonfunc=function(newvalue){var key;if(!exist(newvalue)){return}if(self._is_singleton){self._values=merge(self._values,newvalue);var ρσ_Iter6=ρσ_Iterable(self._fields);for(var ρσ_Index6=0;ρσ_Index6<ρσ_Iter6.length;ρσ_Index6++){key=ρσ_Iter6[ρσ_Index6];if(ρσ_in(key,newvalue)){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=self.adapt(key,newvalue[(typeof key===\"number\"&&key<0)?newvalue.length+key:key])}}}else{self._values=newvalue}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"newvalue\"]}});return ρσ_anonfunc})();return ρσ_d}).call(this));Object.defineProperty(self,\"length\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_env){return 0}else if(self._is_singleton){if(!exist(self.id)||!exist(self.values)){return 0}return 1}else{return self._values.length}};return ρσ_d}).call(this))};if(!Model.prototype.__init__.__argnames__)Object.defineProperties(Model.prototype.__init__,{__argnames__:{value:[\"_is_env\",\"_is_singleton\"]}});Model.__argnames__=Model.prototype.__init__.__argnames__;Model.__handles_kwarg_interpolation__=Model.prototype.__init__.__handles_kwarg_interpolation__;Model.prototype.__iter__=function __iter__(){var self=this;var lists,result,value;if(self._is_env||self.length<1){return ρσ_list_decorate([])}else if(self._is_singleton){return ρσ_list_decorate([self])}lists=ρσ_list_decorate([]);var ρσ_Iter7=ρσ_Iterable(self.values);for(var ρσ_Index7=0;ρσ_Index7<ρσ_Iter7.length;ρσ_Index7++){value=ρσ_Iter7[ρσ_Index7];result=self.browse();result.values=value;lists.push(result)}return lists};if(!Model.prototype.__iter__.__argnames__)Object.defineProperties(Model.prototype.__iter__,{__argnames__:{value:[]}});Model.prototype[ρσ_iterator_symbol]=Model.prototype.__iter__;Model.prototype.__view__=function __view__(view,view_type){var self=this;return view};if(!Model.prototype.__view__.__argnames__)Object.defineProperties(Model.prototype.__view__,{__argnames__:{value:[\"view\",\"view_type\"]}});Model.prototype.browse=function browse(){var self=this;var ids=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.ids:arguments[0];var is_singleton=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_singleton:arguments[1];var is_client=(arguments[2]===undefined||(2===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_client:arguments[2];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"ids\")){ids=ρσ_kwargs_obj.ids}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_singleton\")){is_singleton=ρσ_kwargs_obj.is_singleton}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var result;if(!exist(ids)){return new self.constructor(false, is_singleton)}else if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/browse\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=ids;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;console.log(result);record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;if(exist(record)){ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({ids:ids,is_client:false})]).then((function(){var ρσ_anonfunc=function(records){if(exist(records)){ρσ_interpolate_kwargs.call(records,records.write,[result.values].concat([ρσ_desugar_kwargs({is_client:false})]))}else{delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){console.log(error);delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.browse,[ids].concat([ρσ_desugar_kwargs({is_client:false})]))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}else if(ρσ_in(type(ids),ρσ_list_decorate([ρσ_list_constructor,Array]))){if(ids.length>1){var result = new self.constructor(false, false);return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{ids=ids[0]}}if(ρσ_equals(type(ids),String)){result=self.browse();return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)][0];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.browse.__defaults__)Object.defineProperties(Model.prototype.browse,{__defaults__:{value:{ids:false,is_singleton:true,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"ids\",\"is_singleton\",\"is_client\"]}});Model.prototype.search=function search(){var self=this;var args,options,result;args=Array.prototype.slice.call(arguments);options=copy(self.env.context);if((options.is_client===undefined||typeof options.is_client===\"object\"&&ρσ_equals(options.is_client,undefined))){options.is_client=configuration.client}if(exist(self.env.context.active_limit)){options.limit=self.env.context.active_limit}if(exist(self.env.context.active_index)){options.index=self.env.context.active_index}if(exist(options.is_client)){delete options.is_client;return ajax(\"post\",\"json\",configuration.url+\"/api/search\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"args\"]=args;ρσ_d[\"options\"]=options;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;self.browse(record.ids);return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.with_context,[ρσ_desugar_kwargs({is_client:false})]).search(args)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}function query(record){var results,arg;results=ρσ_list_decorate([]);var ρσ_Iter8=ρσ_Iterable(args);for(var ρσ_Index8=0;ρσ_Index8<ρσ_Iter8.length;ρσ_Index8++){arg=ρσ_Iter8[ρσ_Index8];if(!arg||ρσ_in(str(arg),ρσ_list_decorate([\"|\",\"[]\"]))){continue}if((arg[1]===\"=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"=\"))){results.push((record[ρσ_bound_index(arg[0],record)]===arg[2]||typeof record[ρσ_bound_index(arg[0],record)]===\"object\"&&ρσ_equals(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\">\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">\"))){results.push(record[ρσ_bound_index(arg[0],record)]>arg[2])}else if((arg[1]===\">=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">=\"))){results.push(record[ρσ_bound_index(arg[0],record)]>=arg[2])}else if((arg[1]===\"<\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<\"))){results.push(record[ρσ_bound_index(arg[0],record)]<arg[2])}else if((arg[1]===\"<=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<=\"))){results.push(record[ρσ_bound_index(arg[0],record)]<=arg[2])}else if((arg[1]===\"in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"in\"))){results.push(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2]))}else if((arg[1]===\"not in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"not in\"))){results.push(!(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\"like\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"like\"))){results.push(ρσ_in(arg[2],record[ρσ_bound_index(arg[0],record)]))}else if((arg[1]===\"ilike\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"ilike\"))){results.push(ρσ_in(str(arg[2]).toLowerCase(),str(record[ρσ_bound_index(arg[0],record)]).toLowerCase()))}}if(!exist(args)||!exist(args[0])){return true}else if((args[0]===\"|\"||typeof args[0]===\"object\"&&ρσ_equals(args[0],\"|\"))){return results.some((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}else{return results.every((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}};if(!query.__argnames__)Object.defineProperties(query,{__argnames__:{value:[\"record\"]}});result=self.browse();if((options.limit===1||typeof options.limit===\"object\"&&ρσ_equals(options.limit,1))){if(options.index>0){return new Promise((function(){var ρσ_anonfunc=function(resolve,reject){resolve(result)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"resolve\",\"reject\"]}});return ρσ_anonfunc})())}return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var record;records=queryInverse(result._name,records,result._one2many_fields,result._fields);record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}else{return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var values,start,result,record;var result = new self.constructor(false, false);records=queryInverse(result._name,records,result._one2many_fields,result._fields);if(records[ρσ_bound_index(result._name,records)].length>1){values=records[ρσ_bound_index(result._name,records)].filter(query);if(exist(options.limit)&&ρσ_equals(type(options.limit),Number)){start=0;if(exist(options.index)&&ρσ_equals(type(options.index),Number)){start=options.index*options.limit;options.limit=(options.index+1)*options.limit}result.values=values.slice(start,options.limit)}else{result.values=values}return result}else{result=self.browse();if(options.index>0){return result}record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.search.__argnames__)Object.defineProperties(Model.prototype.search,{__argnames__:{value:[]}});Model.prototype.read=function read(){var self=this;if(self._is_env){return{}}return self._values};if(!Model.prototype.read.__argnames__)Object.defineProperties(Model.prototype.read,{__argnames__:{value:[]}});Model.prototype.adapt=function adapt(key,value){var self=this;var field;if(self._is_env){return}if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"char\",\"text\"]))){if(!exist(value)){value=\"\"}else{value=String(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"integer\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"integer\"))){value=parseInt(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"float\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"float\"))){value=parseFloat(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"boolean\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"boolean\"))){if(ρσ_in(value,ρσ_list_decorate([\"true\",\"True\"]))){value=true}else if(ρσ_in(value,ρσ_list_decorate([\"false\",\"False\",null,undefined]))){value=false}else if(ρσ_equals(type(value),String)){return new Exception(\"Not a valid Boolean\")}else{value=Boolean(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"binary\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"binary\"))){if(!checkBase64(value)){return new Exception(\"Not a valid base64\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"selection\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"selection\"))){if(!exist(value)){value=null}else if(ρσ_in(!value,dict((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].selection))){return new Exception(\"Incorrect value\")}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"date\",\"datetime\"]))){if(!exist(value)){value=null}else if(ρσ_equals(type(value),Date)){value=value.toISOString()}else if(ρσ_equals(type(value),String)){try{value=new Date(value).toISOString()}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{return new Exception(\"Can't parse Date\")}}}else{return new Exception(\"Can't parse Date\")}if(exist(value)&&((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"date\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"date\"))){value=value.split(\"T\")[0]+\"T00:00:00.000Z\"}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2one\"]))){if(!exist(value)){return null}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.id}else if(ρσ_in(type(value),ρσ_list_decorate([ρσ_list_constructor,Array]))&&value.length>0){value=value[0]}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2many\",\"one2many\"]))){if(!exist(value)){value=ρσ_list_decorate([])}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.ids}}if((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].store){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){self[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,self)]=value;(ρσ_expr_temp=self._values)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=value}if(exist((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key])){var ρσ_Iter9=ρσ_Iterable((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]);for(var ρσ_Index9=0;ρσ_Index9<ρσ_Iter9.length;ρσ_Index9++){field=ρσ_Iter9[ρσ_Index9];self[(typeof field===\"number\"&&field<0)?self.length+field:field]=value;(ρσ_expr_temp=self._values)[(typeof field===\"number\"&&field<0)?ρσ_expr_temp.length+field:field]=value}}}return value};if(!Model.prototype.adapt.__argnames__)Object.defineProperties(Model.prototype.adapt,{__argnames__:{value:[\"key\",\"value\"]}});Model.prototype.update=function update(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?update.__defaults__.values:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}var key,value,object;if(self._is_env){return}if(!exist(values)){if(self._is_singleton){values=(function(){var ρσ_Iter=ρσ_Iterable(self._fields),ρσ_Result={},key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];ρσ_Result[key]=(self[(typeof key===\"number\"&&key<0)?self.length+key:key])}return ρσ_Result})()}else{values={}}}var ρσ_Iter10=ρσ_Iterable(values);for(var ρσ_Index10=0;ρσ_Index10<ρσ_Iter10.length;ρσ_Index10++){key=ρσ_Iter10[ρσ_Index10];value=self.adapt(key,values[(typeof key===\"number\"&&key<0)?values.length+key:key]);if(self._is_singleton){(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=value}else{var ρσ_Iter11=ρσ_Iterable(self._values);for(var ρσ_Index11=0;ρσ_Index11<ρσ_Iter11.length;ρσ_Index11++){object=ρσ_Iter11[ρσ_Index11];object[(typeof key===\"number\"&&key<0)?object.length+key:key]=value}}}};if(!Model.prototype.update.__defaults__)Object.defineProperties(Model.prototype.update,{__defaults__:{value:{values:false}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\"]}});Model.prototype.queue=function queue(method){var self=this;var records;if(self._is_env||!exist(self)){return}records=self.__iter__();var index = 0;function next(){index += 1;if(index<records.length&&exist(records[(typeof index===\"number\"&&index<0)?records.length+index:index])){return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)}return self};return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)};if(!Model.prototype.queue.__argnames__)Object.defineProperties(Model.prototype.queue,{__argnames__:{value:[\"method\"]}});Model.prototype.create=function create(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}self.update();if(!exist(values)){values=self.read()}else{merge(self.read(),values)}if(self._is_env){self=self.browse();self.update(values)}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/create\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);\nreturn new Exception(\"There is some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}ρσ_delitem(values,\"id\");ρσ_delitem(values,\"rev\");ρσ_delitem(values,\"_id\");ρσ_delitem(values,\"_rev\");return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(record){self.values=record[ρσ_bound_index(self._name,record)][0];return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())};if(!Model.prototype.create.__defaults__)Object.defineProperties(Model.prototype.create,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.write=function write(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}if(!exist(self.id)&&!exist(self.ids)){return}self.update();if(!exist(values)){if(!self._is_singleton){return}values=self.read()}else{self.update(values);values=self.read()}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/write\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=ρσ_Iterable(self.__iter__()),ρσ_Result=[],record;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){record=ρσ_Iter[ρσ_Index];ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There are some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){return db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){delete values._id;delete values._rev;delete values.rev;values.rev=record._rev;return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(result){self.values=values;return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{return self.queue((function(){var ρσ_anonfunc=function(record,next){return record.write().then((function(){var ρσ_anonfunc=function(result){return next()};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\",\"next\"]}});return ρσ_anonfunc})())}return self};if(!Model.prototype.write.__defaults__)Object.defineProperties(Model.prototype.write,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.unlink=function unlink(){var self=this;var is_client=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?unlink.__defaults__.is_client:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var value;if(!exist(self.id)&&!exist(self.ids)){return}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/unlink\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=ρσ_Iterable(self.__iter__()),ρσ_Result=[],record;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){record=ρσ_Iter[ρσ_Index];ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){return true};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return false};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){db.remove(record)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{var ρσ_Iter12=ρσ_Iterable(self._values);for(var ρσ_Index12=0;ρσ_Index12<ρσ_Iter12.length;ρσ_Index12++){value=ρσ_Iter12[ρσ_Index12];value[\"_deleted\"]=true}db.bulkDocs(self._values)}return true};if(!Model.prototype.unlink.__defaults__)Object.defineProperties(Model.prototype.unlink,{__defaults__:{value:{is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"is_client\"]}});Model.prototype.with_context=function with_context(){var self=this;var kwargs=arguments[arguments.length-1];if(kwargs===null||typeof kwargs!==\"object\"||kwargs[ρσ_kwargs_symbol]!==true)kwargs={};var key;var ρσ_Iter13=ρσ_Iterable(kwargs);for(var ρσ_Index13=0;ρσ_Index13<ρσ_Iter13.length;ρσ_Index13++){key=ρσ_Iter13[ρσ_Index13];(ρσ_expr_temp=self.env.context)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=kwargs[(typeof key===\"number\"&&key<0)?kwargs.length+key:key]}return self};if(!Model.prototype.with_context.__handles_kwarg_interpolation__)Object.defineProperties(Model.prototype.with_context,{__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[]}});Model.prototype.__repr__=function __repr__(){return\"<\"+__name__+\".\"+this.constructor.name+\" #\"+this.ρσ_object_id+\">\"};Model.prototype.__str__=function __str__(){return this.__repr__()};Object.defineProperty(Model.prototype,\"__bases__\",{value:[]});Object.defineProperty(Model.prototype,\"__doc__\",{value:\"def __super__(self):\\ninherited = v'new self.inherited_constructor(self._is_env, self._is_singleton)'\\ninherited.values = self.values\\nreturn inherited\"});Model.prototype._name=undefined;Model.prototype._inherit=false;ρσ_modules[\"orm.models\"].env=env;ρσ_modules[\"orm.models\"].schemas=schemas;ρσ_modules[\"orm.models\"].raw_models=raw_models;ρσ_modules[\"orm.models\"].queryInverse=queryInverse;ρσ_modules[\"orm.models\"].Model=Model",
		"beautify:false keep_docstrings:true js_version:6": "var env,schemas,raw_models;var fields=ρσ_modules[\"orm.fields\"];var exist=ρσ_modules[\"orm.tools\"].exist;var keys=ρσ_modules[\"orm.tools\"].keys;var merge=ρσ_modules[\"orm.tools\"].merge;var copy=ρσ_modules[\"orm.tools\"].copy;var dict=ρσ_modules[\"orm.tools\"].dict;var checkBase64=ρσ_modules[\"orm.tools\"].checkBase64;var configuration=ρσ_modules[\"orm.tools\"].configuration;var ajax=ρσ_modules[\"orm.tools\"].ajax;var array=ρσ_modules[\"orm.tools\"].array;var exception=ρσ_modules[\"orm.tools\"].exception;var warning=ρσ_modules[\"orm.tools\"].warning;var db=ρσ_modules[\"orm.pouchdb\"].db;env={};schemas={};raw_models={};function queryInverse(field_type,records,fields,_fields){var result,field,record;var ρσ_Iter0=records[(typeof field_type===\"number\"&&field_type<0)?records.length+field_type:field_type];ρσ_Iter0=((typeof ρσ_Iter0[Symbol.iterator]===\"function\")?(ρσ_Iter0 instanceof Map?ρσ_Iter0.keys():ρσ_Iter0):Object.keys(ρσ_Iter0));for(var ρσ_Index0 of ρσ_Iter0){record=ρσ_Index0;var ρσ_Iter1=fields;ρσ_Iter1=((typeof ρσ_Iter1[Symbol.iterator]===\"function\")?(ρσ_Iter1 instanceof Map?ρσ_Iter1.keys():ρσ_Iter1):Object.keys(ρσ_Iter1));for(var ρσ_Index1 of ρσ_Iter1){field=ρσ_Index1;record[(typeof field===\"number\"&&field<0)?record.length+field:field]=ρσ_list_decorate([]);var ρσ_Iter2=records[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].relation,records)];ρσ_Iter2=((typeof ρσ_Iter2[Symbol.iterator]===\"function\")?(ρσ_Iter2 instanceof Map?ρσ_Iter2.keys():ρσ_Iter2):Object.keys(ρσ_Iter2));for(var ρσ_Index2 of ρσ_Iter2){result=ρσ_Index2;if((result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===record.id||typeof result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===\"object\"&&ρσ_equals(result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)],record.id))){record[(typeof field===\"number\"&&field<0)?record.length+field:field].push(result.id)}}}}return records};if(!queryInverse.__argnames__)Object.defineProperties(queryInverse,{__argnames__:{value:[\"field_type\",\"records\",\"fields\",\"_fields\"]}});function Model(){if(this.ρσ_object_id===undefined)Object.defineProperty(this,\"ρσ_object_id\",{\"value\":++ρσ_object_counter});Model.prototype.__init__.apply(this,arguments)}Model.prototype.__init__=function __init__(_is_env,_is_singleton){var self=this;var newmodel,oldconstructor,models,key,raw_model,schema,reserved,valid_fields,relation;self._fields={};self._values={};self._related={};self._one2many_fields=ρσ_list_decorate([]);self._is_env=((_is_env!==undefined&&(typeof _is_env!==\"object\"||ρσ_not_equals(_is_env,undefined))))?_is_env:false;self._is_singleton=((_is_singleton!==undefined&&(typeof _is_singleton!==\"object\"||ρσ_not_equals(_is_singleton,undefined))))?_is_singleton:false;self._inherited_keys=ρσ_list_decorate([]);if(exist(self._inherit)&&exist(raw_models[ρσ_bound_index(self._inherit,raw_models)])&&(env[ρσ_bound_index(self._inherit,env)]!==true&&(typeof env[ρσ_bound_index(self._inherit,env)]!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._inherit,env)],true)))){if(!exist(self._name)){self._name=self._inherit}newmodel=self;oldconstructor=self.constructor;models=raw_models[ρσ_bound_index(newmodel._inherit,raw_models)];if(!(ρσ_in(oldconstructor,models))){models.push(oldconstructor)}var ρσ_Iter3=models;ρσ_Iter3=((typeof ρσ_Iter3[Symbol.iterator]===\"function\")?(ρσ_Iter3 instanceof Map?ρσ_Iter3.keys():ρσ_Iter3):Object.keys(ρσ_Iter3));for(var ρσ_Index3 of ρσ_Iter3){raw_model=ρσ_Index3;var ρσ_Iter4=Object.getOwnPropertyNames(raw_model.prototype);ρσ_Iter4=((typeof ρσ_Iter4[Symbol.iterator]===\"function\")?(ρσ_Iter4 instanceof Map?ρσ_Iter4.keys():ρσ_Iter4):Object.keys(ρσ_Iter4));for(var ρσ_Index4 of ρσ_Iter4){key=ρσ_Index4;if(ρσ_not_equals(key.slice(0,2),\"__\")&&!(ρσ_in(key,ρσ_list_decorate([\"_inherit\",\"inherited_constructor\",\"values\"])))){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=raw_model.prototype)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];self._inherited_keys.push(key)}}}self._name=newmodel._name;self._is_env=false;if(exist(env[ρσ_bound_index(self._name,env)])&&(env[ρσ_bound_index(self._name,env)].constructor!==self.constructor&&(typeof env[ρσ_bound_index(self._name,env)].constructor!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._name,env)].constructor,self.constructor)))){ρσ_delitem(env,self._name)}}if(!(ρσ_in(\"Model\",env))){env[\"Model\"]=Model}if(!(ρσ_in(\"context\",env))){env[\"context\"]={}}if(!exist(env[ρσ_bound_index(self._name,env)])){env[ρσ_bound_index(self._name,env)]=true;env[self._name] = new self.constructor(_is_env=true);env[ρσ_bound_index(self._name,env)]._is_env=true}self.env=env;if(self._is_env){return}schema=(function(){var ρσ_d={};ρσ_d[\"singular\"]=self._name;ρσ_d[\"plural\"]=self._name;return ρσ_d}).call(this);schemas[ρσ_bound_index(self._name,schemas)]=schema;reserved=ρσ_list_decorate([\"id\",\"_id\",\"rev\",\"_rev\",\"ids\"]);if(self._is_singleton){self.id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID\",related:\"_id\",store:true})]);self._id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID (Raw)\"})])}self._fields.ids=ρσ_interpolate_kwargs.call(fields,fields.Data,[ρσ_desugar_kwargs({string:\"IDs\"})]);self.rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\",related:\"_rev\",store:true})]);self._rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\"})]);valid_fields=(function(){var ρσ_Iter=Object.getOwnPropertyNames(self.constructor.prototype),ρσ_Result=[],key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;if((key[0]!==\"_\"&&(typeof key[0]!==\"object\"||ρσ_not_equals(key[0],\"_\")))&&!(ρσ_in(key,ρσ_list_decorate([\"constructor\",\"env\",\"values\"])))){ρσ_Result.push(key)}}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})().concat(reserved).concat(self._inherited_keys);var ρσ_Iter5=valid_fields;ρσ_Iter5=((typeof ρσ_Iter5[Symbol.iterator]===\"function\")?(ρσ_Iter5 instanceof Map?ρσ_Iter5.keys():ρσ_Iter5):Object.keys(ρσ_Iter5));for(var ρσ_Index5 of ρσ_Iter5){key=ρσ_Index5;if(!exist(self[(typeof key===\"number\"&&key<0)?self.length+key:key])||ρσ_not_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)||ρσ_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)&&!(ρσ_in(\"compute\",self[(typeof key===\"number\"&&key<0)?self.length+key:key]))){continue}if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2many\",\"many2many\",\"one2one\"]))){if(!schema.relations){schema.relations={}}relation=\"belongsTo\";if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"one2many\",\"many2many\"]))){relation=\"hasMany\"}if((self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"one2many\"&&(typeof self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"object\"||ρσ_not_equals(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,\"one2many\")))){(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this)}else{(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;ρσ_d[\"queryInverse\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].inverse;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this);self._one2many_fields.push(key)}if((type===\"belongsTo\"||typeof type===\"object\"&&ρσ_equals(type,\"belongsTo\"))){db.createIndex((function(){var ρσ_d={};ρσ_d[\"index\"]=(function(){var ρσ_d={};ρσ_d[\"fields\"]=ρσ_list_decorate([\"data.\"+key,\"_id\"]);return ρσ_d}).call(this);return ρσ_d}).call(this))}}(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];if(self._is_singleton){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){if(!exist((ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)])){(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=ρσ_list_decorate([])}(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)].push(key)}self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].default;(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];\"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\"}}if(exist(self._fields)){(ρσ_expr_temp=self.env)[ρσ_bound_index(self._name,ρσ_expr_temp)]._fields=self._fields}try{db.setSchema((function(){var ρσ_Iter=schemas,ρσ_Result=[],key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;ρσ_Result.push(schemas[(typeof key===\"number\"&&key<0)?schemas.length+key:key])}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})())}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{}}if(exist(self._name)){if(!exist(raw_models[ρσ_bound_index(self._name,raw_models)])){raw_models[ρσ_bound_index(self._name,raw_models)]=ρσ_list_decorate([])}if(!(ρσ_in(self.constructor,raw_models[ρσ_bound_index(self._name,raw_models)]))){raw_models[ρσ_bound_index(self._name,raw_models)].push(self.constructor)}}if(ρσ_in(\"values\",Object.getOwnPropertyNames(self))){return}Object.defineProperty(self,\"ids\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_singleton){return ρσ_list_decorate([self.id])}else{return(function(){var ρσ_Iter=self.values,ρσ_Result=[],object;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){object=ρσ_Index;ρσ_Result.push(object.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})()}};ρσ_d[\"set\"]=function(){return};return ρσ_d}).call(this));Object.defineProperty(self,\"values\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){return self._values};ρσ_d[\"set\"]=(function(){var ρσ_anonfunc=function(newvalue){var key;if(!exist(newvalue)){return}if(self._is_singleton){self._values=merge(self._values,newvalue);var ρσ_Iter6=self._fields;ρσ_Iter6=((typeof ρσ_Iter6[Symbol.iterator]===\"function\")?(ρσ_Iter6 instanceof Map?ρσ_Iter6.keys():ρσ_Iter6):Object.keys(ρσ_Iter6));for(var ρσ_Index6 of ρσ_Iter6){key=ρσ_Index6;if(ρσ_in(key,newvalue)){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=self.adapt(key,newvalue[(typeof key===\"number\"&&key<0)?newvalue.length+key:key])}}}else{self._values=newvalue}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"newvalue\"]}});return ρσ_anonfunc})();return ρσ_d}).call(this));Object.defineProperty(self,\"length\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_env){return 0}else if(self._is_singleton){if(!exist(self.id)||!exist(self.values)){return 0}return 1}else{return self._values.length}};return ρσ_d}).call(this))};if(!Model.prototype.__init__.__argnames__)Object.defineProperties(Model.prototype.__init__,{__argnames__:{value:[\"_is_env\",\"_is_singleton\"]}});Model.__argnames__=Model.prototype.__init__.__argnames__;Model.__handles_kwarg_interpolation__=Model.prototype.__init__.__handles_kwarg_interpolation__;Model.prototype.__iter__=function __iter__(){var self=this;var lists,result,value;if(self._is_env||self.length<1){return ρσ_list_decorate([])}else if(self._is_singleton){return ρσ_list_decorate([self])}lists=ρσ_list_decorate([]);var ρσ_Iter7=self.values;ρσ_Iter7=((typeof ρσ_Iter7[Symbol.iterator]===\"function\")?(ρσ_Iter7 instanceof Map?ρσ_Iter7.keys():ρσ_Iter7):Object.keys(ρσ_Iter7));for(var ρσ_Index7 of ρσ_Iter7){value=ρσ_Index7;result=self.browse();result.values=value;lists.push(result)}return lists};if(!Model.prototype.__iter__.__argnames__)Object.defineProperties(Model.prototype.__iter__,{__argnames__:{value:[]}});Model.prototype[ρσ_iterator_symbol]=Model.prototype.__iter__;Model.prototype.__view__=function __view__(view,view_type){var self=this;return view};if(!Model.prototype.__view__.__argnames__)Object.defineProperties(Model.prototype.__view__,{__argnames__:{value:[\"view\",\"view_type\"]}});Model.prototype.browse=function browse(){var self=this;var ids=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.ids:arguments[0];var is_singleton=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_singleton:arguments[1];var is_client=(arguments[2]===undefined||(2===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_client:arguments[2];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"ids\")){ids=ρσ_kwargs_obj.ids}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_singleton\")){is_singleton=ρσ_kwargs_obj.is_singleton}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var result;if(!exist(ids)){return new self.constructor(false, is_singleton)}else if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/browse\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=ids;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;console.log(result);record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;if(exist(record)){ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({ids:ids,is_client:false})]).then((function(){var ρσ_anonfunc=function(records){if(exist(records)){ρσ_interpolate_kwargs.call(records,records.write,[result.values].concat([ρσ_desugar_kwargs({is_client:false})]))}else{delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){console.log(error);delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.browse,[ids].concat([ρσ_desugar_kwargs({is_client:false})]))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}else if(ρσ_in(type(ids),ρσ_list_decorate([ρσ_list_constructor,Array]))){if(ids.length>1){var result = new self.constructor(false, false);return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{ids=ids[0]}}if(ρσ_equals(type(ids),String)){result=self.browse();return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)][0];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.browse.__defaults__)Object.defineProperties(Model.prototype.browse,{__defaults__:{value:{ids:false,is_singleton:true,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"ids\",\"is_singleton\",\"is_client\"]}});Model.prototype.search=function search(){var self=this;var args,options,result;args=Array.prototype.slice.call(arguments);options=copy(self.env.context);if((options.is_client===undefined||typeof options.is_client===\"object\"&&ρσ_equals(options.is_client,undefined))){options.is_client=configuration.client}if(exist(self.env.context.active_limit)){options.limit=self.env.context.active_limit}if(exist(self.env.context.active_index)){options.index=self.env.context.active_index}if(exist(options.is_client)){delete options.is_client;return ajax(\"post\",\"json\",configuration.url+\"/api/search\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"args\"]=args;ρσ_d[\"options\"]=options;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;self.browse(record.ids);return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.with_context,[ρσ_desugar_kwargs({is_client:false})]).search(args)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}function query(record){var results,arg;results=ρσ_list_decorate([]);var ρσ_Iter8=args;ρσ_Iter8=((typeof ρσ_Iter8[Symbol.iterator]===\"function\")?(ρσ_Iter8 instanceof Map?ρσ_Iter8.keys():ρσ_Iter8):Object.keys(ρσ_Iter8));for(var ρσ_Index8 of ρσ_Iter8){arg=ρσ_Index8;if(!arg||ρσ_in(str(arg),ρσ_list_decorate([\"|\",\"[]\"]))){continue}if((arg[1]===\"=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"=\"))){results.push((record[ρσ_bound_index(arg[0],record)]===arg[2]||typeof record[ρσ_bound_index(arg[0],record)]===\"object\"&&ρσ_equals(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\">\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">\"))){results.push(record[ρσ_bound_index(arg[0],record)]>arg[2])}else if((arg[1]===\">=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">=\"))){results.push(record[ρσ_bound_index(arg[0],record)]>=arg[2])}else if((arg[1]===\"<\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<\"))){results.push(record[ρσ_bound_index(arg[0],record)]<arg[2])}else if((arg[1]===\"<=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<=\"))){results.push(record[ρσ_bound_index(arg[0],record)]<=arg[2])}else if((arg[1]===\"in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"in\"))){results.push(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2]))}else if((arg[1]===\"not in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"not in\"))){results.push(!(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\"like\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"like\"))){results.push(ρσ_in(arg[2],record[ρσ_bound_index(arg[0],record)]))}else if((arg[1]===\"ilike\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"ilike\"))){results.push(ρσ_in(str(arg[2]).toLowerCase(),str(record[ρσ_bound_index(arg[0],record)]).toLowerCase()))}}if(!exist(args)||!exist(args[0])){return true}else if((args[0]===\"|\"||typeof args[0]===\"object\"&&ρσ_equals(args[0],\"|\"))){return results.some((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}else{return results.every((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}};if(!query.__argnames__)Object.defineProperties(query,{__argnames__:{value:[\"record\"]}});result=self.browse();if((options.limit===1||typeof options.limit===\"object\"&&ρσ_equals(options.limit,1))){if(options.index>0){return new Promise((function(){var ρσ_anonfunc=function(resolve,reject){resolve(result)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"resolve\",\"reject\"]}});return ρσ_anonfunc})())}return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var record;records=queryInverse(result._name,records,result._one2many_fields,result._fields);record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}else{return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var values,start,result,record;var result = new self.constructor(false, false);records=queryInverse(result._name,records,result._one2many_fields,result._fields);if(records[ρσ_bound_index(result._name,records)].length>1){values=records[ρσ_bound_index(result._name,records)].filter(query);if(exist(options.limit)&&ρσ_equals(type(options.limit),Number)){start=0;if(exist(options.index)&&ρσ_equals(type(options.index),Number)){start=options.index*options.limit;options.limit=(options.index+1)*options.limit}result.values=values.slice(start,options.limit)}else{result.values=values}return result}else{result=self.browse();if(options.index>0){return result}record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.search.__argnames__)Object.defineProperties(Model.prototype.search,{__argnames__:{value:[]}});Model.prototype.read=function read(){var self=this;if(self._is_env){return{}}return self._values};if(!Model.prototype.read.__argnames__)Object.defineProperties(Model.prototype.read,{__argnames__:{value:[]}});Model.prototype.adapt=function adapt(key,value){var self=this;var field;if(self._is_env){return}if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"char\",\"text\"]))){if(!exist(value)){value=\"\"}else{value=String(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"integer\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"integer\"))){value=parseInt(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"float\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"float\"))){value=parseFloat(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"boolean\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"boolean\"))){if(ρσ_in(value,ρσ_list_decorate([\"true\",\"True\"]))){value=true}else if(ρσ_in(value,ρσ_list_decorate([\"false\",\"False\",null,undefined]))){value=false}else if(ρσ_equals(type(value),String)){return new Exception(\"Not a valid Boolean\")}else{value=Boolean(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"binary\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"binary\"))){if(!checkBase64(value)){return new Exception(\"Not a valid base64\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"selection\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"selection\"))){if(!exist(value)){value=null}else if(ρσ_in(!value,dict((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].selection))){return new Exception(\"Incorrect value\")}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"date\",\"datetime\"]))){if(!exist(value)){value=null}else if(ρσ_equals(type(value),Date)){value=value.toISOString()}else if(ρσ_equals(type(value),String)){try{value=new Date(value).toISOString()}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{return new Exception(\"Can't parse Date\")}}}else{return new Exception(\"Can't parse Date\")}if(exist(value)&&((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"date\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"date\"))){value=value.split(\"T\")[0]+\"T00:00:00.000Z\"}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2one\"]))){if(!exist(value)){return null}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.id}else if(ρσ_in(type(value),ρσ_list_decorate([ρσ_list_constructor,Array]))&&value.length>0){value=value[0]}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2many\",\"one2many\"]))){if(!exist(value)){value=ρσ_list_decorate([])}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.ids}}if((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].store){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){self[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,self)]=value;(ρσ_expr_temp=self._values)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=value}if(exist((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key])){var ρσ_Iter9=(ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];ρσ_Iter9=((typeof ρσ_Iter9[Symbol.iterator]===\"function\")?(ρσ_Iter9 instanceof Map?ρσ_Iter9.keys():ρσ_Iter9):Object.keys(ρσ_Iter9));for(var ρσ_Index9 of ρσ_Iter9){field=ρσ_Index9;self[(typeof field===\"number\"&&field<0)?self.length+field:field]=value;(ρσ_expr_temp=self._values)[(typeof field===\"number\"&&field<0)?ρσ_expr_temp.length+field:field]=value}}}return value};if(!Model.prototype.adapt.__argnames__)Object.defineProperties(Model.prototype.adapt,{__argnames__:{value:[\"key\",\"value\"]}});Model.prototype.update=function update(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?update.__defaults__.values:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}var key,value,object;if(self._is_env){return}if(!exist(values)){if(self._is_singleton){values=(function(){var ρσ_Iter=self._fields,ρσ_Result={},key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;ρσ_Result[key]=(self[(typeof key===\"number\"&&key<0)?self.length+key:key])}return ρσ_Result})()}else{values={}}}var ρσ_Iter10=values;ρσ_Iter10=((typeof ρσ_Iter10[Symbol.iterator]===\"function\")?(ρσ_Iter10 instanceof Map?ρσ_Iter10.keys():ρσ_Iter10):Object.keys(ρσ_Iter10));for(var ρσ_Index10 of ρσ_Iter10){key=ρσ_Index10;value=self.adapt(key,values[(typeof key===\"number\"&&key<0)?values.length+key:key]);if(self._is_singleton){(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=value}else{var ρσ_Iter11=self._values;ρσ_Iter11=((typeof ρσ_Iter11[Symbol.iterator]===\"function\")?(ρσ_Iter11 instanceof Map?ρσ_Iter11.keys():ρσ_Iter11):Object.keys(ρσ_Iter11));for(var ρσ_Index11 of ρσ_Iter11){object=ρσ_Index11;object[(typeof key===\"number\"&&key<0)?object.length+key:key]=value}}}};if(!Model.prototype.update.__defaults__)Object.defineProperties(Model.prototype.update,{__defaults__:{value:{values:false}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\"]}});Model.prototype.queue=function queue(method){var self=this;var records;if(self._is_env||!exist(self)){return}records=self.__iter__();var index = 0;function next(){index += 1;if(index<records.length&&exist(records[(typeof index===\"number\"&&index<0)?records.length+index:index])){return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)}return self};return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)};if(!Model.prototype.queue.__argnames__)Object.defineProperties(Model.prototype.queue,{__argnames__:{value:[\"method\"]}});Model.prototype.create=function create(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.values:arguments[0];\nvar is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}self.update();if(!exist(values)){values=self.read()}else{merge(self.read(),values)}if(self._is_env){self=self.browse();self.update(values)}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/create\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There is some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}ρσ_delitem(values,\"id\");ρσ_delitem(values,\"rev\");ρσ_delitem(values,\"_id\");ρσ_delitem(values,\"_rev\");return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(record){self.values=record[ρσ_bound_index(self._name,record)][0];return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())};if(!Model.prototype.create.__defaults__)Object.defineProperties(Model.prototype.create,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.write=function write(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}if(!exist(self.id)&&!exist(self.ids)){return}self.update();if(!exist(values)){if(!self._is_singleton){return}values=self.read()}else{self.update(values);values=self.read()}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/write\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=self.__iter__(),ρσ_Result=[],record;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){record=ρσ_Index;ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There are some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){return db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){delete values._id;delete values._rev;delete values.rev;values.rev=record._rev;return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(result){self.values=values;return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{return self.queue((function(){var ρσ_anonfunc=function(record,next){return record.write().then((function(){var ρσ_anonfunc=function(result){return next()};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\",\"next\"]}});return ρσ_anonfunc})())}return self};if(!Model.prototype.write.__defaults__)Object.defineProperties(Model.prototype.write,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.unlink=function unlink(){var self=this;var is_client=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?unlink.__defaults__.is_client:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var value;if(!exist(self.id)&&!exist(self.ids)){return}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/unlink\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=self.__iter__(),ρσ_Result=[],record;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){record=ρσ_Index;ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){return true};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return false};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){db.remove(record)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{var ρσ_Iter12=self._values;ρσ_Iter12=((typeof ρσ_Iter12[Symbol.iterator]===\"function\")?(ρσ_Iter12 instanceof Map?ρσ_Iter12.keys():ρσ_Iter12):Object.keys(ρσ_Iter12));for(var ρσ_Index12 of ρσ_Iter12){value=ρσ_Index12;value[\"_deleted\"]=true}db.bulkDocs(self._values)}return true};if(!Model.prototype.unlink.__defaults__)Object.defineProperties(Model.prototype.unlink,{__defaults__:{value:{is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"is_client\"]}});Model.prototype.with_context=function with_context(){var self=this;var kwargs=arguments[arguments.length-1];if(kwargs===null||typeof kwargs!==\"object\"||kwargs[ρσ_kwargs_symbol]!==true)kwargs={};var key;var ρσ_Iter13=kwargs;ρσ_Iter13=((typeof ρσ_Iter13[Symbol.iterator]===\"function\")?(ρσ_Iter13 instanceof Map?ρσ_Iter13.keys():ρσ_Iter13):Object.keys(ρσ_Iter13));for(var ρσ_Index13 of ρσ_Iter13){key=ρσ_Index13;(ρσ_expr_temp=self.env.context)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=kwargs[(typeof key===\"number\"&&key<0)?kwargs.length+key:key]}return self};if(!Model.prototype.with_context.__handles_kwarg_interpolation__)Object.defineProperties(Model.prototype.with_context,{__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[]}});Model.prototype.__repr__=function __repr__(){return\"<\"+__name__+\".\"+this.constructor.name+\" #\"+this.ρσ_object_id+\">\"};Model.prototype.__str__=function __str__(){return this.__repr__()};Object.defineProperty(Model.prototype,\"__bases__\",{value:[]});Object.defineProperty(Model.prototype,\"__doc__\",{value:\"def __super__(self):\\ninherited = v'new self.inherited_constructor(self._is_env, self._is_singleton)'\\ninherited.values = self.values\\nreturn inherited\"});Model.prototype._name=undefined;Model.prototype._inherit=false;ρσ_modules[\"orm.models\"].env=env;ρσ_modules[\"orm.models\"].schemas=schemas;ρσ_modules[\"orm.models\"].raw_models=raw_models;ρσ_modules[\"orm.models\"].queryInverse=queryInverse;ρσ_modules[\"orm.models\"].Model=Model",
		"beautify:false keep_docstrings:false js_version:5": "var env,schemas,raw_models;var fields=ρσ_modules[\"orm.fields\"];var exist=ρσ_modules[\"orm.tools\"].exist;var keys=ρσ_modules[\"orm.tools\"].keys;var merge=ρσ_modules[\"orm.tools\"].merge;var copy=ρσ_modules[\"orm.tools\"].copy;var dict=ρσ_modules[\"orm.tools\"].dict;var checkBase64=ρσ_modules[\"orm.tools\"].checkBase64;var configuration=ρσ_modules[\"orm.tools\"].configuration;var ajax=ρσ_modules[\"orm.tools\"].ajax;var array=ρσ_modules[\"orm.tools\"].array;var exception=ρσ_modules[\"orm.tools\"].exception;var warning=ρσ_modules[\"orm.tools\"].warning;var db=ρσ_modules[\"orm.pouchdb\"].db;env={};schemas={};raw_models={};function queryInverse(field_type,records,fields,_fields){var result,field,record;var ρσ_Iter0=ρσ_Iterable(records[(typeof field_type===\"number\"&&field_type<0)?records.length+field_type:field_type]);for(var ρσ_Index0=0;ρσ_Index0<ρσ_Iter0.length;ρσ_Index0++){record=ρσ_Iter0[ρσ_Index0];var ρσ_Iter1=ρσ_Iterable(fields);for(var ρσ_Index1=0;ρσ_Index1<ρσ_Iter1.length;ρσ_Index1++){field=ρσ_Iter1[ρσ_Index1];record[(typeof field===\"number\"&&field<0)?record.length+field:field]=ρσ_list_decorate([]);var ρσ_Iter2=ρσ_Iterable(records[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].relation,records)]);for(var ρσ_Index2=0;ρσ_Index2<ρσ_Iter2.length;ρσ_Index2++){result=ρσ_Iter2[ρσ_Index2];if((result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===record.id||typeof result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===\"object\"&&ρσ_equals(result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)],record.id))){record[(typeof field===\"number\"&&field<0)?record.length+field:field].push(result.id)}}}}return records};if(!queryInverse.__argnames__)Object.defineProperties(queryInverse,{__argnames__:{value:[\"field_type\",\"records\",\"fields\",\"_fields\"]}});function Model(){if(this.ρσ_object_id===undefined)Object.defineProperty(this,\"ρσ_object_id\",{\"value\":++ρσ_object_counter});Model.prototype.__init__.apply(this,arguments)}Model.prototype.__init__=function __init__(_is_env,_is_singleton){var self=this;var newmodel,oldconstructor,models,key,raw_model,schema,reserved,valid_fields,relation;self._fields={};self._values={};self._related={};self._one2many_fields=ρσ_list_decorate([]);self._is_env=((_is_env!==undefined&&(typeof _is_env!==\"object\"||ρσ_not_equals(_is_env,undefined))))?_is_env:false;self._is_singleton=((_is_singleton!==undefined&&(typeof _is_singleton!==\"object\"||ρσ_not_equals(_is_singleton,undefined))))?_is_singleton:false;self._inherited_keys=ρσ_list_decorate([]);if(exist(self._inherit)&&exist(raw_models[ρσ_bound_index(self._inherit,raw_models)])&&(env[ρσ_bound_index(self._inherit,env)]!==true&&(typeof env[ρσ_bound_index(self._inherit,env)]!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._inherit,env)],true)))){if(!exist(self._name)){self._name=self._inherit}newmodel=self;oldconstructor=self.constructor;models=raw_models[ρσ_bound_index(newmodel._inherit,raw_models)];if(!(ρσ_in(oldconstructor,models))){models.push(oldconstructor)}var ρσ_Iter3=ρσ_Iterable(models);for(var ρσ_Index3=0;ρσ_Index3<ρσ_Iter3.length;ρσ_Index3++){raw_model=ρσ_Iter3[ρσ_Index3];var ρσ_Iter4=ρσ_Iterable(Object.getOwnPropertyNames(raw_model.prototype));for(var ρσ_Index4=0;ρσ_Index4<ρσ_Iter4.length;ρσ_Index4++){key=ρσ_Iter4[ρσ_Index4];if(ρσ_not_equals(key.slice(0,2),\"__\")&&!(ρσ_in(key,ρσ_list_decorate([\"_inherit\",\"inherited_constructor\",\"values\"])))){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=raw_model.prototype)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];self._inherited_keys.push(key)}}}self._name=newmodel._name;self._is_env=false;if(exist(env[ρσ_bound_index(self._name,env)])&&(env[ρσ_bound_index(self._name,env)].constructor!==self.constructor&&(typeof env[ρσ_bound_index(self._name,env)].constructor!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._name,env)].constructor,self.constructor)))){ρσ_delitem(env,self._name)}}if(!(ρσ_in(\"Model\",env))){env[\"Model\"]=Model}if(!(ρσ_in(\"context\",env))){env[\"context\"]={}}if(!exist(env[ρσ_bound_index(self._name,env)])){env[ρσ_bound_index(self._name,env)]=true;env[self._name] = new self.constructor(_is_env=true);env[ρσ_bound_index(self._name,env)]._is_env=true}self.env=env;if(self._is_env){return}schema=(function(){var ρσ_d={};ρσ_d[\"singular\"]=self._name;ρσ_d[\"plural\"]=self._name;return ρσ_d}).call(this);schemas[ρσ_bound_index(self._name,schemas)]=schema;reserved=ρσ_list_decorate([\"id\",\"_id\",\"rev\",\"_rev\",\"ids\"]);if(self._is_singleton){self.id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID\",related:\"_id\",store:true})]);self._id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID (Raw)\"})])}self._fields.ids=ρσ_interpolate_kwargs.call(fields,fields.Data,[ρσ_desugar_kwargs({string:\"IDs\"})]);self.rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\",related:\"_rev\",store:true})]);self._rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\"})]);valid_fields=(function(){var ρσ_Iter=ρσ_Iterable(Object.getOwnPropertyNames(self.constructor.prototype)),ρσ_Result=[],key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];if((key[0]!==\"_\"&&(typeof key[0]!==\"object\"||ρσ_not_equals(key[0],\"_\")))&&!(ρσ_in(key,ρσ_list_decorate([\"constructor\",\"env\",\"values\"])))){ρσ_Result.push(key)}}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})().concat(reserved).concat(self._inherited_keys);var ρσ_Iter5=ρσ_Iterable(valid_fields);for(var ρσ_Index5=0;ρσ_Index5<ρσ_Iter5.length;ρσ_Index5++){key=ρσ_Iter5[ρσ_Index5];if(!exist(self[(typeof key===\"number\"&&key<0)?self.length+key:key])||ρσ_not_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)||ρσ_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)&&!(ρσ_in(\"compute\",self[(typeof key===\"number\"&&key<0)?self.length+key:key]))){continue}if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2many\",\"many2many\",\"one2one\"]))){if(!schema.relations){schema.relations={}}relation=\"belongsTo\";if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"one2many\",\"many2many\"]))){relation=\"hasMany\"}if((self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"one2many\"&&(typeof self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"object\"||ρσ_not_equals(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,\"one2many\")))){(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this)}else{(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;ρσ_d[\"queryInverse\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].inverse;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this);self._one2many_fields.push(key)}if((type===\"belongsTo\"||typeof type===\"object\"&&ρσ_equals(type,\"belongsTo\"))){db.createIndex((function(){var ρσ_d={};ρσ_d[\"index\"]=(function(){var ρσ_d={};ρσ_d[\"fields\"]=ρσ_list_decorate([\"data.\"+key,\"_id\"]);return ρσ_d}).call(this);return ρσ_d}).call(this))}}(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];if(self._is_singleton){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){if(!exist((ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)])){(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=ρσ_list_decorate([])}(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)].push(key)}self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].default;(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];\"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\"}}if(exist(self._fields)){(ρσ_expr_temp=self.env)[ρσ_bound_index(self._name,ρσ_expr_temp)]._fields=self._fields}try{db.setSchema((function(){var ρσ_Iter=ρσ_Iterable(schemas),ρσ_Result=[],key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];ρσ_Result.push(schemas[(typeof key===\"number\"&&key<0)?schemas.length+key:key])}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})())}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{}}if(exist(self._name)){if(!exist(raw_models[ρσ_bound_index(self._name,raw_models)])){raw_models[ρσ_bound_index(self._name,raw_models)]=ρσ_list_decorate([])}if(!(ρσ_in(self.constructor,raw_models[ρσ_bound_index(self._name,raw_models)]))){raw_models[ρσ_bound_index(self._name,raw_models)].push(self.constructor)}}if(ρσ_in(\"values\",Object.getOwnPropertyNames(self))){return}Object.defineProperty(self,\"ids\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_singleton){return ρσ_list_decorate([self.id])}else{return(function(){var ρσ_Iter=ρσ_Iterable(self.values),ρσ_Result=[],object;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){object=ρσ_Iter[ρσ_Index];ρσ_Result.push(object.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})()}};ρσ_d[\"set\"]=function(){return};return ρσ_d}).call(this));Object.defineProperty(self,\"values\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){return self._values};ρσ_d[\"set\"]=(function(){var ρσ_anonfunc=function(newvalue){var key;if(!exist(newvalue)){return}if(self._is_singleton){self._values=merge(self._values,newvalue);var ρσ_Iter6=ρσ_Iterable(self._fields);for(var ρσ_Index6=0;ρσ_Index6<ρσ_Iter6.length;ρσ_Index6++){key=ρσ_Iter6[ρσ_Index6];if(ρσ_in(key,newvalue)){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=self.adapt(key,newvalue[(typeof key===\"number\"&&key<0)?newvalue.length+key:key])}}}else{self._values=newvalue}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"newvalue\"]}});return ρσ_anonfunc})();return ρσ_d}).call(this));Object.defineProperty(self,\"length\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_env){return 0}else if(self._is_singleton){if(!exist(self.id)||!exist(self.values)){return 0}return 1}else{return self._values.length}};return ρσ_d}).call(this))};if(!Model.prototype.__init__.__argnames__)Object.defineProperties(Model.prototype.__init__,{__argnames__:{value:[\"_is_env\",\"_is_singleton\"]}});Model.__argnames__=Model.prototype.__init__.__argnames__;Model.__handles_kwarg_interpolation__=Model.prototype.__init__.__handles_kwarg_interpolation__;Model.prototype.__iter__=function __iter__(){var self=this;var lists,result,value;if(self._is_env||self.length<1){return ρσ_list_decorate([])}else if(self._is_singleton){return ρσ_list_decorate([self])}lists=ρσ_list_decorate([]);var ρσ_Iter7=ρσ_Iterable(self.values);for(var ρσ_Index7=0;ρσ_Index7<ρσ_Iter7.length;ρσ_Index7++){value=ρσ_Iter7[ρσ_Index7];result=self.browse();result.values=value;lists.push(result)}return lists};if(!Model.prototype.__iter__.__argnames__)Object.defineProperties(Model.prototype.__iter__,{__argnames__:{value:[]}});Model.prototype[ρσ_iterator_symbol]=Model.prototype.__iter__;Model.prototype.__view__=function __view__(view,view_type){var self=this;return view};if(!Model.prototype.__view__.__argnames__)Object.defineProperties(Model.prototype.__view__,{__argnames__:{value:[\"view\",\"view_type\"]}});Model.prototype.browse=function browse(){var self=this;var ids=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.ids:arguments[0];var is_singleton=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_singleton:arguments[1];var is_client=(arguments[2]===undefined||(2===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_client:arguments[2];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"ids\")){ids=ρσ_kwargs_obj.ids}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_singleton\")){is_singleton=ρσ_kwargs_obj.is_singleton}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var result;if(!exist(ids)){return new self.constructor(false, is_singleton)}else if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/browse\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=ids;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;console.log(result);record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;if(exist(record)){ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({ids:ids,is_client:false})]).then((function(){var ρσ_anonfunc=function(records){if(exist(records)){ρσ_interpolate_kwargs.call(records,records.write,[result.values].concat([ρσ_desugar_kwargs({is_client:false})]))}else{delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){console.log(error);delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.browse,[ids].concat([ρσ_desugar_kwargs({is_client:false})]))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}else if(ρσ_in(type(ids),ρσ_list_decorate([ρσ_list_constructor,Array]))){if(ids.length>1){var result = new self.constructor(false, false);return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{ids=ids[0]}}if(ρσ_equals(type(ids),String)){result=self.browse();return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)][0];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.browse.__defaults__)Object.defineProperties(Model.prototype.browse,{__defaults__:{value:{ids:false,is_singleton:true,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"ids\",\"is_singleton\",\"is_client\"]}});Model.prototype.search=function search(){var self=this;var args,options,result;args=Array.prototype.slice.call(arguments);options=copy(self.env.context);if((options.is_client===undefined||typeof options.is_client===\"object\"&&ρσ_equals(options.is_client,undefined))){options.is_client=configuration.client}if(exist(self.env.context.active_limit)){options.limit=self.env.context.active_limit}if(exist(self.env.context.active_index)){options.index=self.env.context.active_index}if(exist(options.is_client)){delete options.is_client;return ajax(\"post\",\"json\",configuration.url+\"/api/search\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"args\"]=args;ρσ_d[\"options\"]=options;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;self.browse(record.ids);return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.with_context,[ρσ_desugar_kwargs({is_client:false})]).search(args)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}function query(record){var results,arg;results=ρσ_list_decorate([]);var ρσ_Iter8=ρσ_Iterable(args);for(var ρσ_Index8=0;ρσ_Index8<ρσ_Iter8.length;ρσ_Index8++){arg=ρσ_Iter8[ρσ_Index8];if(!arg||ρσ_in(str(arg),ρσ_list_decorate([\"|\",\"[]\"]))){continue}if((arg[1]===\"=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"=\"))){results.push((record[ρσ_bound_index(arg[0],record)]===arg[2]||typeof record[ρσ_bound_index(arg[0],record)]===\"object\"&&ρσ_equals(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\">\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">\"))){results.push(record[ρσ_bound_index(arg[0],record)]>arg[2])}else if((arg[1]===\">=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">=\"))){results.push(record[ρσ_bound_index(arg[0],record)]>=arg[2])}else if((arg[1]===\"<\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<\"))){results.push(record[ρσ_bound_index(arg[0],record)]<arg[2])}else if((arg[1]===\"<=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<=\"))){results.push(record[ρσ_bound_index(arg[0],record)]<=arg[2])}else if((arg[1]===\"in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"in\"))){results.push(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2]))}else if((arg[1]===\"not in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"not in\"))){results.push(!(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\"like\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"like\"))){results.push(ρσ_in(arg[2],record[ρσ_bound_index(arg[0],record)]))}else if((arg[1]===\"ilike\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"ilike\"))){results.push(ρσ_in(str(arg[2]).toLowerCase(),str(record[ρσ_bound_index(arg[0],record)]).toLowerCase()))}}if(!exist(args)||!exist(args[0])){return true}else if((args[0]===\"|\"||typeof args[0]===\"object\"&&ρσ_equals(args[0],\"|\"))){return results.some((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}else{return results.every((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}};if(!query.__argnames__)Object.defineProperties(query,{__argnames__:{value:[\"record\"]}});result=self.browse();if((options.limit===1||typeof options.limit===\"object\"&&ρσ_equals(options.limit,1))){if(options.index>0){return new Promise((function(){var ρσ_anonfunc=function(resolve,reject){resolve(result)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"resolve\",\"reject\"]}});return ρσ_anonfunc})())}return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var record;records=queryInverse(result._name,records,result._one2many_fields,result._fields);record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}else{return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var values,start,result,record;var result = new self.constructor(false, false);records=queryInverse(result._name,records,result._one2many_fields,result._fields);if(records[ρσ_bound_index(result._name,records)].length>1){values=records[ρσ_bound_index(result._name,records)].filter(query);if(exist(options.limit)&&ρσ_equals(type(options.limit),Number)){start=0;if(exist(options.index)&&ρσ_equals(type(options.index),Number)){start=options.index*options.limit;options.limit=(options.index+1)*options.limit}result.values=values.slice(start,options.limit)}else{result.values=values}return result}else{result=self.browse();if(options.index>0){return result}record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.search.__argnames__)Object.defineProperties(Model.prototype.search,{__argnames__:{value:[]}});Model.prototype.read=function read(){var self=this;if(self._is_env){return{}}return self._values};if(!Model.prototype.read.__argnames__)Object.defineProperties(Model.prototype.read,{__argnames__:{value:[]}});Model.prototype.adapt=function adapt(key,value){var self=this;var field;if(self._is_env){return}if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"char\",\"text\"]))){if(!exist(value)){value=\"\"}else{value=String(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"integer\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"integer\"))){value=parseInt(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"float\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"float\"))){value=parseFloat(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"boolean\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"boolean\"))){if(ρσ_in(value,ρσ_list_decorate([\"true\",\"True\"]))){value=true}else if(ρσ_in(value,ρσ_list_decorate([\"false\",\"False\",null,undefined]))){value=false}else if(ρσ_equals(type(value),String)){return new Exception(\"Not a valid Boolean\")}else{value=Boolean(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"binary\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"binary\"))){if(!checkBase64(value)){return new Exception(\"Not a valid base64\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"selection\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"selection\"))){if(!exist(value)){value=null}else if(ρσ_in(!value,dict((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].selection))){return new Exception(\"Incorrect value\")}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"date\",\"datetime\"]))){if(!exist(value)){value=null}else if(ρσ_equals(type(value),Date)){value=value.toISOString()}else if(ρσ_equals(type(value),String)){try{value=new Date(value).toISOString()}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{return new Exception(\"Can't parse Date\")}}}else{return new Exception(\"Can't parse Date\")}if(exist(value)&&((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"date\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"date\"))){value=value.split(\"T\")[0]+\"T00:00:00.000Z\"}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2one\"]))){if(!exist(value)){return null}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.id}else if(ρσ_in(type(value),ρσ_list_decorate([ρσ_list_constructor,Array]))&&value.length>0){value=value[0]}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2many\",\"one2many\"]))){if(!exist(value)){value=ρσ_list_decorate([])}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.ids}}if((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].store){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){self[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,self)]=value;(ρσ_expr_temp=self._values)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=value}if(exist((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key])){var ρσ_Iter9=ρσ_Iterable((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]);for(var ρσ_Index9=0;ρσ_Index9<ρσ_Iter9.length;ρσ_Index9++){field=ρσ_Iter9[ρσ_Index9];self[(typeof field===\"number\"&&field<0)?self.length+field:field]=value;(ρσ_expr_temp=self._values)[(typeof field===\"number\"&&field<0)?ρσ_expr_temp.length+field:field]=value}}}return value};if(!Model.prototype.adapt.__argnames__)Object.defineProperties(Model.prototype.adapt,{__argnames__:{value:[\"key\",\"value\"]}});Model.prototype.update=function update(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?update.__defaults__.values:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}var key,value,object;if(self._is_env){return}if(!exist(values)){if(self._is_singleton){values=(function(){var ρσ_Iter=ρσ_Iterable(self._fields),ρσ_Result={},key;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){key=ρσ_Iter[ρσ_Index];ρσ_Result[key]=(self[(typeof key===\"number\"&&key<0)?self.length+key:key])}return ρσ_Result})()}else{values={}}}var ρσ_Iter10=ρσ_Iterable(values);for(var ρσ_Index10=0;ρσ_Index10<ρσ_Iter10.length;ρσ_Index10++){key=ρσ_Iter10[ρσ_Index10];value=self.adapt(key,values[(typeof key===\"number\"&&key<0)?values.length+key:key]);if(self._is_singleton){(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=value}else{var ρσ_Iter11=ρσ_Iterable(self._values);for(var ρσ_Index11=0;ρσ_Index11<ρσ_Iter11.length;ρσ_Index11++){object=ρσ_Iter11[ρσ_Index11];object[(typeof key===\"number\"&&key<0)?object.length+key:key]=value}}}};if(!Model.prototype.update.__defaults__)Object.defineProperties(Model.prototype.update,{__defaults__:{value:{values:false}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\"]}});Model.prototype.queue=function queue(method){var self=this;var records;if(self._is_env||!exist(self)){return}records=self.__iter__();var index = 0;function next(){index += 1;if(index<records.length&&exist(records[(typeof index===\"number\"&&index<0)?records.length+index:index])){return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)}return self};return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)};if(!Model.prototype.queue.__argnames__)Object.defineProperties(Model.prototype.queue,{__argnames__:{value:[\"method\"]}});Model.prototype.create=function create(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}self.update();if(!exist(values)){values=self.read()}else{merge(self.read(),values)}if(self._is_env){self=self.browse();self.update(values)}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/create\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);\nreturn new Exception(\"There is some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}ρσ_delitem(values,\"id\");ρσ_delitem(values,\"rev\");ρσ_delitem(values,\"_id\");ρσ_delitem(values,\"_rev\");return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(record){self.values=record[ρσ_bound_index(self._name,record)][0];return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())};if(!Model.prototype.create.__defaults__)Object.defineProperties(Model.prototype.create,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.write=function write(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}if(!exist(self.id)&&!exist(self.ids)){return}self.update();if(!exist(values)){if(!self._is_singleton){return}values=self.read()}else{self.update(values);values=self.read()}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/write\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=ρσ_Iterable(self.__iter__()),ρσ_Result=[],record;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){record=ρσ_Iter[ρσ_Index];ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There are some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){return db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){delete values._id;delete values._rev;delete values.rev;values.rev=record._rev;return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(result){self.values=values;return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{return self.queue((function(){var ρσ_anonfunc=function(record,next){return record.write().then((function(){var ρσ_anonfunc=function(result){return next()};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\",\"next\"]}});return ρσ_anonfunc})())}return self};if(!Model.prototype.write.__defaults__)Object.defineProperties(Model.prototype.write,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.unlink=function unlink(){var self=this;var is_client=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?unlink.__defaults__.is_client:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var value;if(!exist(self.id)&&!exist(self.ids)){return}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/unlink\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=ρσ_Iterable(self.__iter__()),ρσ_Result=[],record;for(var ρσ_Index=0;ρσ_Index<ρσ_Iter.length;ρσ_Index++){record=ρσ_Iter[ρσ_Index];ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){return true};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return false};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){db.remove(record)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{var ρσ_Iter12=ρσ_Iterable(self._values);for(var ρσ_Index12=0;ρσ_Index12<ρσ_Iter12.length;ρσ_Index12++){value=ρσ_Iter12[ρσ_Index12];value[\"_deleted\"]=true}db.bulkDocs(self._values)}return true};if(!Model.prototype.unlink.__defaults__)Object.defineProperties(Model.prototype.unlink,{__defaults__:{value:{is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"is_client\"]}});Model.prototype.with_context=function with_context(){var self=this;var kwargs=arguments[arguments.length-1];if(kwargs===null||typeof kwargs!==\"object\"||kwargs[ρσ_kwargs_symbol]!==true)kwargs={};var key;var ρσ_Iter13=ρσ_Iterable(kwargs);for(var ρσ_Index13=0;ρσ_Index13<ρσ_Iter13.length;ρσ_Index13++){key=ρσ_Iter13[ρσ_Index13];(ρσ_expr_temp=self.env.context)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=kwargs[(typeof key===\"number\"&&key<0)?kwargs.length+key:key]}return self};if(!Model.prototype.with_context.__handles_kwarg_interpolation__)Object.defineProperties(Model.prototype.with_context,{__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[]}});Model.prototype.__repr__=function __repr__(){return\"<\"+__name__+\".\"+this.constructor.name+\" #\"+this.ρσ_object_id+\">\"};Model.prototype.__str__=function __str__(){return this.__repr__()};Object.defineProperty(Model.prototype,\"__bases__\",{value:[]});Model.prototype._name=undefined;Model.prototype._inherit=false;ρσ_modules[\"orm.models\"].env=env;ρσ_modules[\"orm.models\"].schemas=schemas;ρσ_modules[\"orm.models\"].raw_models=raw_models;ρσ_modules[\"orm.models\"].queryInverse=queryInverse;ρσ_modules[\"orm.models\"].Model=Model",
		"beautify:false keep_docstrings:false js_version:6": "var env,schemas,raw_models;var fields=ρσ_modules[\"orm.fields\"];var exist=ρσ_modules[\"orm.tools\"].exist;var keys=ρσ_modules[\"orm.tools\"].keys;var merge=ρσ_modules[\"orm.tools\"].merge;var copy=ρσ_modules[\"orm.tools\"].copy;var dict=ρσ_modules[\"orm.tools\"].dict;var checkBase64=ρσ_modules[\"orm.tools\"].checkBase64;var configuration=ρσ_modules[\"orm.tools\"].configuration;var ajax=ρσ_modules[\"orm.tools\"].ajax;var array=ρσ_modules[\"orm.tools\"].array;var exception=ρσ_modules[\"orm.tools\"].exception;var warning=ρσ_modules[\"orm.tools\"].warning;var db=ρσ_modules[\"orm.pouchdb\"].db;env={};schemas={};raw_models={};function queryInverse(field_type,records,fields,_fields){var result,field,record;var ρσ_Iter0=records[(typeof field_type===\"number\"&&field_type<0)?records.length+field_type:field_type];ρσ_Iter0=((typeof ρσ_Iter0[Symbol.iterator]===\"function\")?(ρσ_Iter0 instanceof Map?ρσ_Iter0.keys():ρσ_Iter0):Object.keys(ρσ_Iter0));for(var ρσ_Index0 of ρσ_Iter0){record=ρσ_Index0;var ρσ_Iter1=fields;ρσ_Iter1=((typeof ρσ_Iter1[Symbol.iterator]===\"function\")?(ρσ_Iter1 instanceof Map?ρσ_Iter1.keys():ρσ_Iter1):Object.keys(ρσ_Iter1));for(var ρσ_Index1 of ρσ_Iter1){field=ρσ_Index1;record[(typeof field===\"number\"&&field<0)?record.length+field:field]=ρσ_list_decorate([]);var ρσ_Iter2=records[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].relation,records)];ρσ_Iter2=((typeof ρσ_Iter2[Symbol.iterator]===\"function\")?(ρσ_Iter2 instanceof Map?ρσ_Iter2.keys():ρσ_Iter2):Object.keys(ρσ_Iter2));for(var ρσ_Index2 of ρσ_Iter2){result=ρσ_Index2;if((result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===record.id||typeof result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)]===\"object\"&&ρσ_equals(result[ρσ_bound_index(_fields[(typeof field===\"number\"&&field<0)?_fields.length+field:field].inverse,result)],record.id))){record[(typeof field===\"number\"&&field<0)?record.length+field:field].push(result.id)}}}}return records};if(!queryInverse.__argnames__)Object.defineProperties(queryInverse,{__argnames__:{value:[\"field_type\",\"records\",\"fields\",\"_fields\"]}});function Model(){if(this.ρσ_object_id===undefined)Object.defineProperty(this,\"ρσ_object_id\",{\"value\":++ρσ_object_counter});Model.prototype.__init__.apply(this,arguments)}Model.prototype.__init__=function __init__(_is_env,_is_singleton){var self=this;var newmodel,oldconstructor,models,key,raw_model,schema,reserved,valid_fields,relation;self._fields={};self._values={};self._related={};self._one2many_fields=ρσ_list_decorate([]);self._is_env=((_is_env!==undefined&&(typeof _is_env!==\"object\"||ρσ_not_equals(_is_env,undefined))))?_is_env:false;self._is_singleton=((_is_singleton!==undefined&&(typeof _is_singleton!==\"object\"||ρσ_not_equals(_is_singleton,undefined))))?_is_singleton:false;self._inherited_keys=ρσ_list_decorate([]);if(exist(self._inherit)&&exist(raw_models[ρσ_bound_index(self._inherit,raw_models)])&&(env[ρσ_bound_index(self._inherit,env)]!==true&&(typeof env[ρσ_bound_index(self._inherit,env)]!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._inherit,env)],true)))){if(!exist(self._name)){self._name=self._inherit}newmodel=self;oldconstructor=self.constructor;models=raw_models[ρσ_bound_index(newmodel._inherit,raw_models)];if(!(ρσ_in(oldconstructor,models))){models.push(oldconstructor)}var ρσ_Iter3=models;ρσ_Iter3=((typeof ρσ_Iter3[Symbol.iterator]===\"function\")?(ρσ_Iter3 instanceof Map?ρσ_Iter3.keys():ρσ_Iter3):Object.keys(ρσ_Iter3));for(var ρσ_Index3 of ρσ_Iter3){raw_model=ρσ_Index3;var ρσ_Iter4=Object.getOwnPropertyNames(raw_model.prototype);ρσ_Iter4=((typeof ρσ_Iter4[Symbol.iterator]===\"function\")?(ρσ_Iter4 instanceof Map?ρσ_Iter4.keys():ρσ_Iter4):Object.keys(ρσ_Iter4));for(var ρσ_Index4 of ρσ_Iter4){key=ρσ_Index4;if(ρσ_not_equals(key.slice(0,2),\"__\")&&!(ρσ_in(key,ρσ_list_decorate([\"_inherit\",\"inherited_constructor\",\"values\"])))){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=raw_model.prototype)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];self._inherited_keys.push(key)}}}self._name=newmodel._name;self._is_env=false;if(exist(env[ρσ_bound_index(self._name,env)])&&(env[ρσ_bound_index(self._name,env)].constructor!==self.constructor&&(typeof env[ρσ_bound_index(self._name,env)].constructor!==\"object\"||ρσ_not_equals(env[ρσ_bound_index(self._name,env)].constructor,self.constructor)))){ρσ_delitem(env,self._name)}}if(!(ρσ_in(\"Model\",env))){env[\"Model\"]=Model}if(!(ρσ_in(\"context\",env))){env[\"context\"]={}}if(!exist(env[ρσ_bound_index(self._name,env)])){env[ρσ_bound_index(self._name,env)]=true;env[self._name] = new self.constructor(_is_env=true);env[ρσ_bound_index(self._name,env)]._is_env=true}self.env=env;if(self._is_env){return}schema=(function(){var ρσ_d={};ρσ_d[\"singular\"]=self._name;ρσ_d[\"plural\"]=self._name;return ρσ_d}).call(this);schemas[ρσ_bound_index(self._name,schemas)]=schema;reserved=ρσ_list_decorate([\"id\",\"_id\",\"rev\",\"_rev\",\"ids\"]);if(self._is_singleton){self.id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID\",related:\"_id\",store:true})]);self._id=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"ID (Raw)\"})])}self._fields.ids=ρσ_interpolate_kwargs.call(fields,fields.Data,[ρσ_desugar_kwargs({string:\"IDs\"})]);self.rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\",related:\"_rev\",store:true})]);self._rev=ρσ_interpolate_kwargs.call(fields,fields.Char,[ρσ_desugar_kwargs({string:\"DB Revision Number\"})]);valid_fields=(function(){var ρσ_Iter=Object.getOwnPropertyNames(self.constructor.prototype),ρσ_Result=[],key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;if((key[0]!==\"_\"&&(typeof key[0]!==\"object\"||ρσ_not_equals(key[0],\"_\")))&&!(ρσ_in(key,ρσ_list_decorate([\"constructor\",\"env\",\"values\"])))){ρσ_Result.push(key)}}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})().concat(reserved).concat(self._inherited_keys);var ρσ_Iter5=valid_fields;ρσ_Iter5=((typeof ρσ_Iter5[Symbol.iterator]===\"function\")?(ρσ_Iter5 instanceof Map?ρσ_Iter5.keys():ρσ_Iter5):Object.keys(ρσ_Iter5));for(var ρσ_Index5 of ρσ_Iter5){key=ρσ_Index5;if(!exist(self[(typeof key===\"number\"&&key<0)?self.length+key:key])||ρσ_not_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)||ρσ_equals(type(self[(typeof key===\"number\"&&key<0)?self.length+key:key]),Object)&&!(ρσ_in(\"compute\",self[(typeof key===\"number\"&&key<0)?self.length+key:key]))){continue}if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2many\",\"many2many\",\"one2one\"]))){if(!schema.relations){schema.relations={}}relation=\"belongsTo\";if(ρσ_in(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,ρσ_list_decorate([\"one2many\",\"many2many\"]))){relation=\"hasMany\"}if((self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"one2many\"&&(typeof self[(typeof key===\"number\"&&key<0)?self.length+key:key].type!==\"object\"||ρσ_not_equals(self[(typeof key===\"number\"&&key<0)?self.length+key:key].type,\"one2many\")))){(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this)}else{(ρσ_expr_temp=schema.relations)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=(function(){var ρσ_d={};ρσ_d[relation]=(function(){var ρσ_d={};ρσ_d[\"type\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].relation;ρσ_d[\"options\"]=(function(){var ρσ_d={};ρσ_d[\"async\"]=false;ρσ_d[\"queryInverse\"]=self[(typeof key===\"number\"&&key<0)?self.length+key:key].inverse;return ρσ_d}).call(this);return ρσ_d}).call(this);return ρσ_d}).call(this);self._one2many_fields.push(key)}if((type===\"belongsTo\"||typeof type===\"object\"&&ρσ_equals(type,\"belongsTo\"))){db.createIndex((function(){var ρσ_d={};ρσ_d[\"index\"]=(function(){var ρσ_d={};ρσ_d[\"fields\"]=ρσ_list_decorate([\"data.\"+key,\"_id\"]);return ρσ_d}).call(this);return ρσ_d}).call(this))}}(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];if(self._is_singleton){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){if(!exist((ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)])){(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=ρσ_list_decorate([])}(ρσ_expr_temp=self._related)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)].push(key)}self[(typeof key===\"number\"&&key<0)?self.length+key:key]=(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].default;(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=self[(typeof key===\"number\"&&key<0)?self.length+key:key];\"Object.defineProperty(self, key, {\\n               'get': def(): return self._values[key]\\n               ,\\n               'set': def(value): self._values[key] = self.adapt(key, value)\\n               }})\"}}if(exist(self._fields)){(ρσ_expr_temp=self.env)[ρσ_bound_index(self._name,ρσ_expr_temp)]._fields=self._fields}try{db.setSchema((function(){var ρσ_Iter=schemas,ρσ_Result=[],key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;ρσ_Result.push(schemas[(typeof key===\"number\"&&key<0)?schemas.length+key:key])}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})())}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{}}if(exist(self._name)){if(!exist(raw_models[ρσ_bound_index(self._name,raw_models)])){raw_models[ρσ_bound_index(self._name,raw_models)]=ρσ_list_decorate([])}if(!(ρσ_in(self.constructor,raw_models[ρσ_bound_index(self._name,raw_models)]))){raw_models[ρσ_bound_index(self._name,raw_models)].push(self.constructor)}}if(ρσ_in(\"values\",Object.getOwnPropertyNames(self))){return}Object.defineProperty(self,\"ids\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_singleton){return ρσ_list_decorate([self.id])}else{return(function(){var ρσ_Iter=self.values,ρσ_Result=[],object;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){object=ρσ_Index;ρσ_Result.push(object.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})()}};ρσ_d[\"set\"]=function(){return};return ρσ_d}).call(this));Object.defineProperty(self,\"values\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){return self._values};ρσ_d[\"set\"]=(function(){var ρσ_anonfunc=function(newvalue){var key;if(!exist(newvalue)){return}if(self._is_singleton){self._values=merge(self._values,newvalue);var ρσ_Iter6=self._fields;ρσ_Iter6=((typeof ρσ_Iter6[Symbol.iterator]===\"function\")?(ρσ_Iter6 instanceof Map?ρσ_Iter6.keys():ρσ_Iter6):Object.keys(ρσ_Iter6));for(var ρσ_Index6 of ρσ_Iter6){key=ρσ_Index6;if(ρσ_in(key,newvalue)){self[(typeof key===\"number\"&&key<0)?self.length+key:key]=self.adapt(key,newvalue[(typeof key===\"number\"&&key<0)?newvalue.length+key:key])}}}else{self._values=newvalue}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"newvalue\"]}});return ρσ_anonfunc})();return ρσ_d}).call(this));Object.defineProperty(self,\"length\",(function(){var ρσ_d={};ρσ_d[\"get\"]=function(){if(self._is_env){return 0}else if(self._is_singleton){if(!exist(self.id)||!exist(self.values)){return 0}return 1}else{return self._values.length}};return ρσ_d}).call(this))};if(!Model.prototype.__init__.__argnames__)Object.defineProperties(Model.prototype.__init__,{__argnames__:{value:[\"_is_env\",\"_is_singleton\"]}});Model.__argnames__=Model.prototype.__init__.__argnames__;Model.__handles_kwarg_interpolation__=Model.prototype.__init__.__handles_kwarg_interpolation__;Model.prototype.__iter__=function __iter__(){var self=this;var lists,result,value;if(self._is_env||self.length<1){return ρσ_list_decorate([])}else if(self._is_singleton){return ρσ_list_decorate([self])}lists=ρσ_list_decorate([]);var ρσ_Iter7=self.values;ρσ_Iter7=((typeof ρσ_Iter7[Symbol.iterator]===\"function\")?(ρσ_Iter7 instanceof Map?ρσ_Iter7.keys():ρσ_Iter7):Object.keys(ρσ_Iter7));for(var ρσ_Index7 of ρσ_Iter7){value=ρσ_Index7;result=self.browse();result.values=value;lists.push(result)}return lists};if(!Model.prototype.__iter__.__argnames__)Object.defineProperties(Model.prototype.__iter__,{__argnames__:{value:[]}});Model.prototype[ρσ_iterator_symbol]=Model.prototype.__iter__;Model.prototype.__view__=function __view__(view,view_type){var self=this;return view};if(!Model.prototype.__view__.__argnames__)Object.defineProperties(Model.prototype.__view__,{__argnames__:{value:[\"view\",\"view_type\"]}});Model.prototype.browse=function browse(){var self=this;var ids=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.ids:arguments[0];var is_singleton=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_singleton:arguments[1];var is_client=(arguments[2]===undefined||(2===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?browse.__defaults__.is_client:arguments[2];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"ids\")){ids=ρσ_kwargs_obj.ids}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_singleton\")){is_singleton=ρσ_kwargs_obj.is_singleton}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var result;if(!exist(ids)){return new self.constructor(false, is_singleton)}else if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/browse\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=ids;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;console.log(result);record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;if(exist(record)){ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({ids:ids,is_client:false})]).then((function(){var ρσ_anonfunc=function(records){if(exist(records)){ρσ_interpolate_kwargs.call(records,records.write,[result.values].concat([ρσ_desugar_kwargs({is_client:false})]))}else{delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){console.log(error);delete result.values.rev;delete result.values._rev;delete result.values._id;db.rel.save(record._name,result.values)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.browse,[ids].concat([ρσ_desugar_kwargs({is_client:false})]))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}else if(ρσ_in(type(ids),ρσ_list_decorate([ρσ_list_constructor,Array]))){if(ids.length>1){var result = new self.constructor(false, false);return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{ids=ids[0]}}if(ρσ_equals(type(ids),String)){result=self.browse();return db.rel.find(result._name,ids).then((function(){var ρσ_anonfunc=function(record){record=queryInverse(result._name,record,result._one2many_fields,result._fields);result.values=record[ρσ_bound_index(result._name,record)][0];return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.browse.__defaults__)Object.defineProperties(Model.prototype.browse,{__defaults__:{value:{ids:false,is_singleton:true,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"ids\",\"is_singleton\",\"is_client\"]}});Model.prototype.search=function search(){var self=this;var args,options,result;args=Array.prototype.slice.call(arguments);options=copy(self.env.context);if((options.is_client===undefined||typeof options.is_client===\"object\"&&ρσ_equals(options.is_client,undefined))){options.is_client=configuration.client}if(exist(self.env.context.active_limit)){options.limit=self.env.context.active_limit}if(exist(self.env.context.active_index)){options.index=self.env.context.active_index}if(exist(options.is_client)){delete options.is_client;return ajax(\"post\",\"json\",configuration.url+\"/api/search\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"args\"]=args;ρσ_d[\"options\"]=options;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){var record;record=ρσ_interpolate_kwargs.call(self,self.browse,[ρσ_desugar_kwargs({is_singleton:!(ρσ_in(type(result.values),array))})]);record.values=result.values;self.browse(record.ids);return record};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return ρσ_interpolate_kwargs.call(self,self.with_context,[ρσ_desugar_kwargs({is_client:false})]).search(args)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}function query(record){var results,arg;results=ρσ_list_decorate([]);var ρσ_Iter8=args;ρσ_Iter8=((typeof ρσ_Iter8[Symbol.iterator]===\"function\")?(ρσ_Iter8 instanceof Map?ρσ_Iter8.keys():ρσ_Iter8):Object.keys(ρσ_Iter8));for(var ρσ_Index8 of ρσ_Iter8){arg=ρσ_Index8;if(!arg||ρσ_in(str(arg),ρσ_list_decorate([\"|\",\"[]\"]))){continue}if((arg[1]===\"=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"=\"))){results.push((record[ρσ_bound_index(arg[0],record)]===arg[2]||typeof record[ρσ_bound_index(arg[0],record)]===\"object\"&&ρσ_equals(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\">\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">\"))){results.push(record[ρσ_bound_index(arg[0],record)]>arg[2])}else if((arg[1]===\">=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\">=\"))){results.push(record[ρσ_bound_index(arg[0],record)]>=arg[2])}else if((arg[1]===\"<\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<\"))){results.push(record[ρσ_bound_index(arg[0],record)]<arg[2])}else if((arg[1]===\"<=\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"<=\"))){results.push(record[ρσ_bound_index(arg[0],record)]<=arg[2])}else if((arg[1]===\"in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"in\"))){results.push(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2]))}else if((arg[1]===\"not in\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"not in\"))){results.push(!(ρσ_in(record[ρσ_bound_index(arg[0],record)],arg[2])))}else if((arg[1]===\"like\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"like\"))){results.push(ρσ_in(arg[2],record[ρσ_bound_index(arg[0],record)]))}else if((arg[1]===\"ilike\"||typeof arg[1]===\"object\"&&ρσ_equals(arg[1],\"ilike\"))){results.push(ρσ_in(str(arg[2]).toLowerCase(),str(record[ρσ_bound_index(arg[0],record)]).toLowerCase()))}}if(!exist(args)||!exist(args[0])){return true}else if((args[0]===\"|\"||typeof args[0]===\"object\"&&ρσ_equals(args[0],\"|\"))){return results.some((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}else{return results.every((function(){var ρσ_anonfunc=function(result){return(result===true||typeof result===\"object\"&&ρσ_equals(result,true))};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())}};if(!query.__argnames__)Object.defineProperties(query,{__argnames__:{value:[\"record\"]}});result=self.browse();if((options.limit===1||typeof options.limit===\"object\"&&ρσ_equals(options.limit,1))){if(options.index>0){return new Promise((function(){var ρσ_anonfunc=function(resolve,reject){resolve(result)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"resolve\",\"reject\"]}});return ρσ_anonfunc})())}return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var record;records=queryInverse(result._name,records,result._one2many_fields,result._fields);record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}else{return db.rel.find(result._name).then((function(){var ρσ_anonfunc=function(records){var values,start,result,record;var result = new self.constructor(false, false);records=queryInverse(result._name,records,result._one2many_fields,result._fields);if(records[ρσ_bound_index(result._name,records)].length>1){values=records[ρσ_bound_index(result._name,records)].filter(query);if(exist(options.limit)&&ρσ_equals(type(options.limit),Number)){start=0;if(exist(options.index)&&ρσ_equals(type(options.index),Number)){start=options.index*options.limit;options.limit=(options.index+1)*options.limit}result.values=values.slice(start,options.limit)}else{result.values=values}return result}else{result=self.browse();if(options.index>0){return result}record=records[ρσ_bound_index(result._name,records)].find(query);result.values=record;return result}};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"records\"]}});return ρσ_anonfunc})())}return result};if(!Model.prototype.search.__argnames__)Object.defineProperties(Model.prototype.search,{__argnames__:{value:[]}});Model.prototype.read=function read(){var self=this;if(self._is_env){return{}}return self._values};if(!Model.prototype.read.__argnames__)Object.defineProperties(Model.prototype.read,{__argnames__:{value:[]}});Model.prototype.adapt=function adapt(key,value){var self=this;var field;if(self._is_env){return}if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"char\",\"text\"]))){if(!exist(value)){value=\"\"}else{value=String(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"integer\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"integer\"))){value=parseInt(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"float\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"float\"))){value=parseFloat(value);if(isNaN(value)){return new Exception(\"Not a valid Number\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"boolean\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"boolean\"))){if(ρσ_in(value,ρσ_list_decorate([\"true\",\"True\"]))){value=true}else if(ρσ_in(value,ρσ_list_decorate([\"false\",\"False\",null,undefined]))){value=false}else if(ρσ_equals(type(value),String)){return new Exception(\"Not a valid Boolean\")}else{value=Boolean(value)}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"binary\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"binary\"))){if(!checkBase64(value)){return new Exception(\"Not a valid base64\")}}else if(((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"selection\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"selection\"))){if(!exist(value)){value=null}else if(ρσ_in(!value,dict((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].selection))){return new Exception(\"Incorrect value\")}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"date\",\"datetime\"]))){if(!exist(value)){value=null}else if(ρσ_equals(type(value),Date)){value=value.toISOString()}else if(ρσ_equals(type(value),String)){try{value=new Date(value).toISOString()}catch(ρσ_Exception){ρσ_last_exception=ρσ_Exception;{return new Exception(\"Can't parse Date\")}}}else{return new Exception(\"Can't parse Date\")}if(exist(value)&&((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"date\"||typeof(ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type===\"object\"&&ρσ_equals((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,\"date\"))){value=value.split(\"T\")[0]+\"T00:00:00.000Z\"}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2one\",\"one2one\"]))){if(!exist(value)){return null}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.id}else if(ρσ_in(type(value),ρσ_list_decorate([ρσ_list_constructor,Array]))&&value.length>0){value=value[0]}}else if(ρσ_in((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].type,ρσ_list_decorate([\"many2many\",\"one2many\"]))){if(!exist(value)){value=ρσ_list_decorate([])}else if((value instanceof env.Model===true||typeof value instanceof env.Model===\"object\"&&ρσ_equals(value instanceof env.Model,true))){value=value.ids}}if((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].store){if(exist((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related)){self[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,self)]=value;(ρσ_expr_temp=self._values)[ρσ_bound_index((ρσ_expr_temp=self._fields)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key].related,ρσ_expr_temp)]=value}if(exist((ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key])){var ρσ_Iter9=(ρσ_expr_temp=self._related)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key];ρσ_Iter9=((typeof ρσ_Iter9[Symbol.iterator]===\"function\")?(ρσ_Iter9 instanceof Map?ρσ_Iter9.keys():ρσ_Iter9):Object.keys(ρσ_Iter9));for(var ρσ_Index9 of ρσ_Iter9){field=ρσ_Index9;self[(typeof field===\"number\"&&field<0)?self.length+field:field]=value;(ρσ_expr_temp=self._values)[(typeof field===\"number\"&&field<0)?ρσ_expr_temp.length+field:field]=value}}}return value};if(!Model.prototype.adapt.__argnames__)Object.defineProperties(Model.prototype.adapt,{__argnames__:{value:[\"key\",\"value\"]}});Model.prototype.update=function update(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?update.__defaults__.values:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}var key,value,object;if(self._is_env){return}if(!exist(values)){if(self._is_singleton){values=(function(){var ρσ_Iter=self._fields,ρσ_Result={},key;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){key=ρσ_Index;ρσ_Result[key]=(self[(typeof key===\"number\"&&key<0)?self.length+key:key])}return ρσ_Result})()}else{values={}}}var ρσ_Iter10=values;ρσ_Iter10=((typeof ρσ_Iter10[Symbol.iterator]===\"function\")?(ρσ_Iter10 instanceof Map?ρσ_Iter10.keys():ρσ_Iter10):Object.keys(ρσ_Iter10));for(var ρσ_Index10 of ρσ_Iter10){key=ρσ_Index10;value=self.adapt(key,values[(typeof key===\"number\"&&key<0)?values.length+key:key]);if(self._is_singleton){(ρσ_expr_temp=self._values)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=value}else{var ρσ_Iter11=self._values;ρσ_Iter11=((typeof ρσ_Iter11[Symbol.iterator]===\"function\")?(ρσ_Iter11 instanceof Map?ρσ_Iter11.keys():ρσ_Iter11):Object.keys(ρσ_Iter11));for(var ρσ_Index11 of ρσ_Iter11){object=ρσ_Index11;object[(typeof key===\"number\"&&key<0)?object.length+key:key]=value}}}};if(!Model.prototype.update.__defaults__)Object.defineProperties(Model.prototype.update,{__defaults__:{value:{values:false}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\"]}});Model.prototype.queue=function queue(method){var self=this;var records;if(self._is_env||!exist(self)){return}records=self.__iter__();var index = 0;function next(){index += 1;if(index<records.length&&exist(records[(typeof index===\"number\"&&index<0)?records.length+index:index])){return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)}return self};return method(records[(typeof index===\"number\"&&index<0)?records.length+index:index],next)};if(!Model.prototype.queue.__argnames__)Object.defineProperties(Model.prototype.queue,{__argnames__:{value:[\"method\"]}});Model.prototype.create=function create(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.values:arguments[0];\nvar is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?create.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}self.update();if(!exist(values)){values=self.read()}else{merge(self.read(),values)}if(self._is_env){self=self.browse();self.update(values)}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/create\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There is some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}ρσ_delitem(values,\"id\");ρσ_delitem(values,\"rev\");ρσ_delitem(values,\"_id\");ρσ_delitem(values,\"_rev\");return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(record){self.values=record[ρσ_bound_index(self._name,record)][0];return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())};if(!Model.prototype.create.__defaults__)Object.defineProperties(Model.prototype.create,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.write=function write(){var self=this;var values=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.values:arguments[0];var is_client=(arguments[1]===undefined||(1===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?write.__defaults__.is_client:arguments[1];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"values\")){values=ρσ_kwargs_obj.values}if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}if(!exist(self.id)&&!exist(self.ids)){return}self.update();if(!exist(values)){if(!self._is_singleton){return}values=self.read()}else{self.update(values);values=self.read()}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/write\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=self.__iter__(),ρσ_Result=[],record;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){record=ρσ_Index;ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();ρσ_d[\"values\"]=values;return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){self.values=result.values;self.browse(self.id);return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){exception(error);return new Exception(\"There are some error\")};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){return db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){delete values._id;delete values._rev;delete values.rev;values.rev=record._rev;return db.rel.save(self._name,values).then((function(){var ρσ_anonfunc=function(result){self.values=values;return self};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{return self.queue((function(){var ρσ_anonfunc=function(record,next){return record.write().then((function(){var ρσ_anonfunc=function(result){return next()};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})())};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\",\"next\"]}});return ρσ_anonfunc})())}return self};if(!Model.prototype.write.__defaults__)Object.defineProperties(Model.prototype.write,{__defaults__:{value:{values:false,is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"values\",\"is_client\"]}});Model.prototype.unlink=function unlink(){var self=this;var is_client=(arguments[0]===undefined||(0===arguments.length-1&&arguments[arguments.length-1]!==null&&typeof arguments[arguments.length-1]===\"object\"&&arguments[arguments.length-1][ρσ_kwargs_symbol]===true))?unlink.__defaults__.is_client:arguments[0];var ρσ_kwargs_obj=arguments[arguments.length-1];if(ρσ_kwargs_obj===null||typeof ρσ_kwargs_obj!==\"object\"||ρσ_kwargs_obj[ρσ_kwargs_symbol]!==true)ρσ_kwargs_obj={};if(Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj,\"is_client\")){is_client=ρσ_kwargs_obj.is_client}var value;if(!exist(self.id)&&!exist(self.ids)){return}if(is_client){return ajax(\"post\",\"json\",configuration.url+\"/api/unlink\",(function(){var ρσ_d={};ρσ_d[\"login\"]=self.env.user.login;ρσ_d[\"password\"]=self.env.user.password;ρσ_d[\"encrypted\"]=true;ρσ_d[\"model\"]=self._name;ρσ_d[\"ids\"]=(function(){var ρσ_Iter=self.__iter__(),ρσ_Result=[],record;ρσ_Iter=((typeof ρσ_Iter[Symbol.iterator]===\"function\")?(ρσ_Iter instanceof Map?ρσ_Iter.keys():ρσ_Iter):Object.keys(ρσ_Iter));for(var ρσ_Index of ρσ_Iter){record=ρσ_Index;ρσ_Result.push(record.id)}ρσ_Result=ρσ_list_constructor(ρσ_Result);return ρσ_Result})();return ρσ_d}).call(this)).then((function(){var ρσ_anonfunc=function(result){return true};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"result\"]}});return ρσ_anonfunc})()).catch((function(){var ρσ_anonfunc=function(error){warning(error,true);return false};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"error\"]}});return ρσ_anonfunc})())}if(self._is_singleton){db.get(db.rel.makeDocID((function(){var ρσ_d={};ρσ_d[\"type\"]=self._name;ρσ_d[\"id\"]=self.id;return ρσ_d}).call(this))).then((function(){var ρσ_anonfunc=function(record){db.remove(record)};if(!ρσ_anonfunc.__argnames__)Object.defineProperties(ρσ_anonfunc,{__argnames__:{value:[\"record\"]}});return ρσ_anonfunc})())}else{var ρσ_Iter12=self._values;ρσ_Iter12=((typeof ρσ_Iter12[Symbol.iterator]===\"function\")?(ρσ_Iter12 instanceof Map?ρσ_Iter12.keys():ρσ_Iter12):Object.keys(ρσ_Iter12));for(var ρσ_Index12 of ρσ_Iter12){value=ρσ_Index12;value[\"_deleted\"]=true}db.bulkDocs(self._values)}return true};if(!Model.prototype.unlink.__defaults__)Object.defineProperties(Model.prototype.unlink,{__defaults__:{value:{is_client:configuration.client}},__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[\"is_client\"]}});Model.prototype.with_context=function with_context(){var self=this;var kwargs=arguments[arguments.length-1];if(kwargs===null||typeof kwargs!==\"object\"||kwargs[ρσ_kwargs_symbol]!==true)kwargs={};var key;var ρσ_Iter13=kwargs;ρσ_Iter13=((typeof ρσ_Iter13[Symbol.iterator]===\"function\")?(ρσ_Iter13 instanceof Map?ρσ_Iter13.keys():ρσ_Iter13):Object.keys(ρσ_Iter13));for(var ρσ_Index13 of ρσ_Iter13){key=ρσ_Index13;(ρσ_expr_temp=self.env.context)[(typeof key===\"number\"&&key<0)?ρσ_expr_temp.length+key:key]=kwargs[(typeof key===\"number\"&&key<0)?kwargs.length+key:key]}return self};if(!Model.prototype.with_context.__handles_kwarg_interpolation__)Object.defineProperties(Model.prototype.with_context,{__handles_kwarg_interpolation__:{value:true},__argnames__:{value:[]}});Model.prototype.__repr__=function __repr__(){return\"<\"+__name__+\".\"+this.constructor.name+\" #\"+this.ρσ_object_id+\">\"};Model.prototype.__str__=function __str__(){return this.__repr__()};Object.defineProperty(Model.prototype,\"__bases__\",{value:[]});Model.prototype._name=undefined;Model.prototype._inherit=false;ρσ_modules[\"orm.models\"].env=env;ρσ_modules[\"orm.models\"].schemas=schemas;ρσ_modules[\"orm.models\"].raw_models=raw_models;ρσ_modules[\"orm.models\"].queryInverse=queryInverse;ρσ_modules[\"orm.models\"].Model=Model"
	},
	"discard_asserts": false
}